<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Source to the Rust file `/home/travis/build/Michael-F-Bryan/libsignal-protocol-rs/target/debug/build/libsignal-protocol-sys-f58c36c0fb079125/out/bindings.rs`."><meta name="keywords" content="rust, rustlang, rust-lang"><title>bindings.rs.html -- source</title><link rel="stylesheet" type="text/css" href="../../../../../../../../../../../../normalize.css"><link rel="stylesheet" type="text/css" href="../../../../../../../../../../../../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../../../../../../../../../../../../dark.css"><link rel="stylesheet" type="text/css" href="../../../../../../../../../../../../light.css" id="themeStyle"><script src="../../../../../../../../../../../../storage.js"></script><noscript><link rel="stylesheet" href="../../../../../../../../../../../../noscript.css"></noscript><link rel="shortcut icon" href="../../../../../../../../../../../../favicon.ico"><style type="text/css">#crate-search{background-image:url("../../../../../../../../../../../../down-arrow.svg");}</style></head><body class="rustdoc source"><!--[if lte IE 8]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="sidebar"><div class="sidebar-menu">&#9776;</div><a href='../../../../../../../../../../../../libsignal_protocol_sys/index.html'><img src='../../../../../../../../../../../../rust-logo.png' alt='logo' width='100'></a></nav><div class="theme-picker"><button id="theme-picker" aria-label="Pick another theme!"><img src="../../../../../../../../../../../../brush.svg" width="18" alt="Pick another theme!"></button><div id="theme-choices"></div></div><script src="../../../../../../../../../../../../theme.js"></script><nav class="sub"><form class="search-form js-only"><div class="search-container"><div><select id="crate-search"><option value="All crates">All crates</option></select><input class="search-input" name="search" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"></div><a id="settings-menu" href="../../../../../../../../../../../../settings.html"><img src="../../../../../../../../../../../../wheel.svg" width="18" alt="Change settings"></a></div></form></nav><section id="main" class="content"><pre class="line-numbers"><span id="1">1</span>
<span id="2">2</span>
<span id="3">3</span>
</pre><div class="example-wrap"><pre class="rust ">
<span class="comment">/* automatically generated by rust-bindgen */</span>

<span class="kw">pub</span> <span class="kw">const</span> <span class="ident">RATCHET_CIPHER_KEY_LENGTH</span> : <span class="ident">u32</span> <span class="op">=</span> <span class="number">32</span> ; <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">RATCHET_MAC_KEY_LENGTH</span> : <span class="ident">u32</span> <span class="op">=</span> <span class="number">32</span> ; <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">RATCHET_IV_LENGTH</span> : <span class="ident">u32</span> <span class="op">=</span> <span class="number">16</span> ; <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">CURVE_SIGNATURE_LEN</span> : <span class="ident">u32</span> <span class="op">=</span> <span class="number">64</span> ; <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">PRE_KEY_MEDIUM_MAX_VALUE</span> : <span class="ident">u32</span> <span class="op">=</span> <span class="number">16777215</span> ; <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">SG_SUCCESS</span> : <span class="ident">u32</span> <span class="op">=</span> <span class="number">0</span> ; <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">SG_ERR_NOMEM</span> : <span class="ident">i32</span> <span class="op">=</span> <span class="op">-</span><span class="number">12</span> ; <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">SG_ERR_INVAL</span> : <span class="ident">i32</span> <span class="op">=</span> <span class="op">-</span><span class="number">22</span> ; <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">SG_ERR_UNKNOWN</span> : <span class="ident">i32</span> <span class="op">=</span> <span class="op">-</span><span class="number">1000</span> ; <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">SG_ERR_DUPLICATE_MESSAGE</span> : <span class="ident">i32</span> <span class="op">=</span> <span class="op">-</span><span class="number">1001</span> ; <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">SG_ERR_INVALID_KEY</span> : <span class="ident">i32</span> <span class="op">=</span> <span class="op">-</span><span class="number">1002</span> ; <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">SG_ERR_INVALID_KEY_ID</span> : <span class="ident">i32</span> <span class="op">=</span> <span class="op">-</span><span class="number">1003</span> ; <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">SG_ERR_INVALID_MAC</span> : <span class="ident">i32</span> <span class="op">=</span> <span class="op">-</span><span class="number">1004</span> ; <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">SG_ERR_INVALID_MESSAGE</span> : <span class="ident">i32</span> <span class="op">=</span> <span class="op">-</span><span class="number">1005</span> ; <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">SG_ERR_INVALID_VERSION</span> : <span class="ident">i32</span> <span class="op">=</span> <span class="op">-</span><span class="number">1006</span> ; <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">SG_ERR_LEGACY_MESSAGE</span> : <span class="ident">i32</span> <span class="op">=</span> <span class="op">-</span><span class="number">1007</span> ; <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">SG_ERR_NO_SESSION</span> : <span class="ident">i32</span> <span class="op">=</span> <span class="op">-</span><span class="number">1008</span> ; <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">SG_ERR_STALE_KEY_EXCHANGE</span> : <span class="ident">i32</span> <span class="op">=</span> <span class="op">-</span><span class="number">1009</span> ; <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">SG_ERR_UNTRUSTED_IDENTITY</span> : <span class="ident">i32</span> <span class="op">=</span> <span class="op">-</span><span class="number">1010</span> ; <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">SG_ERR_VRF_SIG_VERIF_FAILED</span> : <span class="ident">i32</span> <span class="op">=</span> <span class="op">-</span><span class="number">1011</span> ; <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">SG_ERR_INVALID_PROTO_BUF</span> : <span class="ident">i32</span> <span class="op">=</span> <span class="op">-</span><span class="number">1100</span> ; <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">SG_ERR_FP_VERSION_MISMATCH</span> : <span class="ident">i32</span> <span class="op">=</span> <span class="op">-</span><span class="number">1200</span> ; <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">SG_ERR_FP_IDENT_MISMATCH</span> : <span class="ident">i32</span> <span class="op">=</span> <span class="op">-</span><span class="number">1201</span> ; <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">SG_ERR_MINIMUM</span> : <span class="ident">i32</span> <span class="op">=</span> <span class="op">-</span><span class="number">9999</span> ; <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">SG_LOG_ERROR</span> : <span class="ident">u32</span> <span class="op">=</span> <span class="number">0</span> ; <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">SG_LOG_WARNING</span> : <span class="ident">u32</span> <span class="op">=</span> <span class="number">1</span> ; <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">SG_LOG_NOTICE</span> : <span class="ident">u32</span> <span class="op">=</span> <span class="number">2</span> ; <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">SG_LOG_INFO</span> : <span class="ident">u32</span> <span class="op">=</span> <span class="number">3</span> ; <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">SG_LOG_DEBUG</span> : <span class="ident">u32</span> <span class="op">=</span> <span class="number">4</span> ; <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">SG_CIPHER_AES_CTR_NOPADDING</span> : <span class="ident">u32</span> <span class="op">=</span> <span class="number">1</span> ; <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">SG_CIPHER_AES_CBC_PKCS5</span> : <span class="ident">u32</span> <span class="op">=</span> <span class="number">2</span> ; <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">KEY_EXCHANGE_INITIATE_FLAG</span> : <span class="ident">u32</span> <span class="op">=</span> <span class="number">1</span> ; <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">KEY_EXCHANGE_SIMULTAENOUS_INITIATE_FLAG</span> : <span class="ident">u32</span> <span class="op">=</span> <span class="number">4</span> ; <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">CIPHERTEXT_UNSUPPORTED_VERSION</span> : <span class="ident">u32</span> <span class="op">=</span> <span class="number">1</span> ; <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">CIPHERTEXT_CURRENT_VERSION</span> : <span class="ident">u32</span> <span class="op">=</span> <span class="number">3</span> ; <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">CIPHERTEXT_SIGNAL_TYPE</span> : <span class="ident">u32</span> <span class="op">=</span> <span class="number">2</span> ; <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">CIPHERTEXT_PREKEY_TYPE</span> : <span class="ident">u32</span> <span class="op">=</span> <span class="number">3</span> ; <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">CIPHERTEXT_SENDERKEY_TYPE</span> : <span class="ident">u32</span> <span class="op">=</span> <span class="number">4</span> ; <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">CIPHERTEXT_SENDERKEY_DISTRIBUTION_TYPE</span> : <span class="ident">u32</span> <span class="op">=</span> <span class="number">5</span> ; <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">CIPHERTEXT_ENCRYPTED_MESSAGE_OVERHEAD</span> : <span class="ident">u32</span> <span class="op">=</span> <span class="number">53</span> ; # [ <span class="ident">repr</span> ( <span class="ident">C</span> ) ] # [ <span class="ident">derive</span> ( <span class="ident">Debug</span> , <span class="ident">Copy</span> , <span class="ident">Clone</span> ) ] <span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">signal_type_base</span> { <span class="ident">_unused</span> : [ <span class="ident">u8</span> ; <span class="number">0</span> ] , } # [ <span class="ident">repr</span> ( <span class="ident">C</span> ) ] # [ <span class="ident">derive</span> ( <span class="ident">Debug</span> , <span class="ident">Copy</span> , <span class="ident">Clone</span> ) ] <span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">signal_buffer</span> { <span class="ident">_unused</span> : [ <span class="ident">u8</span> ; <span class="number">0</span> ] , } # [ <span class="ident">repr</span> ( <span class="ident">C</span> ) ] # [ <span class="ident">derive</span> ( <span class="ident">Debug</span> , <span class="ident">Copy</span> , <span class="ident">Clone</span> ) ] <span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">signal_buffer_list</span> { <span class="ident">_unused</span> : [ <span class="ident">u8</span> ; <span class="number">0</span> ] , } # [ <span class="ident">repr</span> ( <span class="ident">C</span> ) ] # [ <span class="ident">derive</span> ( <span class="ident">Debug</span> , <span class="ident">Copy</span> , <span class="ident">Clone</span> ) ] <span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">signal_int_list</span> { <span class="ident">_unused</span> : [ <span class="ident">u8</span> ; <span class="number">0</span> ] , } # [ <span class="ident">repr</span> ( <span class="ident">C</span> ) ] # [ <span class="ident">derive</span> ( <span class="ident">Debug</span> , <span class="ident">Copy</span> , <span class="ident">Clone</span> ) ] <span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">signal_context</span> { <span class="ident">_unused</span> : [ <span class="ident">u8</span> ; <span class="number">0</span> ] , } # [ <span class="ident">repr</span> ( <span class="ident">C</span> ) ] # [ <span class="ident">derive</span> ( <span class="ident">Debug</span> , <span class="ident">Copy</span> , <span class="ident">Clone</span> ) ] <span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">signal_protocol_store_context</span> { <span class="ident">_unused</span> : [ <span class="ident">u8</span> ; <span class="number">0</span> ] , } # [ <span class="ident">repr</span> ( <span class="ident">C</span> ) ] # [ <span class="ident">derive</span> ( <span class="ident">Debug</span> , <span class="ident">Copy</span> , <span class="ident">Clone</span> ) ] <span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">signal_protocol_address</span> { <span class="kw">pub</span> <span class="ident">name</span> : <span class="op">*</span> <span class="kw">const</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_char</span> , <span class="kw">pub</span> <span class="ident">name_len</span> : <span class="ident">usize</span> , <span class="kw">pub</span> <span class="ident">device_id</span> : <span class="ident">i32</span> , } # [ <span class="ident">test</span> ] <span class="kw">fn</span> <span class="ident">bindgen_test_layout_signal_protocol_address</span> ( ) { <span class="ident">assert_eq</span> <span class="op">!</span> ( :: <span class="ident">std</span> :: <span class="ident">mem</span> :: <span class="ident">size_of</span> :: <span class="op">&lt;</span> <span class="ident">signal_protocol_address</span> <span class="op">&gt;</span> ( ) , <span class="number">24usize</span> , <span class="ident">concat</span> <span class="op">!</span> ( <span class="string">&quot;Size of: &quot;</span> , <span class="ident">stringify</span> <span class="op">!</span> ( <span class="ident">signal_protocol_address</span> ) ) ) ; <span class="ident">assert_eq</span> <span class="op">!</span> ( :: <span class="ident">std</span> :: <span class="ident">mem</span> :: <span class="ident">align_of</span> :: <span class="op">&lt;</span> <span class="ident">signal_protocol_address</span> <span class="op">&gt;</span> ( ) , <span class="number">8usize</span> , <span class="ident">concat</span> <span class="op">!</span> ( <span class="string">&quot;Alignment of &quot;</span> , <span class="ident">stringify</span> <span class="op">!</span> ( <span class="ident">signal_protocol_address</span> ) ) ) ; <span class="ident">assert_eq</span> <span class="op">!</span> ( <span class="kw">unsafe</span> { <span class="op">&amp;</span> ( <span class="op">*</span> ( :: <span class="ident">std</span> :: <span class="ident">ptr</span> :: <span class="ident">null</span> :: <span class="op">&lt;</span> <span class="ident">signal_protocol_address</span> <span class="op">&gt;</span> ( ) ) ) . <span class="ident">name</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="kw">_</span> <span class="kw">as</span> <span class="ident">usize</span> } , <span class="number">0usize</span> , <span class="ident">concat</span> <span class="op">!</span> ( <span class="string">&quot;Offset of field: &quot;</span> , <span class="ident">stringify</span> <span class="op">!</span> ( <span class="ident">signal_protocol_address</span> ) , <span class="string">&quot;::&quot;</span> , <span class="ident">stringify</span> <span class="op">!</span> ( <span class="ident">name</span> ) ) ) ; <span class="ident">assert_eq</span> <span class="op">!</span> ( <span class="kw">unsafe</span> { <span class="op">&amp;</span> ( <span class="op">*</span> ( :: <span class="ident">std</span> :: <span class="ident">ptr</span> :: <span class="ident">null</span> :: <span class="op">&lt;</span> <span class="ident">signal_protocol_address</span> <span class="op">&gt;</span> ( ) ) ) . <span class="ident">name_len</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="kw">_</span> <span class="kw">as</span> <span class="ident">usize</span> } , <span class="number">8usize</span> , <span class="ident">concat</span> <span class="op">!</span> ( <span class="string">&quot;Offset of field: &quot;</span> , <span class="ident">stringify</span> <span class="op">!</span> ( <span class="ident">signal_protocol_address</span> ) , <span class="string">&quot;::&quot;</span> , <span class="ident">stringify</span> <span class="op">!</span> ( <span class="ident">name_len</span> ) ) ) ; <span class="ident">assert_eq</span> <span class="op">!</span> ( <span class="kw">unsafe</span> { <span class="op">&amp;</span> ( <span class="op">*</span> ( :: <span class="ident">std</span> :: <span class="ident">ptr</span> :: <span class="ident">null</span> :: <span class="op">&lt;</span> <span class="ident">signal_protocol_address</span> <span class="op">&gt;</span> ( ) ) ) . <span class="ident">device_id</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="kw">_</span> <span class="kw">as</span> <span class="ident">usize</span> } , <span class="number">16usize</span> , <span class="ident">concat</span> <span class="op">!</span> ( <span class="string">&quot;Offset of field: &quot;</span> , <span class="ident">stringify</span> <span class="op">!</span> ( <span class="ident">signal_protocol_address</span> ) , <span class="string">&quot;::&quot;</span> , <span class="ident">stringify</span> <span class="op">!</span> ( <span class="ident">device_id</span> ) ) ) ; } # [ <span class="ident">repr</span> ( <span class="ident">C</span> ) ] # [ <span class="ident">derive</span> ( <span class="ident">Debug</span> , <span class="ident">Copy</span> , <span class="ident">Clone</span> ) ] <span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">signal_protocol_sender_key_name</span> { <span class="kw">pub</span> <span class="ident">group_id</span> : <span class="op">*</span> <span class="kw">const</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_char</span> , <span class="kw">pub</span> <span class="ident">group_id_len</span> : <span class="ident">usize</span> , <span class="kw">pub</span> <span class="ident">sender</span> : <span class="ident">signal_protocol_address</span> , } # [ <span class="ident">test</span> ] <span class="kw">fn</span> <span class="ident">bindgen_test_layout_signal_protocol_sender_key_name</span> ( ) { <span class="ident">assert_eq</span> <span class="op">!</span> ( :: <span class="ident">std</span> :: <span class="ident">mem</span> :: <span class="ident">size_of</span> :: <span class="op">&lt;</span> <span class="ident">signal_protocol_sender_key_name</span> <span class="op">&gt;</span> ( ) , <span class="number">40usize</span> , <span class="ident">concat</span> <span class="op">!</span> ( <span class="string">&quot;Size of: &quot;</span> , <span class="ident">stringify</span> <span class="op">!</span> ( <span class="ident">signal_protocol_sender_key_name</span> ) ) ) ; <span class="ident">assert_eq</span> <span class="op">!</span> ( :: <span class="ident">std</span> :: <span class="ident">mem</span> :: <span class="ident">align_of</span> :: <span class="op">&lt;</span> <span class="ident">signal_protocol_sender_key_name</span> <span class="op">&gt;</span> ( ) , <span class="number">8usize</span> , <span class="ident">concat</span> <span class="op">!</span> ( <span class="string">&quot;Alignment of &quot;</span> , <span class="ident">stringify</span> <span class="op">!</span> ( <span class="ident">signal_protocol_sender_key_name</span> ) ) ) ; <span class="ident">assert_eq</span> <span class="op">!</span> ( <span class="kw">unsafe</span> { <span class="op">&amp;</span> ( <span class="op">*</span> ( :: <span class="ident">std</span> :: <span class="ident">ptr</span> :: <span class="ident">null</span> :: <span class="op">&lt;</span> <span class="ident">signal_protocol_sender_key_name</span> <span class="op">&gt;</span> ( ) ) ) . <span class="ident">group_id</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="kw">_</span> <span class="kw">as</span> <span class="ident">usize</span> } , <span class="number">0usize</span> , <span class="ident">concat</span> <span class="op">!</span> ( <span class="string">&quot;Offset of field: &quot;</span> , <span class="ident">stringify</span> <span class="op">!</span> ( <span class="ident">signal_protocol_sender_key_name</span> ) , <span class="string">&quot;::&quot;</span> , <span class="ident">stringify</span> <span class="op">!</span> ( <span class="ident">group_id</span> ) ) ) ; <span class="ident">assert_eq</span> <span class="op">!</span> ( <span class="kw">unsafe</span> { <span class="op">&amp;</span> ( <span class="op">*</span> ( :: <span class="ident">std</span> :: <span class="ident">ptr</span> :: <span class="ident">null</span> :: <span class="op">&lt;</span> <span class="ident">signal_protocol_sender_key_name</span> <span class="op">&gt;</span> ( ) ) ) . <span class="ident">group_id_len</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="kw">_</span> <span class="kw">as</span> <span class="ident">usize</span> } , <span class="number">8usize</span> , <span class="ident">concat</span> <span class="op">!</span> ( <span class="string">&quot;Offset of field: &quot;</span> , <span class="ident">stringify</span> <span class="op">!</span> ( <span class="ident">signal_protocol_sender_key_name</span> ) , <span class="string">&quot;::&quot;</span> , <span class="ident">stringify</span> <span class="op">!</span> ( <span class="ident">group_id_len</span> ) ) ) ; <span class="ident">assert_eq</span> <span class="op">!</span> ( <span class="kw">unsafe</span> { <span class="op">&amp;</span> ( <span class="op">*</span> ( :: <span class="ident">std</span> :: <span class="ident">ptr</span> :: <span class="ident">null</span> :: <span class="op">&lt;</span> <span class="ident">signal_protocol_sender_key_name</span> <span class="op">&gt;</span> ( ) ) ) . <span class="ident">sender</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="kw">_</span> <span class="kw">as</span> <span class="ident">usize</span> } , <span class="number">16usize</span> , <span class="ident">concat</span> <span class="op">!</span> ( <span class="string">&quot;Offset of field: &quot;</span> , <span class="ident">stringify</span> <span class="op">!</span> ( <span class="ident">signal_protocol_sender_key_name</span> ) , <span class="string">&quot;::&quot;</span> , <span class="ident">stringify</span> <span class="op">!</span> ( <span class="ident">sender</span> ) ) ) ; } # [ <span class="ident">repr</span> ( <span class="ident">C</span> ) ] # [ <span class="ident">derive</span> ( <span class="ident">Debug</span> , <span class="ident">Copy</span> , <span class="ident">Clone</span> ) ] <span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">ec_public_key</span> { <span class="ident">_unused</span> : [ <span class="ident">u8</span> ; <span class="number">0</span> ] , } # [ <span class="ident">repr</span> ( <span class="ident">C</span> ) ] # [ <span class="ident">derive</span> ( <span class="ident">Debug</span> , <span class="ident">Copy</span> , <span class="ident">Clone</span> ) ] <span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">ec_private_key</span> { <span class="ident">_unused</span> : [ <span class="ident">u8</span> ; <span class="number">0</span> ] , } # [ <span class="ident">repr</span> ( <span class="ident">C</span> ) ] # [ <span class="ident">derive</span> ( <span class="ident">Debug</span> , <span class="ident">Copy</span> , <span class="ident">Clone</span> ) ] <span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">ec_key_pair</span> { <span class="ident">_unused</span> : [ <span class="ident">u8</span> ; <span class="number">0</span> ] , } # [ <span class="ident">repr</span> ( <span class="ident">C</span> ) ] # [ <span class="ident">derive</span> ( <span class="ident">Debug</span> , <span class="ident">Copy</span> , <span class="ident">Clone</span> ) ] <span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">ec_public_key_list</span> { <span class="ident">_unused</span> : [ <span class="ident">u8</span> ; <span class="number">0</span> ] , } # [ <span class="ident">repr</span> ( <span class="ident">C</span> ) ] # [ <span class="ident">derive</span> ( <span class="ident">Debug</span> , <span class="ident">Copy</span> , <span class="ident">Clone</span> ) ] <span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">hkdf_context</span> { <span class="ident">_unused</span> : [ <span class="ident">u8</span> ; <span class="number">0</span> ] , } # [ <span class="ident">repr</span> ( <span class="ident">C</span> ) ] # [ <span class="ident">derive</span> ( <span class="ident">Debug</span> , <span class="ident">Copy</span> , <span class="ident">Clone</span> ) ] <span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">signal_protocol_key_helper_pre_key_list_node</span> { <span class="ident">_unused</span> : [ <span class="ident">u8</span> ; <span class="number">0</span> ] , } # [ <span class="ident">repr</span> ( <span class="ident">C</span> ) ] # [ <span class="ident">derive</span> ( <span class="ident">Debug</span> , <span class="ident">Copy</span> , <span class="ident">Clone</span> ) ] <span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">ciphertext_message</span> { <span class="ident">_unused</span> : [ <span class="ident">u8</span> ; <span class="number">0</span> ] , } # [ <span class="ident">repr</span> ( <span class="ident">C</span> ) ] # [ <span class="ident">derive</span> ( <span class="ident">Debug</span> , <span class="ident">Copy</span> , <span class="ident">Clone</span> ) ] <span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">signal_message</span> { <span class="ident">_unused</span> : [ <span class="ident">u8</span> ; <span class="number">0</span> ] , } # [ <span class="ident">repr</span> ( <span class="ident">C</span> ) ] # [ <span class="ident">derive</span> ( <span class="ident">Debug</span> , <span class="ident">Copy</span> , <span class="ident">Clone</span> ) ] <span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">pre_key_signal_message</span> { <span class="ident">_unused</span> : [ <span class="ident">u8</span> ; <span class="number">0</span> ] , } # [ <span class="ident">repr</span> ( <span class="ident">C</span> ) ] # [ <span class="ident">derive</span> ( <span class="ident">Debug</span> , <span class="ident">Copy</span> , <span class="ident">Clone</span> ) ] <span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">sender_key_message</span> { <span class="ident">_unused</span> : [ <span class="ident">u8</span> ; <span class="number">0</span> ] , } # [ <span class="ident">repr</span> ( <span class="ident">C</span> ) ] # [ <span class="ident">derive</span> ( <span class="ident">Debug</span> , <span class="ident">Copy</span> , <span class="ident">Clone</span> ) ] <span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">sender_key_distribution_message</span> { <span class="ident">_unused</span> : [ <span class="ident">u8</span> ; <span class="number">0</span> ] , } # [ <span class="ident">repr</span> ( <span class="ident">C</span> ) ] # [ <span class="ident">derive</span> ( <span class="ident">Debug</span> , <span class="ident">Copy</span> , <span class="ident">Clone</span> ) ] <span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">ratchet_chain_key</span> { <span class="ident">_unused</span> : [ <span class="ident">u8</span> ; <span class="number">0</span> ] , } # [ <span class="ident">repr</span> ( <span class="ident">C</span> ) ] # [ <span class="ident">derive</span> ( <span class="ident">Debug</span> , <span class="ident">Copy</span> , <span class="ident">Clone</span> ) ] <span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">ratchet_root_key</span> { <span class="ident">_unused</span> : [ <span class="ident">u8</span> ; <span class="number">0</span> ] , } # [ <span class="ident">repr</span> ( <span class="ident">C</span> ) ] # [ <span class="ident">derive</span> ( <span class="ident">Debug</span> , <span class="ident">Copy</span> , <span class="ident">Clone</span> ) ] <span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">ratchet_identity_key_pair</span> { <span class="ident">_unused</span> : [ <span class="ident">u8</span> ; <span class="number">0</span> ] , } # [ <span class="ident">repr</span> ( <span class="ident">C</span> ) ] # [ <span class="ident">derive</span> ( <span class="ident">Debug</span> , <span class="ident">Copy</span> , <span class="ident">Clone</span> ) ] <span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">ratchet_message_keys</span> { <span class="kw">pub</span> <span class="ident">cipher_key</span> : [ <span class="ident">u8</span> ; <span class="number">32usize</span> ] , <span class="kw">pub</span> <span class="ident">mac_key</span> : [ <span class="ident">u8</span> ; <span class="number">32usize</span> ] , <span class="kw">pub</span> <span class="ident">iv</span> : [ <span class="ident">u8</span> ; <span class="number">16usize</span> ] , <span class="kw">pub</span> <span class="ident">counter</span> : <span class="ident">u32</span> , } # [ <span class="ident">test</span> ] <span class="kw">fn</span> <span class="ident">bindgen_test_layout_ratchet_message_keys</span> ( ) { <span class="ident">assert_eq</span> <span class="op">!</span> ( :: <span class="ident">std</span> :: <span class="ident">mem</span> :: <span class="ident">size_of</span> :: <span class="op">&lt;</span> <span class="ident">ratchet_message_keys</span> <span class="op">&gt;</span> ( ) , <span class="number">84usize</span> , <span class="ident">concat</span> <span class="op">!</span> ( <span class="string">&quot;Size of: &quot;</span> , <span class="ident">stringify</span> <span class="op">!</span> ( <span class="ident">ratchet_message_keys</span> ) ) ) ; <span class="ident">assert_eq</span> <span class="op">!</span> ( :: <span class="ident">std</span> :: <span class="ident">mem</span> :: <span class="ident">align_of</span> :: <span class="op">&lt;</span> <span class="ident">ratchet_message_keys</span> <span class="op">&gt;</span> ( ) , <span class="number">4usize</span> , <span class="ident">concat</span> <span class="op">!</span> ( <span class="string">&quot;Alignment of &quot;</span> , <span class="ident">stringify</span> <span class="op">!</span> ( <span class="ident">ratchet_message_keys</span> ) ) ) ; <span class="ident">assert_eq</span> <span class="op">!</span> ( <span class="kw">unsafe</span> { <span class="op">&amp;</span> ( <span class="op">*</span> ( :: <span class="ident">std</span> :: <span class="ident">ptr</span> :: <span class="ident">null</span> :: <span class="op">&lt;</span> <span class="ident">ratchet_message_keys</span> <span class="op">&gt;</span> ( ) ) ) . <span class="ident">cipher_key</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="kw">_</span> <span class="kw">as</span> <span class="ident">usize</span> } , <span class="number">0usize</span> , <span class="ident">concat</span> <span class="op">!</span> ( <span class="string">&quot;Offset of field: &quot;</span> , <span class="ident">stringify</span> <span class="op">!</span> ( <span class="ident">ratchet_message_keys</span> ) , <span class="string">&quot;::&quot;</span> , <span class="ident">stringify</span> <span class="op">!</span> ( <span class="ident">cipher_key</span> ) ) ) ; <span class="ident">assert_eq</span> <span class="op">!</span> ( <span class="kw">unsafe</span> { <span class="op">&amp;</span> ( <span class="op">*</span> ( :: <span class="ident">std</span> :: <span class="ident">ptr</span> :: <span class="ident">null</span> :: <span class="op">&lt;</span> <span class="ident">ratchet_message_keys</span> <span class="op">&gt;</span> ( ) ) ) . <span class="ident">mac_key</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="kw">_</span> <span class="kw">as</span> <span class="ident">usize</span> } , <span class="number">32usize</span> , <span class="ident">concat</span> <span class="op">!</span> ( <span class="string">&quot;Offset of field: &quot;</span> , <span class="ident">stringify</span> <span class="op">!</span> ( <span class="ident">ratchet_message_keys</span> ) , <span class="string">&quot;::&quot;</span> , <span class="ident">stringify</span> <span class="op">!</span> ( <span class="ident">mac_key</span> ) ) ) ; <span class="ident">assert_eq</span> <span class="op">!</span> ( <span class="kw">unsafe</span> { <span class="op">&amp;</span> ( <span class="op">*</span> ( :: <span class="ident">std</span> :: <span class="ident">ptr</span> :: <span class="ident">null</span> :: <span class="op">&lt;</span> <span class="ident">ratchet_message_keys</span> <span class="op">&gt;</span> ( ) ) ) . <span class="ident">iv</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="kw">_</span> <span class="kw">as</span> <span class="ident">usize</span> } , <span class="number">64usize</span> , <span class="ident">concat</span> <span class="op">!</span> ( <span class="string">&quot;Offset of field: &quot;</span> , <span class="ident">stringify</span> <span class="op">!</span> ( <span class="ident">ratchet_message_keys</span> ) , <span class="string">&quot;::&quot;</span> , <span class="ident">stringify</span> <span class="op">!</span> ( <span class="ident">iv</span> ) ) ) ; <span class="ident">assert_eq</span> <span class="op">!</span> ( <span class="kw">unsafe</span> { <span class="op">&amp;</span> ( <span class="op">*</span> ( :: <span class="ident">std</span> :: <span class="ident">ptr</span> :: <span class="ident">null</span> :: <span class="op">&lt;</span> <span class="ident">ratchet_message_keys</span> <span class="op">&gt;</span> ( ) ) ) . <span class="ident">counter</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="kw">_</span> <span class="kw">as</span> <span class="ident">usize</span> } , <span class="number">80usize</span> , <span class="ident">concat</span> <span class="op">!</span> ( <span class="string">&quot;Offset of field: &quot;</span> , <span class="ident">stringify</span> <span class="op">!</span> ( <span class="ident">ratchet_message_keys</span> ) , <span class="string">&quot;::&quot;</span> , <span class="ident">stringify</span> <span class="op">!</span> ( <span class="ident">counter</span> ) ) ) ; } # [ <span class="ident">repr</span> ( <span class="ident">C</span> ) ] # [ <span class="ident">derive</span> ( <span class="ident">Debug</span> , <span class="ident">Copy</span> , <span class="ident">Clone</span> ) ] <span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">session_pre_key</span> { <span class="ident">_unused</span> : [ <span class="ident">u8</span> ; <span class="number">0</span> ] , } # [ <span class="ident">repr</span> ( <span class="ident">C</span> ) ] # [ <span class="ident">derive</span> ( <span class="ident">Debug</span> , <span class="ident">Copy</span> , <span class="ident">Clone</span> ) ] <span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">session_signed_pre_key</span> { <span class="ident">_unused</span> : [ <span class="ident">u8</span> ; <span class="number">0</span> ] , } # [ <span class="ident">repr</span> ( <span class="ident">C</span> ) ] # [ <span class="ident">derive</span> ( <span class="ident">Debug</span> , <span class="ident">Copy</span> , <span class="ident">Clone</span> ) ] <span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">session_pre_key_bundle</span> { <span class="ident">_unused</span> : [ <span class="ident">u8</span> ; <span class="number">0</span> ] , } # [ <span class="ident">repr</span> ( <span class="ident">C</span> ) ] # [ <span class="ident">derive</span> ( <span class="ident">Debug</span> , <span class="ident">Copy</span> , <span class="ident">Clone</span> ) ] <span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">session_builder</span> { <span class="ident">_unused</span> : [ <span class="ident">u8</span> ; <span class="number">0</span> ] , } # [ <span class="ident">repr</span> ( <span class="ident">C</span> ) ] # [ <span class="ident">derive</span> ( <span class="ident">Debug</span> , <span class="ident">Copy</span> , <span class="ident">Clone</span> ) ] <span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">session_record</span> { <span class="ident">_unused</span> : [ <span class="ident">u8</span> ; <span class="number">0</span> ] , } # [ <span class="ident">repr</span> ( <span class="ident">C</span> ) ] # [ <span class="ident">derive</span> ( <span class="ident">Debug</span> , <span class="ident">Copy</span> , <span class="ident">Clone</span> ) ] <span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">session_record_state_node</span> { <span class="ident">_unused</span> : [ <span class="ident">u8</span> ; <span class="number">0</span> ] , } # [ <span class="ident">repr</span> ( <span class="ident">C</span> ) ] # [ <span class="ident">derive</span> ( <span class="ident">Debug</span> , <span class="ident">Copy</span> , <span class="ident">Clone</span> ) ] <span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">session_state</span> { <span class="ident">_unused</span> : [ <span class="ident">u8</span> ; <span class="number">0</span> ] , } # [ <span class="ident">repr</span> ( <span class="ident">C</span> ) ] # [ <span class="ident">derive</span> ( <span class="ident">Debug</span> , <span class="ident">Copy</span> , <span class="ident">Clone</span> ) ] <span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">session_cipher</span> { <span class="ident">_unused</span> : [ <span class="ident">u8</span> ; <span class="number">0</span> ] , } # [ <span class="ident">repr</span> ( <span class="ident">C</span> ) ] # [ <span class="ident">derive</span> ( <span class="ident">Debug</span> , <span class="ident">Copy</span> , <span class="ident">Clone</span> ) ] <span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">sender_message_key</span> { <span class="ident">_unused</span> : [ <span class="ident">u8</span> ; <span class="number">0</span> ] , } # [ <span class="ident">repr</span> ( <span class="ident">C</span> ) ] # [ <span class="ident">derive</span> ( <span class="ident">Debug</span> , <span class="ident">Copy</span> , <span class="ident">Clone</span> ) ] <span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">sender_chain_key</span> { <span class="ident">_unused</span> : [ <span class="ident">u8</span> ; <span class="number">0</span> ] , } # [ <span class="ident">repr</span> ( <span class="ident">C</span> ) ] # [ <span class="ident">derive</span> ( <span class="ident">Debug</span> , <span class="ident">Copy</span> , <span class="ident">Clone</span> ) ] <span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">sender_key_state</span> { <span class="ident">_unused</span> : [ <span class="ident">u8</span> ; <span class="number">0</span> ] , } # [ <span class="ident">repr</span> ( <span class="ident">C</span> ) ] # [ <span class="ident">derive</span> ( <span class="ident">Debug</span> , <span class="ident">Copy</span> , <span class="ident">Clone</span> ) ] <span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">sender_key_record</span> { <span class="ident">_unused</span> : [ <span class="ident">u8</span> ; <span class="number">0</span> ] , } # [ <span class="ident">repr</span> ( <span class="ident">C</span> ) ] # [ <span class="ident">derive</span> ( <span class="ident">Debug</span> , <span class="ident">Copy</span> , <span class="ident">Clone</span> ) ] <span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">group_session_builder</span> { <span class="ident">_unused</span> : [ <span class="ident">u8</span> ; <span class="number">0</span> ] , } # [ <span class="ident">repr</span> ( <span class="ident">C</span> ) ] # [ <span class="ident">derive</span> ( <span class="ident">Debug</span> , <span class="ident">Copy</span> , <span class="ident">Clone</span> ) ] <span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">group_cipher</span> { <span class="ident">_unused</span> : [ <span class="ident">u8</span> ; <span class="number">0</span> ] , } # [ <span class="ident">repr</span> ( <span class="ident">C</span> ) ] # [ <span class="ident">derive</span> ( <span class="ident">Debug</span> , <span class="ident">Copy</span> , <span class="ident">Clone</span> ) ] <span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">fingerprint</span> { <span class="ident">_unused</span> : [ <span class="ident">u8</span> ; <span class="number">0</span> ] , } # [ <span class="ident">repr</span> ( <span class="ident">C</span> ) ] # [ <span class="ident">derive</span> ( <span class="ident">Debug</span> , <span class="ident">Copy</span> , <span class="ident">Clone</span> ) ] <span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">displayable_fingerprint</span> { <span class="ident">_unused</span> : [ <span class="ident">u8</span> ; <span class="number">0</span> ] , } # [ <span class="ident">repr</span> ( <span class="ident">C</span> ) ] # [ <span class="ident">derive</span> ( <span class="ident">Debug</span> , <span class="ident">Copy</span> , <span class="ident">Clone</span> ) ] <span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">scannable_fingerprint</span> { <span class="ident">_unused</span> : [ <span class="ident">u8</span> ; <span class="number">0</span> ] , } # [ <span class="ident">repr</span> ( <span class="ident">C</span> ) ] # [ <span class="ident">derive</span> ( <span class="ident">Debug</span> , <span class="ident">Copy</span> , <span class="ident">Clone</span> ) ] <span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">fingerprint_generator</span> { <span class="ident">_unused</span> : [ <span class="ident">u8</span> ; <span class="number">0</span> ] , } # [ <span class="ident">repr</span> ( <span class="ident">C</span> ) ] # [ <span class="ident">derive</span> ( <span class="ident">Debug</span> , <span class="ident">Copy</span> , <span class="ident">Clone</span> ) ] <span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">device_consistency_signature</span> { <span class="ident">_unused</span> : [ <span class="ident">u8</span> ; <span class="number">0</span> ] , } # [ <span class="ident">repr</span> ( <span class="ident">C</span> ) ] # [ <span class="ident">derive</span> ( <span class="ident">Debug</span> , <span class="ident">Copy</span> , <span class="ident">Clone</span> ) ] <span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">device_consistency_commitment</span> { <span class="ident">_unused</span> : [ <span class="ident">u8</span> ; <span class="number">0</span> ] , } # [ <span class="ident">repr</span> ( <span class="ident">C</span> ) ] # [ <span class="ident">derive</span> ( <span class="ident">Debug</span> , <span class="ident">Copy</span> , <span class="ident">Clone</span> ) ] <span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">device_consistency_message</span> { <span class="ident">_unused</span> : [ <span class="ident">u8</span> ; <span class="number">0</span> ] , } # [ <span class="ident">repr</span> ( <span class="ident">C</span> ) ] # [ <span class="ident">derive</span> ( <span class="ident">Debug</span> , <span class="ident">Copy</span> , <span class="ident">Clone</span> ) ] <span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">device_consistency_signature_list</span> { <span class="ident">_unused</span> : [ <span class="ident">u8</span> ; <span class="number">0</span> ] , } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">ratchet_chain_key_create</span> ( <span class="ident">chain_key</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">ratchet_chain_key</span> , <span class="ident">kdf</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">hkdf_context</span> , <span class="ident">key</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">u8</span> , <span class="ident">key_len</span> : <span class="ident">usize</span> , <span class="ident">index</span> : <span class="ident">u32</span> , <span class="ident">global_context</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_context</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">ratchet_chain_key_get_key</span> ( <span class="ident">chain_key</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">ratchet_chain_key</span> , <span class="ident">buffer</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_buffer</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">ratchet_chain_key_get_index</span> ( <span class="ident">chain_key</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">ratchet_chain_key</span> ) <span class="op">-&gt;</span> <span class="ident">u32</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">ratchet_chain_key_get_message_keys</span> ( <span class="ident">chain_key</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">ratchet_chain_key</span> , <span class="ident">message_keys</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">ratchet_message_keys</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">ratchet_chain_key_create_next</span> ( <span class="ident">chain_key</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">ratchet_chain_key</span> , <span class="ident">next_chain_key</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">ratchet_chain_key</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">ratchet_chain_key_destroy</span> ( <span class="ident">type_</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_type_base</span> ) ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">ratchet_root_key_create</span> ( <span class="ident">root_key</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">ratchet_root_key</span> , <span class="ident">kdf</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">hkdf_context</span> , <span class="ident">key</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">u8</span> , <span class="ident">key_len</span> : <span class="ident">usize</span> , <span class="ident">global_context</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_context</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">ratchet_root_key_create_chain</span> ( <span class="ident">root_key</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">ratchet_root_key</span> , <span class="ident">new_root_key</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">ratchet_root_key</span> , <span class="ident">new_chain_key</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">ratchet_chain_key</span> , <span class="ident">their_ratchet_key</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">ec_public_key</span> , <span class="ident">our_ratchet_key_private</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">ec_private_key</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">ratchet_root_key_get_key</span> ( <span class="ident">root_key</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">ratchet_root_key</span> , <span class="ident">buffer</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_buffer</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">ratchet_root_key_compare</span> ( <span class="ident">key1</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">ratchet_root_key</span> , <span class="ident">key2</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">ratchet_root_key</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">ratchet_root_key_destroy</span> ( <span class="ident">type_</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_type_base</span> ) ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">ratchet_identity_key_pair_create</span> ( <span class="ident">key_pair</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">ratchet_identity_key_pair</span> , <span class="ident">public_key</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">ec_public_key</span> , <span class="ident">private_key</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">ec_private_key</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">ratchet_identity_key_pair_serialize</span> ( <span class="ident">buffer</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_buffer</span> , <span class="ident">key_pair</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">ratchet_identity_key_pair</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">ratchet_identity_key_pair_deserialize</span> ( <span class="ident">key_pair</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">ratchet_identity_key_pair</span> , <span class="ident">data</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">u8</span> , <span class="ident">len</span> : <span class="ident">usize</span> , <span class="ident">global_context</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_context</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">ratchet_identity_key_pair_get_public</span> ( <span class="ident">key_pair</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">ratchet_identity_key_pair</span> ) <span class="op">-&gt;</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">ec_public_key</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">ratchet_identity_key_pair_get_private</span> ( <span class="ident">key_pair</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">ratchet_identity_key_pair</span> ) <span class="op">-&gt;</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">ec_private_key</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">ratchet_identity_key_pair_destroy</span> ( <span class="ident">type_</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_type_base</span> ) ; } # [ <span class="ident">repr</span> ( <span class="ident">C</span> ) ] # [ <span class="ident">derive</span> ( <span class="ident">Debug</span> , <span class="ident">Copy</span> , <span class="ident">Clone</span> ) ] <span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">symmetric_signal_protocol_parameters</span> { <span class="ident">_unused</span> : [ <span class="ident">u8</span> ; <span class="number">0</span> ] , } # [ <span class="ident">repr</span> ( <span class="ident">C</span> ) ] # [ <span class="ident">derive</span> ( <span class="ident">Debug</span> , <span class="ident">Copy</span> , <span class="ident">Clone</span> ) ] <span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">alice_signal_protocol_parameters</span> { <span class="ident">_unused</span> : [ <span class="ident">u8</span> ; <span class="number">0</span> ] , } # [ <span class="ident">repr</span> ( <span class="ident">C</span> ) ] # [ <span class="ident">derive</span> ( <span class="ident">Debug</span> , <span class="ident">Copy</span> , <span class="ident">Clone</span> ) ] <span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">bob_signal_protocol_parameters</span> { <span class="ident">_unused</span> : [ <span class="ident">u8</span> ; <span class="number">0</span> ] , } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">symmetric_signal_protocol_parameters_create</span> ( <span class="ident">parameters</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">symmetric_signal_protocol_parameters</span> , <span class="ident">our_identity_key</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">ratchet_identity_key_pair</span> , <span class="ident">our_base_key</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">ec_key_pair</span> , <span class="ident">our_ratchet_key</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">ec_key_pair</span> , <span class="ident">their_base_key</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">ec_public_key</span> , <span class="ident">their_ratchet_key</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">ec_public_key</span> , <span class="ident">their_identity_key</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">ec_public_key</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">symmetric_signal_protocol_parameters_get_our_identity_key</span> ( <span class="ident">parameters</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">symmetric_signal_protocol_parameters</span> ) <span class="op">-&gt;</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">ratchet_identity_key_pair</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">symmetric_signal_protocol_parameters_get_our_base_key</span> ( <span class="ident">parameters</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">symmetric_signal_protocol_parameters</span> ) <span class="op">-&gt;</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">ec_key_pair</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">symmetric_signal_protocol_parameters_get_our_ratchet_key</span> ( <span class="ident">parameters</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">symmetric_signal_protocol_parameters</span> ) <span class="op">-&gt;</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">ec_key_pair</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">symmetric_signal_protocol_parameters_get_their_base_key</span> ( <span class="ident">parameters</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">symmetric_signal_protocol_parameters</span> ) <span class="op">-&gt;</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">ec_public_key</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">symmetric_signal_protocol_parameters_get_their_ratchet_key</span> ( <span class="ident">parameters</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">symmetric_signal_protocol_parameters</span> ) <span class="op">-&gt;</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">ec_public_key</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">symmetric_signal_protocol_parameters_get_their_identity_key</span> ( <span class="ident">parameters</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">symmetric_signal_protocol_parameters</span> ) <span class="op">-&gt;</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">ec_public_key</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">symmetric_signal_protocol_parameters_destroy</span> ( <span class="ident">type_</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_type_base</span> ) ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">alice_signal_protocol_parameters_create</span> ( <span class="ident">parameters</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">alice_signal_protocol_parameters</span> , <span class="ident">our_identity_key</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">ratchet_identity_key_pair</span> , <span class="ident">our_base_key</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">ec_key_pair</span> , <span class="ident">their_identity_key</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">ec_public_key</span> , <span class="ident">their_signed_pre_key</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">ec_public_key</span> , <span class="ident">their_one_time_pre_key</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">ec_public_key</span> , <span class="ident">their_ratchet_key</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">ec_public_key</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">alice_signal_protocol_parameters_destroy</span> ( <span class="ident">type_</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_type_base</span> ) ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">bob_signal_protocol_parameters_create</span> ( <span class="ident">parameters</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">bob_signal_protocol_parameters</span> , <span class="ident">our_identity_key</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">ratchet_identity_key_pair</span> , <span class="ident">our_signed_pre_key</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">ec_key_pair</span> , <span class="ident">our_one_time_pre_key</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">ec_key_pair</span> , <span class="ident">our_ratchet_key</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">ec_key_pair</span> , <span class="ident">their_identity_key</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">ec_public_key</span> , <span class="ident">their_base_key</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">ec_public_key</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">bob_signal_protocol_parameters_destroy</span> ( <span class="ident">type_</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_type_base</span> ) ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">ratcheting_session_symmetric_initialize</span> ( <span class="ident">state</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">session_state</span> , <span class="ident">parameters</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">symmetric_signal_protocol_parameters</span> , <span class="ident">global_context</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_context</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">ratcheting_session_alice_initialize</span> ( <span class="ident">state</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">session_state</span> , <span class="ident">parameters</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">alice_signal_protocol_parameters</span> , <span class="ident">global_context</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_context</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">ratcheting_session_bob_initialize</span> ( <span class="ident">state</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">session_state</span> , <span class="ident">parameters</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">bob_signal_protocol_parameters</span> , <span class="ident">global_context</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_context</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">curve_internal_fast_tests</span> ( <span class="ident">silent</span> : :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">curve_decode_point</span> ( <span class="ident">public_key</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">ec_public_key</span> , <span class="ident">key_data</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">u8</span> , <span class="ident">key_len</span> : <span class="ident">usize</span> , <span class="ident">global_context</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_context</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">ec_public_key_compare</span> ( <span class="ident">key1</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">ec_public_key</span> , <span class="ident">key2</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">ec_public_key</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">ec_public_key_memcmp</span> ( <span class="ident">key1</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">ec_public_key</span> , <span class="ident">key2</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">ec_public_key</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; Serialize the public key into a buffer that can be stored.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; The format of this data is compatible with the input format of&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; curve_decode_point().&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param buffer Pointer to a buffer that will be allocated by this function&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;     and filled with the contents of the key. The caller is responsible for&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;     freeing this buffer with signal_buffer_free().&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param key Key to serialize&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @return 0 on success, negative on failure&quot;</span> ] <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">ec_public_key_serialize</span> ( <span class="ident">buffer</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_buffer</span> , <span class="ident">key</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">ec_public_key</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">ec_public_key_destroy</span> ( <span class="ident">type_</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_type_base</span> ) ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">curve_decode_private_point</span> ( <span class="ident">private_key</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">ec_private_key</span> , <span class="ident">key_data</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">u8</span> , <span class="ident">key_len</span> : <span class="ident">usize</span> , <span class="ident">global_context</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_context</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">ec_private_key_compare</span> ( <span class="ident">key1</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">ec_private_key</span> , <span class="ident">key2</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">ec_private_key</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; Serialize the private key into a buffer that can be stored.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; The format of this data is compatible with the input format of&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; curve_decode_private_point().&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param buffer Pointer to a buffer that will be allocated by this function&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;     and filled with the contents of the key. The caller is responsible for&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;     freeing this buffer with signal_buffer_free().&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param key Key to serialize&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @return 0 on success, negative on failure&quot;</span> ] <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">ec_private_key_serialize</span> ( <span class="ident">buffer</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_buffer</span> , <span class="ident">key</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">ec_private_key</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">ec_private_key_destroy</span> ( <span class="ident">type_</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_type_base</span> ) ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">ec_key_pair_create</span> ( <span class="ident">key_pair</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">ec_key_pair</span> , <span class="ident">public_key</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">ec_public_key</span> , <span class="ident">private_key</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">ec_private_key</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">ec_key_pair_get_public</span> ( <span class="ident">key_pair</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">ec_key_pair</span> ) <span class="op">-&gt;</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">ec_public_key</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">ec_key_pair_get_private</span> ( <span class="ident">key_pair</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">ec_key_pair</span> ) <span class="op">-&gt;</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">ec_private_key</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">ec_key_pair_destroy</span> ( <span class="ident">type_</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_type_base</span> ) ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">curve_generate_private_key</span> ( <span class="ident">context</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_context</span> , <span class="ident">private_key</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">ec_private_key</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">curve_generate_public_key</span> ( <span class="ident">public_key</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">ec_public_key</span> , <span class="ident">private_key</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">ec_private_key</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; Generates a Curve25519 keypair.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param key_pair Set to a randomly generated Curve25519 keypair on success.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @return 0 on success, negative on failure&quot;</span> ] <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">curve_generate_key_pair</span> ( <span class="ident">context</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_context</span> , <span class="ident">key_pair</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">ec_key_pair</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; Allocate a new ec_public_key list&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @return pointer to the allocated list, or 0 on failure&quot;</span> ] <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">ec_public_key_list_alloc</span> ( ) <span class="op">-&gt;</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">ec_public_key_list</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; Copy an ec_public_key list&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @return pointer to the copy of the list, or 0 on failure&quot;</span> ] <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">ec_public_key_list_copy</span> ( <span class="ident">list</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">ec_public_key_list</span> ) <span class="op">-&gt;</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">ec_public_key_list</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; Push a new value onto the end of the list&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param list the list&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param value the value to push&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @return 0 on success, negative on failure&quot;</span> ] <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">ec_public_key_list_push_back</span> ( <span class="ident">list</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">ec_public_key_list</span> , <span class="ident">value</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">ec_public_key</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; Gets the size of the list.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param list the list&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @return the size of the list&quot;</span> ] <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">ec_public_key_list_size</span> ( <span class="ident">list</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">ec_public_key_list</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_uint</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; Gets the value of the element at a particular index in the list&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param list the list&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param index the index within the list&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @return the value&quot;</span> ] <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">ec_public_key_list_at</span> ( <span class="ident">list</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">ec_public_key_list</span> , <span class="ident">index</span> : :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_uint</span> ) <span class="op">-&gt;</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">ec_public_key</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; Sorts the list based on a comparison of the key data.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param list the list&quot;</span> ] <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">ec_public_key_list_sort</span> ( <span class="ident">list</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">ec_public_key_list</span> ) ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; Free the ec_public_key list&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param list the list to free&quot;</span> ] <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">ec_public_key_list_free</span> ( <span class="ident">list</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">ec_public_key_list</span> ) ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; Calculates an ECDH agreement.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param shared_key_data Set to a 32-byte shared secret on success.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param public_key The Curve25519 (typically remote party&#39;s) public key.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param private_key The Curve25519 (typically yours) private key.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @return length of the shared secret on success, negative on failure&quot;</span> ] <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">curve_calculate_agreement</span> ( <span class="ident">shared_key_data</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">u8</span> , <span class="ident">public_key</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">ec_public_key</span> , <span class="ident">private_key</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">ec_private_key</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; Verify a Curve25519 signature.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param signing_key The Curve25519 public key the signature belongs to.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param message_data The message that was signed.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param message_len The length of the message that was signed.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param signature_data The signature to verify.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param signature_len The length of the signature to verify.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @return 1 if valid, 0 if invalid, negative on failure&quot;</span> ] <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">curve_verify_signature</span> ( <span class="ident">signing_key</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">ec_public_key</span> , <span class="ident">message_data</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">u8</span> , <span class="ident">message_len</span> : <span class="ident">usize</span> , <span class="ident">signature_data</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">u8</span> , <span class="ident">signature_len</span> : <span class="ident">usize</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; Calculates a Curve25519 signature.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param signature Set to a 64-byte signature on success.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param signing_key The private Curve25519 key to create the signature with.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param message_data The message to sign.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param message_len The length of the message to sign.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @return 0 on success, negative on failure&quot;</span> ] <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">curve_calculate_signature</span> ( <span class="ident">context</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_context</span> , <span class="ident">signature</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_buffer</span> , <span class="ident">signing_key</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">ec_private_key</span> , <span class="ident">message_data</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">u8</span> , <span class="ident">message_len</span> : <span class="ident">usize</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; Verify a Unique Curve25519 signature.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param vrf_output Set to VRF output on success&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param signing_key The Curve25519 public key the unique signature belongs to.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param message_data The message that was signed.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param message_len The length of the message that was signed.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param signature_data The signature to verify.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param signature_len The length of the signature to verify.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @return 1 if valid, 0 if invalid, negative on failure&quot;</span> ] <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">curve_verify_vrf_signature</span> ( <span class="ident">context</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_context</span> , <span class="ident">vrf_output</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_buffer</span> , <span class="ident">signing_key</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">ec_public_key</span> , <span class="ident">message_data</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">u8</span> , <span class="ident">message_len</span> : <span class="ident">usize</span> , <span class="ident">signature_data</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">u8</span> , <span class="ident">signature_len</span> : <span class="ident">usize</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; Calculates a Unique Curve25519 signature.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param signature Set to a 96-byte signature on success.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param signing_key The private Curve25519 key to create the signature with.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param message_data The message to sign.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param message_len The length of the message to sign.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @return 0 on success, negative on failure&quot;</span> ] <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">curve_calculate_vrf_signature</span> ( <span class="ident">context</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_context</span> , <span class="ident">signature</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_buffer</span> , <span class="ident">signing_key</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">ec_private_key</span> , <span class="ident">message_data</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">u8</span> , <span class="ident">message_len</span> : <span class="ident">usize</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">session_record_create</span> ( <span class="ident">record</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">session_record</span> , <span class="ident">state</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">session_state</span> , <span class="ident">global_context</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_context</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">session_record_serialize</span> ( <span class="ident">buffer</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_buffer</span> , <span class="ident">record</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">session_record</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">session_record_deserialize</span> ( <span class="ident">record</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">session_record</span> , <span class="ident">data</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">u8</span> , <span class="ident">len</span> : <span class="ident">usize</span> , <span class="ident">global_context</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_context</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">session_record_copy</span> ( <span class="ident">record</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">session_record</span> , <span class="ident">other_record</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">session_record</span> , <span class="ident">global_context</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_context</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">session_record_has_session_state</span> ( <span class="ident">record</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">session_record</span> , <span class="ident">version</span> : <span class="ident">u32</span> , <span class="ident">alice_base_key</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">ec_public_key</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">session_record_get_state</span> ( <span class="ident">record</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">session_record</span> ) <span class="op">-&gt;</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">session_state</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">session_record_set_state</span> ( <span class="ident">record</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">session_record</span> , <span class="ident">state</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">session_state</span> ) ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">session_record_get_previous_states_head</span> ( <span class="ident">record</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">session_record</span> ) <span class="op">-&gt;</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">session_record_state_node</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">session_record_get_previous_states_element</span> ( <span class="ident">node</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">session_record_state_node</span> ) <span class="op">-&gt;</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">session_state</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">session_record_get_previous_states_next</span> ( <span class="ident">node</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">session_record_state_node</span> ) <span class="op">-&gt;</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">session_record_state_node</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; Removes the specified node in the previous states list.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param node the node to remove&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @return the node immediately following the removed node, or null if at the end of the list&quot;</span> ] <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">session_record_get_previous_states_remove</span> ( <span class="ident">record</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">session_record</span> , <span class="ident">node</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">session_record_state_node</span> ) <span class="op">-&gt;</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">session_record_state_node</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">session_record_is_fresh</span> ( <span class="ident">record</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">session_record</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; Move the current session_state into the list of \&quot;previous\&quot; session states,&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; and replace the current session_state with a fresh reset instance.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @return 0 on success, negative on failure&quot;</span> ] <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">session_record_archive_current_state</span> ( <span class="ident">record</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">session_record</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">session_record_promote_state</span> ( <span class="ident">record</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">session_record</span> , <span class="ident">promoted_state</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">session_state</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">session_record_get_user_record</span> ( <span class="ident">record</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">session_record</span> ) <span class="op">-&gt;</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_buffer</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">session_record_set_user_record</span> ( <span class="ident">record</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">session_record</span> , <span class="ident">user_record</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_buffer</span> ) ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">session_record_destroy</span> ( <span class="ident">type_</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_type_base</span> ) ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">session_pre_key_create</span> ( <span class="ident">pre_key</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">session_pre_key</span> , <span class="ident">id</span> : <span class="ident">u32</span> , <span class="ident">key_pair</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">ec_key_pair</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">session_pre_key_serialize</span> ( <span class="ident">buffer</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_buffer</span> , <span class="ident">pre_key</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">session_pre_key</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">session_pre_key_deserialize</span> ( <span class="ident">pre_key</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">session_pre_key</span> , <span class="ident">data</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">u8</span> , <span class="ident">len</span> : <span class="ident">usize</span> , <span class="ident">global_context</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_context</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">session_pre_key_get_id</span> ( <span class="ident">pre_key</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">session_pre_key</span> ) <span class="op">-&gt;</span> <span class="ident">u32</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">session_pre_key_get_key_pair</span> ( <span class="ident">pre_key</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">session_pre_key</span> ) <span class="op">-&gt;</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">ec_key_pair</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">session_pre_key_destroy</span> ( <span class="ident">type_</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_type_base</span> ) ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">session_signed_pre_key_create</span> ( <span class="ident">pre_key</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">session_signed_pre_key</span> , <span class="ident">id</span> : <span class="ident">u32</span> , <span class="ident">timestamp</span> : <span class="ident">u64</span> , <span class="ident">key_pair</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">ec_key_pair</span> , <span class="ident">signature</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">u8</span> , <span class="ident">signature_len</span> : <span class="ident">usize</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">session_signed_pre_key_serialize</span> ( <span class="ident">buffer</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_buffer</span> , <span class="ident">pre_key</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">session_signed_pre_key</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">session_signed_pre_key_deserialize</span> ( <span class="ident">pre_key</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">session_signed_pre_key</span> , <span class="ident">data</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">u8</span> , <span class="ident">len</span> : <span class="ident">usize</span> , <span class="ident">global_context</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_context</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">session_signed_pre_key_get_id</span> ( <span class="ident">pre_key</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">session_signed_pre_key</span> ) <span class="op">-&gt;</span> <span class="ident">u32</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">session_signed_pre_key_get_timestamp</span> ( <span class="ident">pre_key</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">session_signed_pre_key</span> ) <span class="op">-&gt;</span> <span class="ident">u64</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">session_signed_pre_key_get_key_pair</span> ( <span class="ident">pre_key</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">session_signed_pre_key</span> ) <span class="op">-&gt;</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">ec_key_pair</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">session_signed_pre_key_get_signature</span> ( <span class="ident">pre_key</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">session_signed_pre_key</span> ) <span class="op">-&gt;</span> <span class="op">*</span> <span class="kw">const</span> <span class="ident">u8</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">session_signed_pre_key_get_signature_len</span> ( <span class="ident">pre_key</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">session_signed_pre_key</span> ) <span class="op">-&gt;</span> <span class="ident">usize</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">session_signed_pre_key_destroy</span> ( <span class="ident">type_</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_type_base</span> ) ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">session_pre_key_bundle_create</span> ( <span class="ident">bundle</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">session_pre_key_bundle</span> , <span class="ident">registration_id</span> : <span class="ident">u32</span> , <span class="ident">device_id</span> : :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> , <span class="ident">pre_key_id</span> : <span class="ident">u32</span> , <span class="ident">pre_key_public</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">ec_public_key</span> , <span class="ident">signed_pre_key_id</span> : <span class="ident">u32</span> , <span class="ident">signed_pre_key_public</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">ec_public_key</span> , <span class="ident">signed_pre_key_signature_data</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">u8</span> , <span class="ident">signed_pre_key_signature_len</span> : <span class="ident">usize</span> , <span class="ident">identity_key</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">ec_public_key</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">session_pre_key_bundle_get_registration_id</span> ( <span class="ident">bundle</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">session_pre_key_bundle</span> ) <span class="op">-&gt;</span> <span class="ident">u32</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">session_pre_key_bundle_get_device_id</span> ( <span class="ident">bundle</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">session_pre_key_bundle</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">session_pre_key_bundle_get_pre_key_id</span> ( <span class="ident">bundle</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">session_pre_key_bundle</span> ) <span class="op">-&gt;</span> <span class="ident">u32</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">session_pre_key_bundle_get_pre_key</span> ( <span class="ident">bundle</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">session_pre_key_bundle</span> ) <span class="op">-&gt;</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">ec_public_key</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">session_pre_key_bundle_get_signed_pre_key_id</span> ( <span class="ident">bundle</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">session_pre_key_bundle</span> ) <span class="op">-&gt;</span> <span class="ident">u32</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">session_pre_key_bundle_get_signed_pre_key</span> ( <span class="ident">bundle</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">session_pre_key_bundle</span> ) <span class="op">-&gt;</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">ec_public_key</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">session_pre_key_bundle_get_signed_pre_key_signature</span> ( <span class="ident">bundle</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">session_pre_key_bundle</span> ) <span class="op">-&gt;</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_buffer</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">session_pre_key_bundle_get_identity_key</span> ( <span class="ident">bundle</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">session_pre_key_bundle</span> ) <span class="op">-&gt;</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">ec_public_key</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">session_pre_key_bundle_destroy</span> ( <span class="ident">type_</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_type_base</span> ) ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">sender_key_record_create</span> ( <span class="ident">record</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">sender_key_record</span> , <span class="ident">global_context</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_context</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">sender_key_record_serialize</span> ( <span class="ident">buffer</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_buffer</span> , <span class="ident">record</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">sender_key_record</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">sender_key_record_deserialize</span> ( <span class="ident">record</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">sender_key_record</span> , <span class="ident">data</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">u8</span> , <span class="ident">len</span> : <span class="ident">usize</span> , <span class="ident">global_context</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_context</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">sender_key_record_copy</span> ( <span class="ident">record</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">sender_key_record</span> , <span class="ident">other_state</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">sender_key_record</span> , <span class="ident">global_context</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_context</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">sender_key_record_is_empty</span> ( <span class="ident">record</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">sender_key_record</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">sender_key_record_get_sender_key_state</span> ( <span class="ident">record</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">sender_key_record</span> , <span class="ident">state</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">sender_key_state</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">sender_key_record_get_sender_key_state_by_id</span> ( <span class="ident">record</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">sender_key_record</span> , <span class="ident">state</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">sender_key_state</span> , <span class="ident">key_id</span> : <span class="ident">u32</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">sender_key_record_add_sender_key_state</span> ( <span class="ident">record</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">sender_key_record</span> , <span class="ident">id</span> : <span class="ident">u32</span> , <span class="ident">iteration</span> : <span class="ident">u32</span> , <span class="ident">chain_key</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_buffer</span> , <span class="ident">signature_key</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">ec_public_key</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">sender_key_record_set_sender_key_state</span> ( <span class="ident">record</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">sender_key_record</span> , <span class="ident">id</span> : <span class="ident">u32</span> , <span class="ident">iteration</span> : <span class="ident">u32</span> , <span class="ident">chain_key</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_buffer</span> , <span class="ident">signature_key_pair</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">ec_key_pair</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">sender_key_record_get_user_record</span> ( <span class="ident">record</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">sender_key_record</span> ) <span class="op">-&gt;</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_buffer</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">sender_key_record_set_user_record</span> ( <span class="ident">record</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">sender_key_record</span> , <span class="ident">user_record</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_buffer</span> ) ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">sender_key_record_destroy</span> ( <span class="ident">type_</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_type_base</span> ) ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">signal_type_ref</span> ( <span class="ident">instance</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_type_base</span> ) ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">signal_type_unref</span> ( <span class="ident">instance</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_type_base</span> ) ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; Allocate a new buffer to store data of the provided length.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param len length of the buffer to allocate&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @return pointer to the allocated buffer, or 0 on failure&quot;</span> ] <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">signal_buffer_alloc</span> ( <span class="ident">len</span> : <span class="ident">usize</span> ) <span class="op">-&gt;</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_buffer</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; Create a new buffer and copy the provided data into it.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param data pointer to the start of the data&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param len length of the data&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @return pointer to the allocated buffer, or 0 on failure&quot;</span> ] <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">signal_buffer_create</span> ( <span class="ident">data</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">u8</span> , <span class="ident">len</span> : <span class="ident">usize</span> ) <span class="op">-&gt;</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_buffer</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; Create a copy of an existing buffer.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param buffer the existing buffer to copy&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @return pointer to the updated buffer, or 0 on failure&quot;</span> ] <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">signal_buffer_copy</span> ( <span class="ident">buffer</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">signal_buffer</span> ) <span class="op">-&gt;</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_buffer</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; Create a copy of an existing buffer.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param buffer the existing buffer to copy&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param n the maximum number of bytes to copy&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @return pointer to the updated buffer, or 0 on failure&quot;</span> ] <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">signal_buffer_n_copy</span> ( <span class="ident">buffer</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">signal_buffer</span> , <span class="ident">n</span> : <span class="ident">usize</span> ) <span class="op">-&gt;</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_buffer</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; Append the provided data to an existing buffer.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; Note: The underlying buffer is only expanded by an amount sufficient&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; to hold the data being appended. There is no additional reserved space&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; to reduce the need for memory allocations.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param buffer the existing buffer to append to&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param data pointer to the start of the data&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param len length of the data&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @return pointer to the updated buffer, or 0 on failure&quot;</span> ] <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">signal_buffer_append</span> ( <span class="ident">buffer</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_buffer</span> , <span class="ident">data</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">u8</span> , <span class="ident">len</span> : <span class="ident">usize</span> ) <span class="op">-&gt;</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_buffer</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; Gets the data pointer for the buffer.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; This can be used to read and write data stored in the buffer.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param buffer pointer to the buffer instance&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @return data pointer&quot;</span> ] <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">signal_buffer_data</span> ( <span class="ident">buffer</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_buffer</span> ) <span class="op">-&gt;</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">u8</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; Gets the data pointer for the buffer.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; This can be used to read and write data stored in the buffer.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param buffer pointer to the buffer instance&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @return data pointer&quot;</span> ] <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">signal_buffer_const_data</span> ( <span class="ident">buffer</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">signal_buffer</span> ) <span class="op">-&gt;</span> <span class="op">*</span> <span class="kw">const</span> <span class="ident">u8</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; Gets the length of the data stored within the buffer.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param buffer pointer to the buffer instance&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @return data length&quot;</span> ] <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">signal_buffer_len</span> ( <span class="ident">buffer</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">signal_buffer</span> ) <span class="op">-&gt;</span> <span class="ident">usize</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; Compare two buffers.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param buffer1 first buffer to compare&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param buffer2 second buffer to compare&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @return 0 if the two buffers are equal, negative or positive otherwise&quot;</span> ] <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">signal_buffer_compare</span> ( <span class="ident">buffer1</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_buffer</span> , <span class="ident">buffer2</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_buffer</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; Free the data buffer.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param buffer pointer to the buffer instance to free&quot;</span> ] <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">signal_buffer_free</span> ( <span class="ident">buffer</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_buffer</span> ) ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; Zero and free the data buffer.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; This function should be used when the buffer contains sensitive&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; data, to make sure the memory is cleared before being freed.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param buffer pointer to the buffer instance to free&quot;</span> ] <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">signal_buffer_bzero_free</span> ( <span class="ident">buffer</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_buffer</span> ) ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; Allocate a new buffer list.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @return pointer to the allocated buffer, or 0 on failure&quot;</span> ] <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">signal_buffer_list_alloc</span> ( ) <span class="op">-&gt;</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_buffer_list</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; Create a copy of an existing buffer list.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param list the existing buffer list to copy&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @return pointer to the updated buffer, or 0 on failure&quot;</span> ] <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">signal_buffer_list_copy</span> ( <span class="ident">list</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">signal_buffer_list</span> ) <span class="op">-&gt;</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_buffer_list</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; Push the provided buffer onto the end of the list.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; The list will take ownership of the buffer, and free it when the list is&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; freed.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param list the buffer list&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param buffer the buffer to push&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @return 0 on success, or negative on failure&quot;</span> ] <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">signal_buffer_list_push_back</span> ( <span class="ident">list</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_buffer_list</span> , <span class="ident">buffer</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_buffer</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; Gets the size of the buffer list.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param list the buffer list&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @return the size of the list&quot;</span> ] <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">signal_buffer_list_size</span> ( <span class="ident">list</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_buffer_list</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_uint</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; Gets the value of the element at a particular index in the list&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param list the list&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param index the index within the list&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @return the value&quot;</span> ] <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">signal_buffer_list_at</span> ( <span class="ident">list</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_buffer_list</span> , <span class="ident">index</span> : :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_uint</span> ) <span class="op">-&gt;</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_buffer</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; Free the buffer list, including all the buffers added to it.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param list the buffer list&quot;</span> ] <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">signal_buffer_list_free</span> ( <span class="ident">list</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_buffer_list</span> ) ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; Free the buffer list, including all the buffers added to it.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; This function should be used when the buffer list contains sensitive&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; data, to make sure the memory is cleared before being freed.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param list the buffer list&quot;</span> ] <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">signal_buffer_list_bzero_free</span> ( <span class="ident">list</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_buffer_list</span> ) ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; Allocate a new int list&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @return pointer to the allocated buffer, or 0 on failure&quot;</span> ] <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">signal_int_list_alloc</span> ( ) <span class="op">-&gt;</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_int_list</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; Push a new value onto the end of the list&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param list the list&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param value the value to push&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @return 0 on success, or negative on failure&quot;</span> ] <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">signal_int_list_push_back</span> ( <span class="ident">list</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_int_list</span> , <span class="ident">value</span> : :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; Gets the size of the list.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param list the list&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @return the size of the list&quot;</span> ] <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">signal_int_list_size</span> ( <span class="ident">list</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_int_list</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_uint</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; Gets the value of the element at a particular index in the list&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param list the list&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param index the index within the list&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @return the value&quot;</span> ] <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">signal_int_list_at</span> ( <span class="ident">list</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_int_list</span> , <span class="ident">index</span> : :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_uint</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; Free the int list&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param list the list to free&quot;</span> ] <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">signal_int_list_free</span> ( <span class="ident">list</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_int_list</span> ) ; } # [ <span class="ident">repr</span> ( <span class="ident">C</span> ) ] # [ <span class="ident">derive</span> ( <span class="ident">Debug</span> , <span class="ident">Copy</span> , <span class="ident">Clone</span> ) ] <span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">signal_crypto_provider</span> { # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; Callback for a secure random number generator.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; This function shall fill the provided buffer with random bytes.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param data pointer to the output buffer&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param len size of the output buffer&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @return 0 on success, negative on failure&quot;</span> ] <span class="kw">pub</span> <span class="ident">random_func</span> : :: <span class="ident">std</span> :: <span class="ident">option</span> :: <span class="prelude-ty">Option</span> <span class="op">&lt;</span> <span class="kw">unsafe</span> <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> <span class="kw">fn</span> ( <span class="ident">data</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">u8</span> , <span class="ident">len</span> : <span class="ident">usize</span> , <span class="ident">user_data</span> : <span class="op">*</span> <span class="kw-2">mut</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_void</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> <span class="op">&gt;</span> , # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; Callback for an HMAC-SHA256 implementation.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; This function shall initialize an HMAC context with the provided key.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param hmac_context private HMAC context pointer&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param key pointer to the key&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param key_len length of the key&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @return 0 on success, negative on failure&quot;</span> ] <span class="kw">pub</span> <span class="ident">hmac_sha256_init_func</span> : :: <span class="ident">std</span> :: <span class="ident">option</span> :: <span class="prelude-ty">Option</span> <span class="op">&lt;</span> <span class="kw">unsafe</span> <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> <span class="kw">fn</span> ( <span class="ident">hmac_context</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="op">*</span> <span class="kw-2">mut</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_void</span> , <span class="ident">key</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">u8</span> , <span class="ident">key_len</span> : <span class="ident">usize</span> , <span class="ident">user_data</span> : <span class="op">*</span> <span class="kw-2">mut</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_void</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> <span class="op">&gt;</span> , # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; Callback for an HMAC-SHA256 implementation.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; This function shall update the HMAC context with the provided data&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param hmac_context private HMAC context pointer&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param data pointer to the data&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param data_len length of the data&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @return 0 on success, negative on failure&quot;</span> ] <span class="kw">pub</span> <span class="ident">hmac_sha256_update_func</span> : :: <span class="ident">std</span> :: <span class="ident">option</span> :: <span class="prelude-ty">Option</span> <span class="op">&lt;</span> <span class="kw">unsafe</span> <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> <span class="kw">fn</span> ( <span class="ident">hmac_context</span> : <span class="op">*</span> <span class="kw-2">mut</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_void</span> , <span class="ident">data</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">u8</span> , <span class="ident">data_len</span> : <span class="ident">usize</span> , <span class="ident">user_data</span> : <span class="op">*</span> <span class="kw-2">mut</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_void</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> <span class="op">&gt;</span> , # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; Callback for an HMAC-SHA256 implementation.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; This function shall finalize an HMAC calculation and populate the output&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; buffer with the result.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param hmac_context private HMAC context pointer&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param output buffer to be allocated and populated with the result&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @return 0 on success, negative on failure&quot;</span> ] <span class="kw">pub</span> <span class="ident">hmac_sha256_final_func</span> : :: <span class="ident">std</span> :: <span class="ident">option</span> :: <span class="prelude-ty">Option</span> <span class="op">&lt;</span> <span class="kw">unsafe</span> <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> <span class="kw">fn</span> ( <span class="ident">hmac_context</span> : <span class="op">*</span> <span class="kw-2">mut</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_void</span> , <span class="ident">output</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_buffer</span> , <span class="ident">user_data</span> : <span class="op">*</span> <span class="kw-2">mut</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_void</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> <span class="op">&gt;</span> , # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; Callback for an HMAC-SHA256 implementation.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; This function shall free the private context allocated in&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; hmac_sha256_init_func.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param hmac_context private HMAC context pointer&quot;</span> ] <span class="kw">pub</span> <span class="ident">hmac_sha256_cleanup_func</span> : :: <span class="ident">std</span> :: <span class="ident">option</span> :: <span class="prelude-ty">Option</span> <span class="op">&lt;</span> <span class="kw">unsafe</span> <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> <span class="kw">fn</span> ( <span class="ident">hmac_context</span> : <span class="op">*</span> <span class="kw-2">mut</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_void</span> , <span class="ident">user_data</span> : <span class="op">*</span> <span class="kw-2">mut</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_void</span> ) <span class="op">&gt;</span> , # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; Callback for a SHA512 message digest implementation.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; This function shall initialize a digest context.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param digest_context private digest context pointer&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @return 0 on success, negative on failure&quot;</span> ] <span class="kw">pub</span> <span class="ident">sha512_digest_init_func</span> : :: <span class="ident">std</span> :: <span class="ident">option</span> :: <span class="prelude-ty">Option</span> <span class="op">&lt;</span> <span class="kw">unsafe</span> <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> <span class="kw">fn</span> ( <span class="ident">digest_context</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="op">*</span> <span class="kw-2">mut</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_void</span> , <span class="ident">user_data</span> : <span class="op">*</span> <span class="kw-2">mut</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_void</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> <span class="op">&gt;</span> , # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; Callback for a SHA512 message digest implementation.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; This function shall update the digest context with the provided data.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param digest_context private digest context pointer&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param data pointer to the data&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param data_len length of the data&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @return 0 on success, negative on failure&quot;</span> ] <span class="kw">pub</span> <span class="ident">sha512_digest_update_func</span> : :: <span class="ident">std</span> :: <span class="ident">option</span> :: <span class="prelude-ty">Option</span> <span class="op">&lt;</span> <span class="kw">unsafe</span> <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> <span class="kw">fn</span> ( <span class="ident">digest_context</span> : <span class="op">*</span> <span class="kw-2">mut</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_void</span> , <span class="ident">data</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">u8</span> , <span class="ident">data_len</span> : <span class="ident">usize</span> , <span class="ident">user_data</span> : <span class="op">*</span> <span class="kw-2">mut</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_void</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> <span class="op">&gt;</span> , # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; Callback for a SHA512 message digest implementation.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; This function shall finalize the digest calculation, populate the&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; output buffer with the result, and prepare the context for reuse.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param digest_context private digest context pointer&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param output buffer to be allocated and populated with the result&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @return 0 on success, negative on failure&quot;</span> ] <span class="kw">pub</span> <span class="ident">sha512_digest_final_func</span> : :: <span class="ident">std</span> :: <span class="ident">option</span> :: <span class="prelude-ty">Option</span> <span class="op">&lt;</span> <span class="kw">unsafe</span> <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> <span class="kw">fn</span> ( <span class="ident">digest_context</span> : <span class="op">*</span> <span class="kw-2">mut</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_void</span> , <span class="ident">output</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_buffer</span> , <span class="ident">user_data</span> : <span class="op">*</span> <span class="kw-2">mut</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_void</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> <span class="op">&gt;</span> , # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; Callback for a SHA512 message digest implementation.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; This function shall free the private context allocated in&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; sha512_digest_init_func.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param digest_context private digest context pointer&quot;</span> ] <span class="kw">pub</span> <span class="ident">sha512_digest_cleanup_func</span> : :: <span class="ident">std</span> :: <span class="ident">option</span> :: <span class="prelude-ty">Option</span> <span class="op">&lt;</span> <span class="kw">unsafe</span> <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> <span class="kw">fn</span> ( <span class="ident">digest_context</span> : <span class="op">*</span> <span class="kw-2">mut</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_void</span> , <span class="ident">user_data</span> : <span class="op">*</span> <span class="kw-2">mut</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_void</span> ) <span class="op">&gt;</span> , # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; Callback for an AES encryption implementation.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param output buffer to be allocated and populated with the ciphertext&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param cipher specific cipher variant to use, either SG_CIPHER_AES_CTR_NOPADDING or SG_CIPHER_AES_CBC_PKCS5&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param key the encryption key&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param key_len length of the encryption key&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param iv the initialization vector&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param iv_len length of the initialization vector&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param plaintext the plaintext to encrypt&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param plaintext_len length of the plaintext&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @return 0 on success, negative on failure&quot;</span> ] <span class="kw">pub</span> <span class="ident">encrypt_func</span> : :: <span class="ident">std</span> :: <span class="ident">option</span> :: <span class="prelude-ty">Option</span> <span class="op">&lt;</span> <span class="kw">unsafe</span> <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> <span class="kw">fn</span> ( <span class="ident">output</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_buffer</span> , <span class="ident">cipher</span> : :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> , <span class="ident">key</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">u8</span> , <span class="ident">key_len</span> : <span class="ident">usize</span> , <span class="ident">iv</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">u8</span> , <span class="ident">iv_len</span> : <span class="ident">usize</span> , <span class="ident">plaintext</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">u8</span> , <span class="ident">plaintext_len</span> : <span class="ident">usize</span> , <span class="ident">user_data</span> : <span class="op">*</span> <span class="kw-2">mut</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_void</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> <span class="op">&gt;</span> , # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; Callback for an AES decryption implementation.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param output buffer to be allocated and populated with the plaintext&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param cipher specific cipher variant to use, either SG_CIPHER_AES_CTR_NOPADDING or SG_CIPHER_AES_CBC_PKCS5&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param key the encryption key&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param key_len length of the encryption key&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param iv the initialization vector&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param iv_len length of the initialization vector&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param ciphertext the ciphertext to decrypt&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param ciphertext_len length of the ciphertext&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @return 0 on success, negative on failure&quot;</span> ] <span class="kw">pub</span> <span class="ident">decrypt_func</span> : :: <span class="ident">std</span> :: <span class="ident">option</span> :: <span class="prelude-ty">Option</span> <span class="op">&lt;</span> <span class="kw">unsafe</span> <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> <span class="kw">fn</span> ( <span class="ident">output</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_buffer</span> , <span class="ident">cipher</span> : :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> , <span class="ident">key</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">u8</span> , <span class="ident">key_len</span> : <span class="ident">usize</span> , <span class="ident">iv</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">u8</span> , <span class="ident">iv_len</span> : <span class="ident">usize</span> , <span class="ident">ciphertext</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">u8</span> , <span class="ident">ciphertext_len</span> : <span class="ident">usize</span> , <span class="ident">user_data</span> : <span class="op">*</span> <span class="kw-2">mut</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_void</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> <span class="op">&gt;</span> , # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; User data pointer&quot;</span> ] <span class="kw">pub</span> <span class="ident">user_data</span> : <span class="op">*</span> <span class="kw-2">mut</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_void</span> , } # [ <span class="ident">test</span> ] <span class="kw">fn</span> <span class="ident">bindgen_test_layout_signal_crypto_provider</span> ( ) { <span class="ident">assert_eq</span> <span class="op">!</span> ( :: <span class="ident">std</span> :: <span class="ident">mem</span> :: <span class="ident">size_of</span> :: <span class="op">&lt;</span> <span class="ident">signal_crypto_provider</span> <span class="op">&gt;</span> ( ) , <span class="number">96usize</span> , <span class="ident">concat</span> <span class="op">!</span> ( <span class="string">&quot;Size of: &quot;</span> , <span class="ident">stringify</span> <span class="op">!</span> ( <span class="ident">signal_crypto_provider</span> ) ) ) ; <span class="ident">assert_eq</span> <span class="op">!</span> ( :: <span class="ident">std</span> :: <span class="ident">mem</span> :: <span class="ident">align_of</span> :: <span class="op">&lt;</span> <span class="ident">signal_crypto_provider</span> <span class="op">&gt;</span> ( ) , <span class="number">8usize</span> , <span class="ident">concat</span> <span class="op">!</span> ( <span class="string">&quot;Alignment of &quot;</span> , <span class="ident">stringify</span> <span class="op">!</span> ( <span class="ident">signal_crypto_provider</span> ) ) ) ; <span class="ident">assert_eq</span> <span class="op">!</span> ( <span class="kw">unsafe</span> { <span class="op">&amp;</span> ( <span class="op">*</span> ( :: <span class="ident">std</span> :: <span class="ident">ptr</span> :: <span class="ident">null</span> :: <span class="op">&lt;</span> <span class="ident">signal_crypto_provider</span> <span class="op">&gt;</span> ( ) ) ) . <span class="ident">random_func</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="kw">_</span> <span class="kw">as</span> <span class="ident">usize</span> } , <span class="number">0usize</span> , <span class="ident">concat</span> <span class="op">!</span> ( <span class="string">&quot;Offset of field: &quot;</span> , <span class="ident">stringify</span> <span class="op">!</span> ( <span class="ident">signal_crypto_provider</span> ) , <span class="string">&quot;::&quot;</span> , <span class="ident">stringify</span> <span class="op">!</span> ( <span class="ident">random_func</span> ) ) ) ; <span class="ident">assert_eq</span> <span class="op">!</span> ( <span class="kw">unsafe</span> { <span class="op">&amp;</span> ( <span class="op">*</span> ( :: <span class="ident">std</span> :: <span class="ident">ptr</span> :: <span class="ident">null</span> :: <span class="op">&lt;</span> <span class="ident">signal_crypto_provider</span> <span class="op">&gt;</span> ( ) ) ) . <span class="ident">hmac_sha256_init_func</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="kw">_</span> <span class="kw">as</span> <span class="ident">usize</span> } , <span class="number">8usize</span> , <span class="ident">concat</span> <span class="op">!</span> ( <span class="string">&quot;Offset of field: &quot;</span> , <span class="ident">stringify</span> <span class="op">!</span> ( <span class="ident">signal_crypto_provider</span> ) , <span class="string">&quot;::&quot;</span> , <span class="ident">stringify</span> <span class="op">!</span> ( <span class="ident">hmac_sha256_init_func</span> ) ) ) ; <span class="ident">assert_eq</span> <span class="op">!</span> ( <span class="kw">unsafe</span> { <span class="op">&amp;</span> ( <span class="op">*</span> ( :: <span class="ident">std</span> :: <span class="ident">ptr</span> :: <span class="ident">null</span> :: <span class="op">&lt;</span> <span class="ident">signal_crypto_provider</span> <span class="op">&gt;</span> ( ) ) ) . <span class="ident">hmac_sha256_update_func</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="kw">_</span> <span class="kw">as</span> <span class="ident">usize</span> } , <span class="number">16usize</span> , <span class="ident">concat</span> <span class="op">!</span> ( <span class="string">&quot;Offset of field: &quot;</span> , <span class="ident">stringify</span> <span class="op">!</span> ( <span class="ident">signal_crypto_provider</span> ) , <span class="string">&quot;::&quot;</span> , <span class="ident">stringify</span> <span class="op">!</span> ( <span class="ident">hmac_sha256_update_func</span> ) ) ) ; <span class="ident">assert_eq</span> <span class="op">!</span> ( <span class="kw">unsafe</span> { <span class="op">&amp;</span> ( <span class="op">*</span> ( :: <span class="ident">std</span> :: <span class="ident">ptr</span> :: <span class="ident">null</span> :: <span class="op">&lt;</span> <span class="ident">signal_crypto_provider</span> <span class="op">&gt;</span> ( ) ) ) . <span class="ident">hmac_sha256_final_func</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="kw">_</span> <span class="kw">as</span> <span class="ident">usize</span> } , <span class="number">24usize</span> , <span class="ident">concat</span> <span class="op">!</span> ( <span class="string">&quot;Offset of field: &quot;</span> , <span class="ident">stringify</span> <span class="op">!</span> ( <span class="ident">signal_crypto_provider</span> ) , <span class="string">&quot;::&quot;</span> , <span class="ident">stringify</span> <span class="op">!</span> ( <span class="ident">hmac_sha256_final_func</span> ) ) ) ; <span class="ident">assert_eq</span> <span class="op">!</span> ( <span class="kw">unsafe</span> { <span class="op">&amp;</span> ( <span class="op">*</span> ( :: <span class="ident">std</span> :: <span class="ident">ptr</span> :: <span class="ident">null</span> :: <span class="op">&lt;</span> <span class="ident">signal_crypto_provider</span> <span class="op">&gt;</span> ( ) ) ) . <span class="ident">hmac_sha256_cleanup_func</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="kw">_</span> <span class="kw">as</span> <span class="ident">usize</span> } , <span class="number">32usize</span> , <span class="ident">concat</span> <span class="op">!</span> ( <span class="string">&quot;Offset of field: &quot;</span> , <span class="ident">stringify</span> <span class="op">!</span> ( <span class="ident">signal_crypto_provider</span> ) , <span class="string">&quot;::&quot;</span> , <span class="ident">stringify</span> <span class="op">!</span> ( <span class="ident">hmac_sha256_cleanup_func</span> ) ) ) ; <span class="ident">assert_eq</span> <span class="op">!</span> ( <span class="kw">unsafe</span> { <span class="op">&amp;</span> ( <span class="op">*</span> ( :: <span class="ident">std</span> :: <span class="ident">ptr</span> :: <span class="ident">null</span> :: <span class="op">&lt;</span> <span class="ident">signal_crypto_provider</span> <span class="op">&gt;</span> ( ) ) ) . <span class="ident">sha512_digest_init_func</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="kw">_</span> <span class="kw">as</span> <span class="ident">usize</span> } , <span class="number">40usize</span> , <span class="ident">concat</span> <span class="op">!</span> ( <span class="string">&quot;Offset of field: &quot;</span> , <span class="ident">stringify</span> <span class="op">!</span> ( <span class="ident">signal_crypto_provider</span> ) , <span class="string">&quot;::&quot;</span> , <span class="ident">stringify</span> <span class="op">!</span> ( <span class="ident">sha512_digest_init_func</span> ) ) ) ; <span class="ident">assert_eq</span> <span class="op">!</span> ( <span class="kw">unsafe</span> { <span class="op">&amp;</span> ( <span class="op">*</span> ( :: <span class="ident">std</span> :: <span class="ident">ptr</span> :: <span class="ident">null</span> :: <span class="op">&lt;</span> <span class="ident">signal_crypto_provider</span> <span class="op">&gt;</span> ( ) ) ) . <span class="ident">sha512_digest_update_func</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="kw">_</span> <span class="kw">as</span> <span class="ident">usize</span> } , <span class="number">48usize</span> , <span class="ident">concat</span> <span class="op">!</span> ( <span class="string">&quot;Offset of field: &quot;</span> , <span class="ident">stringify</span> <span class="op">!</span> ( <span class="ident">signal_crypto_provider</span> ) , <span class="string">&quot;::&quot;</span> , <span class="ident">stringify</span> <span class="op">!</span> ( <span class="ident">sha512_digest_update_func</span> ) ) ) ; <span class="ident">assert_eq</span> <span class="op">!</span> ( <span class="kw">unsafe</span> { <span class="op">&amp;</span> ( <span class="op">*</span> ( :: <span class="ident">std</span> :: <span class="ident">ptr</span> :: <span class="ident">null</span> :: <span class="op">&lt;</span> <span class="ident">signal_crypto_provider</span> <span class="op">&gt;</span> ( ) ) ) . <span class="ident">sha512_digest_final_func</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="kw">_</span> <span class="kw">as</span> <span class="ident">usize</span> } , <span class="number">56usize</span> , <span class="ident">concat</span> <span class="op">!</span> ( <span class="string">&quot;Offset of field: &quot;</span> , <span class="ident">stringify</span> <span class="op">!</span> ( <span class="ident">signal_crypto_provider</span> ) , <span class="string">&quot;::&quot;</span> , <span class="ident">stringify</span> <span class="op">!</span> ( <span class="ident">sha512_digest_final_func</span> ) ) ) ; <span class="ident">assert_eq</span> <span class="op">!</span> ( <span class="kw">unsafe</span> { <span class="op">&amp;</span> ( <span class="op">*</span> ( :: <span class="ident">std</span> :: <span class="ident">ptr</span> :: <span class="ident">null</span> :: <span class="op">&lt;</span> <span class="ident">signal_crypto_provider</span> <span class="op">&gt;</span> ( ) ) ) . <span class="ident">sha512_digest_cleanup_func</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="kw">_</span> <span class="kw">as</span> <span class="ident">usize</span> } , <span class="number">64usize</span> , <span class="ident">concat</span> <span class="op">!</span> ( <span class="string">&quot;Offset of field: &quot;</span> , <span class="ident">stringify</span> <span class="op">!</span> ( <span class="ident">signal_crypto_provider</span> ) , <span class="string">&quot;::&quot;</span> , <span class="ident">stringify</span> <span class="op">!</span> ( <span class="ident">sha512_digest_cleanup_func</span> ) ) ) ; <span class="ident">assert_eq</span> <span class="op">!</span> ( <span class="kw">unsafe</span> { <span class="op">&amp;</span> ( <span class="op">*</span> ( :: <span class="ident">std</span> :: <span class="ident">ptr</span> :: <span class="ident">null</span> :: <span class="op">&lt;</span> <span class="ident">signal_crypto_provider</span> <span class="op">&gt;</span> ( ) ) ) . <span class="ident">encrypt_func</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="kw">_</span> <span class="kw">as</span> <span class="ident">usize</span> } , <span class="number">72usize</span> , <span class="ident">concat</span> <span class="op">!</span> ( <span class="string">&quot;Offset of field: &quot;</span> , <span class="ident">stringify</span> <span class="op">!</span> ( <span class="ident">signal_crypto_provider</span> ) , <span class="string">&quot;::&quot;</span> , <span class="ident">stringify</span> <span class="op">!</span> ( <span class="ident">encrypt_func</span> ) ) ) ; <span class="ident">assert_eq</span> <span class="op">!</span> ( <span class="kw">unsafe</span> { <span class="op">&amp;</span> ( <span class="op">*</span> ( :: <span class="ident">std</span> :: <span class="ident">ptr</span> :: <span class="ident">null</span> :: <span class="op">&lt;</span> <span class="ident">signal_crypto_provider</span> <span class="op">&gt;</span> ( ) ) ) . <span class="ident">decrypt_func</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="kw">_</span> <span class="kw">as</span> <span class="ident">usize</span> } , <span class="number">80usize</span> , <span class="ident">concat</span> <span class="op">!</span> ( <span class="string">&quot;Offset of field: &quot;</span> , <span class="ident">stringify</span> <span class="op">!</span> ( <span class="ident">signal_crypto_provider</span> ) , <span class="string">&quot;::&quot;</span> , <span class="ident">stringify</span> <span class="op">!</span> ( <span class="ident">decrypt_func</span> ) ) ) ; <span class="ident">assert_eq</span> <span class="op">!</span> ( <span class="kw">unsafe</span> { <span class="op">&amp;</span> ( <span class="op">*</span> ( :: <span class="ident">std</span> :: <span class="ident">ptr</span> :: <span class="ident">null</span> :: <span class="op">&lt;</span> <span class="ident">signal_crypto_provider</span> <span class="op">&gt;</span> ( ) ) ) . <span class="ident">user_data</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="kw">_</span> <span class="kw">as</span> <span class="ident">usize</span> } , <span class="number">88usize</span> , <span class="ident">concat</span> <span class="op">!</span> ( <span class="string">&quot;Offset of field: &quot;</span> , <span class="ident">stringify</span> <span class="op">!</span> ( <span class="ident">signal_crypto_provider</span> ) , <span class="string">&quot;::&quot;</span> , <span class="ident">stringify</span> <span class="op">!</span> ( <span class="ident">user_data</span> ) ) ) ; } # [ <span class="ident">repr</span> ( <span class="ident">C</span> ) ] # [ <span class="ident">derive</span> ( <span class="ident">Debug</span> , <span class="ident">Copy</span> , <span class="ident">Clone</span> ) ] <span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">signal_protocol_session_store</span> { # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; Returns a copy of the serialized session record corresponding to the&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; provided recipient ID + device ID tuple.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param record pointer to a freshly allocated buffer containing the&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;     serialized session record. Unset if no record was found.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;     The Signal Protocol library is responsible for freeing this buffer.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param user_record pointer to a freshly allocated buffer containing&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;     application specific data stored alongside the serialized session&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;     record. If no such data exists, then this pointer may be left unset.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;     The Signal Protocol library is responsible for freeing this buffer.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param address the address of the remote client&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @return 1 if the session was loaded, 0 if the session was not found, negative on failure&quot;</span> ] <span class="kw">pub</span> <span class="ident">load_session_func</span> : :: <span class="ident">std</span> :: <span class="ident">option</span> :: <span class="prelude-ty">Option</span> <span class="op">&lt;</span> <span class="kw">unsafe</span> <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> <span class="kw">fn</span> ( <span class="ident">record</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_buffer</span> , <span class="ident">user_record</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_buffer</span> , <span class="ident">address</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">signal_protocol_address</span> , <span class="ident">user_data</span> : <span class="op">*</span> <span class="kw-2">mut</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_void</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> <span class="op">&gt;</span> , # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; Returns all known devices with active sessions for a recipient&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param pointer to an array that will be allocated and populated with the result&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param name the name of the remote client&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param name_len the length of the name&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @return size of the sessions array, or negative on failure&quot;</span> ] <span class="kw">pub</span> <span class="ident">get_sub_device_sessions_func</span> : :: <span class="ident">std</span> :: <span class="ident">option</span> :: <span class="prelude-ty">Option</span> <span class="op">&lt;</span> <span class="kw">unsafe</span> <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> <span class="kw">fn</span> ( <span class="ident">sessions</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_int_list</span> , <span class="ident">name</span> : <span class="op">*</span> <span class="kw">const</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_char</span> , <span class="ident">name_len</span> : <span class="ident">usize</span> , <span class="ident">user_data</span> : <span class="op">*</span> <span class="kw-2">mut</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_void</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> <span class="op">&gt;</span> , # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; Commit to storage the session record for a given&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; recipient ID + device ID tuple.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param address the address of the remote client&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param record pointer to a buffer containing the serialized session&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;     record for the remote client&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param record_len length of the serialized session record&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param user_record pointer to a buffer containing application specific&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;     data to be stored alongside the serialized session record for the&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;     remote client. If no such data exists, then this pointer will be null.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param user_record_len length of the application specific data&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @return 0 on success, negative on failure&quot;</span> ] <span class="kw">pub</span> <span class="ident">store_session_func</span> : :: <span class="ident">std</span> :: <span class="ident">option</span> :: <span class="prelude-ty">Option</span> <span class="op">&lt;</span> <span class="kw">unsafe</span> <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> <span class="kw">fn</span> ( <span class="ident">address</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">signal_protocol_address</span> , <span class="ident">record</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">u8</span> , <span class="ident">record_len</span> : <span class="ident">usize</span> , <span class="ident">user_record</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">u8</span> , <span class="ident">user_record_len</span> : <span class="ident">usize</span> , <span class="ident">user_data</span> : <span class="op">*</span> <span class="kw-2">mut</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_void</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> <span class="op">&gt;</span> , # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; Determine whether there is a committed session record for a&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; recipient ID + device ID tuple.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param address the address of the remote client&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @return 1 if a session record exists, 0 otherwise.&quot;</span> ] <span class="kw">pub</span> <span class="ident">contains_session_func</span> : :: <span class="ident">std</span> :: <span class="ident">option</span> :: <span class="prelude-ty">Option</span> <span class="op">&lt;</span> <span class="kw">unsafe</span> <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> <span class="kw">fn</span> ( <span class="ident">address</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">signal_protocol_address</span> , <span class="ident">user_data</span> : <span class="op">*</span> <span class="kw-2">mut</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_void</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> <span class="op">&gt;</span> , # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; Remove a session record for a recipient ID + device ID tuple.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param address the address of the remote client&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @return 1 if a session was deleted, 0 if a session was not deleted, negative on error&quot;</span> ] <span class="kw">pub</span> <span class="ident">delete_session_func</span> : :: <span class="ident">std</span> :: <span class="ident">option</span> :: <span class="prelude-ty">Option</span> <span class="op">&lt;</span> <span class="kw">unsafe</span> <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> <span class="kw">fn</span> ( <span class="ident">address</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">signal_protocol_address</span> , <span class="ident">user_data</span> : <span class="op">*</span> <span class="kw-2">mut</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_void</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> <span class="op">&gt;</span> , # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; Remove the session records corresponding to all devices of a recipient ID.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param name the name of the remote client&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param name_len the length of the name&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @return the number of deleted sessions on success, negative on failure&quot;</span> ] <span class="kw">pub</span> <span class="ident">delete_all_sessions_func</span> : :: <span class="ident">std</span> :: <span class="ident">option</span> :: <span class="prelude-ty">Option</span> <span class="op">&lt;</span> <span class="kw">unsafe</span> <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> <span class="kw">fn</span> ( <span class="ident">name</span> : <span class="op">*</span> <span class="kw">const</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_char</span> , <span class="ident">name_len</span> : <span class="ident">usize</span> , <span class="ident">user_data</span> : <span class="op">*</span> <span class="kw-2">mut</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_void</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> <span class="op">&gt;</span> , # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; Function called to perform cleanup when the data store context is being&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; destroyed.&quot;</span> ] <span class="kw">pub</span> <span class="ident">destroy_func</span> : :: <span class="ident">std</span> :: <span class="ident">option</span> :: <span class="prelude-ty">Option</span> <span class="op">&lt;</span> <span class="kw">unsafe</span> <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> <span class="kw">fn</span> ( <span class="ident">user_data</span> : <span class="op">*</span> <span class="kw-2">mut</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_void</span> ) <span class="op">&gt;</span> , # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; User data pointer&quot;</span> ] <span class="kw">pub</span> <span class="ident">user_data</span> : <span class="op">*</span> <span class="kw-2">mut</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_void</span> , } # [ <span class="ident">test</span> ] <span class="kw">fn</span> <span class="ident">bindgen_test_layout_signal_protocol_session_store</span> ( ) { <span class="ident">assert_eq</span> <span class="op">!</span> ( :: <span class="ident">std</span> :: <span class="ident">mem</span> :: <span class="ident">size_of</span> :: <span class="op">&lt;</span> <span class="ident">signal_protocol_session_store</span> <span class="op">&gt;</span> ( ) , <span class="number">64usize</span> , <span class="ident">concat</span> <span class="op">!</span> ( <span class="string">&quot;Size of: &quot;</span> , <span class="ident">stringify</span> <span class="op">!</span> ( <span class="ident">signal_protocol_session_store</span> ) ) ) ; <span class="ident">assert_eq</span> <span class="op">!</span> ( :: <span class="ident">std</span> :: <span class="ident">mem</span> :: <span class="ident">align_of</span> :: <span class="op">&lt;</span> <span class="ident">signal_protocol_session_store</span> <span class="op">&gt;</span> ( ) , <span class="number">8usize</span> , <span class="ident">concat</span> <span class="op">!</span> ( <span class="string">&quot;Alignment of &quot;</span> , <span class="ident">stringify</span> <span class="op">!</span> ( <span class="ident">signal_protocol_session_store</span> ) ) ) ; <span class="ident">assert_eq</span> <span class="op">!</span> ( <span class="kw">unsafe</span> { <span class="op">&amp;</span> ( <span class="op">*</span> ( :: <span class="ident">std</span> :: <span class="ident">ptr</span> :: <span class="ident">null</span> :: <span class="op">&lt;</span> <span class="ident">signal_protocol_session_store</span> <span class="op">&gt;</span> ( ) ) ) . <span class="ident">load_session_func</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="kw">_</span> <span class="kw">as</span> <span class="ident">usize</span> } , <span class="number">0usize</span> , <span class="ident">concat</span> <span class="op">!</span> ( <span class="string">&quot;Offset of field: &quot;</span> , <span class="ident">stringify</span> <span class="op">!</span> ( <span class="ident">signal_protocol_session_store</span> ) , <span class="string">&quot;::&quot;</span> , <span class="ident">stringify</span> <span class="op">!</span> ( <span class="ident">load_session_func</span> ) ) ) ; <span class="ident">assert_eq</span> <span class="op">!</span> ( <span class="kw">unsafe</span> { <span class="op">&amp;</span> ( <span class="op">*</span> ( :: <span class="ident">std</span> :: <span class="ident">ptr</span> :: <span class="ident">null</span> :: <span class="op">&lt;</span> <span class="ident">signal_protocol_session_store</span> <span class="op">&gt;</span> ( ) ) ) . <span class="ident">get_sub_device_sessions_func</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="kw">_</span> <span class="kw">as</span> <span class="ident">usize</span> } , <span class="number">8usize</span> , <span class="ident">concat</span> <span class="op">!</span> ( <span class="string">&quot;Offset of field: &quot;</span> , <span class="ident">stringify</span> <span class="op">!</span> ( <span class="ident">signal_protocol_session_store</span> ) , <span class="string">&quot;::&quot;</span> , <span class="ident">stringify</span> <span class="op">!</span> ( <span class="ident">get_sub_device_sessions_func</span> ) ) ) ; <span class="ident">assert_eq</span> <span class="op">!</span> ( <span class="kw">unsafe</span> { <span class="op">&amp;</span> ( <span class="op">*</span> ( :: <span class="ident">std</span> :: <span class="ident">ptr</span> :: <span class="ident">null</span> :: <span class="op">&lt;</span> <span class="ident">signal_protocol_session_store</span> <span class="op">&gt;</span> ( ) ) ) . <span class="ident">store_session_func</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="kw">_</span> <span class="kw">as</span> <span class="ident">usize</span> } , <span class="number">16usize</span> , <span class="ident">concat</span> <span class="op">!</span> ( <span class="string">&quot;Offset of field: &quot;</span> , <span class="ident">stringify</span> <span class="op">!</span> ( <span class="ident">signal_protocol_session_store</span> ) , <span class="string">&quot;::&quot;</span> , <span class="ident">stringify</span> <span class="op">!</span> ( <span class="ident">store_session_func</span> ) ) ) ; <span class="ident">assert_eq</span> <span class="op">!</span> ( <span class="kw">unsafe</span> { <span class="op">&amp;</span> ( <span class="op">*</span> ( :: <span class="ident">std</span> :: <span class="ident">ptr</span> :: <span class="ident">null</span> :: <span class="op">&lt;</span> <span class="ident">signal_protocol_session_store</span> <span class="op">&gt;</span> ( ) ) ) . <span class="ident">contains_session_func</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="kw">_</span> <span class="kw">as</span> <span class="ident">usize</span> } , <span class="number">24usize</span> , <span class="ident">concat</span> <span class="op">!</span> ( <span class="string">&quot;Offset of field: &quot;</span> , <span class="ident">stringify</span> <span class="op">!</span> ( <span class="ident">signal_protocol_session_store</span> ) , <span class="string">&quot;::&quot;</span> , <span class="ident">stringify</span> <span class="op">!</span> ( <span class="ident">contains_session_func</span> ) ) ) ; <span class="ident">assert_eq</span> <span class="op">!</span> ( <span class="kw">unsafe</span> { <span class="op">&amp;</span> ( <span class="op">*</span> ( :: <span class="ident">std</span> :: <span class="ident">ptr</span> :: <span class="ident">null</span> :: <span class="op">&lt;</span> <span class="ident">signal_protocol_session_store</span> <span class="op">&gt;</span> ( ) ) ) . <span class="ident">delete_session_func</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="kw">_</span> <span class="kw">as</span> <span class="ident">usize</span> } , <span class="number">32usize</span> , <span class="ident">concat</span> <span class="op">!</span> ( <span class="string">&quot;Offset of field: &quot;</span> , <span class="ident">stringify</span> <span class="op">!</span> ( <span class="ident">signal_protocol_session_store</span> ) , <span class="string">&quot;::&quot;</span> , <span class="ident">stringify</span> <span class="op">!</span> ( <span class="ident">delete_session_func</span> ) ) ) ; <span class="ident">assert_eq</span> <span class="op">!</span> ( <span class="kw">unsafe</span> { <span class="op">&amp;</span> ( <span class="op">*</span> ( :: <span class="ident">std</span> :: <span class="ident">ptr</span> :: <span class="ident">null</span> :: <span class="op">&lt;</span> <span class="ident">signal_protocol_session_store</span> <span class="op">&gt;</span> ( ) ) ) . <span class="ident">delete_all_sessions_func</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="kw">_</span> <span class="kw">as</span> <span class="ident">usize</span> } , <span class="number">40usize</span> , <span class="ident">concat</span> <span class="op">!</span> ( <span class="string">&quot;Offset of field: &quot;</span> , <span class="ident">stringify</span> <span class="op">!</span> ( <span class="ident">signal_protocol_session_store</span> ) , <span class="string">&quot;::&quot;</span> , <span class="ident">stringify</span> <span class="op">!</span> ( <span class="ident">delete_all_sessions_func</span> ) ) ) ; <span class="ident">assert_eq</span> <span class="op">!</span> ( <span class="kw">unsafe</span> { <span class="op">&amp;</span> ( <span class="op">*</span> ( :: <span class="ident">std</span> :: <span class="ident">ptr</span> :: <span class="ident">null</span> :: <span class="op">&lt;</span> <span class="ident">signal_protocol_session_store</span> <span class="op">&gt;</span> ( ) ) ) . <span class="ident">destroy_func</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="kw">_</span> <span class="kw">as</span> <span class="ident">usize</span> } , <span class="number">48usize</span> , <span class="ident">concat</span> <span class="op">!</span> ( <span class="string">&quot;Offset of field: &quot;</span> , <span class="ident">stringify</span> <span class="op">!</span> ( <span class="ident">signal_protocol_session_store</span> ) , <span class="string">&quot;::&quot;</span> , <span class="ident">stringify</span> <span class="op">!</span> ( <span class="ident">destroy_func</span> ) ) ) ; <span class="ident">assert_eq</span> <span class="op">!</span> ( <span class="kw">unsafe</span> { <span class="op">&amp;</span> ( <span class="op">*</span> ( :: <span class="ident">std</span> :: <span class="ident">ptr</span> :: <span class="ident">null</span> :: <span class="op">&lt;</span> <span class="ident">signal_protocol_session_store</span> <span class="op">&gt;</span> ( ) ) ) . <span class="ident">user_data</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="kw">_</span> <span class="kw">as</span> <span class="ident">usize</span> } , <span class="number">56usize</span> , <span class="ident">concat</span> <span class="op">!</span> ( <span class="string">&quot;Offset of field: &quot;</span> , <span class="ident">stringify</span> <span class="op">!</span> ( <span class="ident">signal_protocol_session_store</span> ) , <span class="string">&quot;::&quot;</span> , <span class="ident">stringify</span> <span class="op">!</span> ( <span class="ident">user_data</span> ) ) ) ; } # [ <span class="ident">repr</span> ( <span class="ident">C</span> ) ] # [ <span class="ident">derive</span> ( <span class="ident">Debug</span> , <span class="ident">Copy</span> , <span class="ident">Clone</span> ) ] <span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">signal_protocol_pre_key_store</span> { # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; Load a local serialized PreKey record.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param record pointer to a newly allocated buffer containing the record,&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;     if found. Unset if no record was found.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;     The Signal Protocol library is responsible for freeing this buffer.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param pre_key_id the ID of the local serialized PreKey record&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @retval SG_SUCCESS if the key was found&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @retval SG_ERR_INVALID_KEY_ID if the key could not be found&quot;</span> ] <span class="kw">pub</span> <span class="ident">load_pre_key</span> : :: <span class="ident">std</span> :: <span class="ident">option</span> :: <span class="prelude-ty">Option</span> <span class="op">&lt;</span> <span class="kw">unsafe</span> <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> <span class="kw">fn</span> ( <span class="ident">record</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_buffer</span> , <span class="ident">pre_key_id</span> : <span class="ident">u32</span> , <span class="ident">user_data</span> : <span class="op">*</span> <span class="kw-2">mut</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_void</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> <span class="op">&gt;</span> , # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; Store a local serialized PreKey record.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param pre_key_id the ID of the PreKey record to store.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param record pointer to a buffer containing the serialized record&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param record_len length of the serialized record&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @return 0 on success, negative on failure&quot;</span> ] <span class="kw">pub</span> <span class="ident">store_pre_key</span> : :: <span class="ident">std</span> :: <span class="ident">option</span> :: <span class="prelude-ty">Option</span> <span class="op">&lt;</span> <span class="kw">unsafe</span> <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> <span class="kw">fn</span> ( <span class="ident">pre_key_id</span> : <span class="ident">u32</span> , <span class="ident">record</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">u8</span> , <span class="ident">record_len</span> : <span class="ident">usize</span> , <span class="ident">user_data</span> : <span class="op">*</span> <span class="kw-2">mut</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_void</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> <span class="op">&gt;</span> , # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; Determine whether there is a committed PreKey record matching the&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; provided ID.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param pre_key_id A PreKey record ID.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @return 1 if the store has a record for the PreKey ID, 0 otherwise&quot;</span> ] <span class="kw">pub</span> <span class="ident">contains_pre_key</span> : :: <span class="ident">std</span> :: <span class="ident">option</span> :: <span class="prelude-ty">Option</span> <span class="op">&lt;</span> <span class="kw">unsafe</span> <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> <span class="kw">fn</span> ( <span class="ident">pre_key_id</span> : <span class="ident">u32</span> , <span class="ident">user_data</span> : <span class="op">*</span> <span class="kw-2">mut</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_void</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> <span class="op">&gt;</span> , # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; Delete a PreKey record from local storage.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param pre_key_id The ID of the PreKey record to remove.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @return 0 on success, negative on failure&quot;</span> ] <span class="kw">pub</span> <span class="ident">remove_pre_key</span> : :: <span class="ident">std</span> :: <span class="ident">option</span> :: <span class="prelude-ty">Option</span> <span class="op">&lt;</span> <span class="kw">unsafe</span> <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> <span class="kw">fn</span> ( <span class="ident">pre_key_id</span> : <span class="ident">u32</span> , <span class="ident">user_data</span> : <span class="op">*</span> <span class="kw-2">mut</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_void</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> <span class="op">&gt;</span> , # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; Function called to perform cleanup when the data store context is being&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; destroyed.&quot;</span> ] <span class="kw">pub</span> <span class="ident">destroy_func</span> : :: <span class="ident">std</span> :: <span class="ident">option</span> :: <span class="prelude-ty">Option</span> <span class="op">&lt;</span> <span class="kw">unsafe</span> <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> <span class="kw">fn</span> ( <span class="ident">user_data</span> : <span class="op">*</span> <span class="kw-2">mut</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_void</span> ) <span class="op">&gt;</span> , # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; User data pointer&quot;</span> ] <span class="kw">pub</span> <span class="ident">user_data</span> : <span class="op">*</span> <span class="kw-2">mut</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_void</span> , } # [ <span class="ident">test</span> ] <span class="kw">fn</span> <span class="ident">bindgen_test_layout_signal_protocol_pre_key_store</span> ( ) { <span class="ident">assert_eq</span> <span class="op">!</span> ( :: <span class="ident">std</span> :: <span class="ident">mem</span> :: <span class="ident">size_of</span> :: <span class="op">&lt;</span> <span class="ident">signal_protocol_pre_key_store</span> <span class="op">&gt;</span> ( ) , <span class="number">48usize</span> , <span class="ident">concat</span> <span class="op">!</span> ( <span class="string">&quot;Size of: &quot;</span> , <span class="ident">stringify</span> <span class="op">!</span> ( <span class="ident">signal_protocol_pre_key_store</span> ) ) ) ; <span class="ident">assert_eq</span> <span class="op">!</span> ( :: <span class="ident">std</span> :: <span class="ident">mem</span> :: <span class="ident">align_of</span> :: <span class="op">&lt;</span> <span class="ident">signal_protocol_pre_key_store</span> <span class="op">&gt;</span> ( ) , <span class="number">8usize</span> , <span class="ident">concat</span> <span class="op">!</span> ( <span class="string">&quot;Alignment of &quot;</span> , <span class="ident">stringify</span> <span class="op">!</span> ( <span class="ident">signal_protocol_pre_key_store</span> ) ) ) ; <span class="ident">assert_eq</span> <span class="op">!</span> ( <span class="kw">unsafe</span> { <span class="op">&amp;</span> ( <span class="op">*</span> ( :: <span class="ident">std</span> :: <span class="ident">ptr</span> :: <span class="ident">null</span> :: <span class="op">&lt;</span> <span class="ident">signal_protocol_pre_key_store</span> <span class="op">&gt;</span> ( ) ) ) . <span class="ident">load_pre_key</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="kw">_</span> <span class="kw">as</span> <span class="ident">usize</span> } , <span class="number">0usize</span> , <span class="ident">concat</span> <span class="op">!</span> ( <span class="string">&quot;Offset of field: &quot;</span> , <span class="ident">stringify</span> <span class="op">!</span> ( <span class="ident">signal_protocol_pre_key_store</span> ) , <span class="string">&quot;::&quot;</span> , <span class="ident">stringify</span> <span class="op">!</span> ( <span class="ident">load_pre_key</span> ) ) ) ; <span class="ident">assert_eq</span> <span class="op">!</span> ( <span class="kw">unsafe</span> { <span class="op">&amp;</span> ( <span class="op">*</span> ( :: <span class="ident">std</span> :: <span class="ident">ptr</span> :: <span class="ident">null</span> :: <span class="op">&lt;</span> <span class="ident">signal_protocol_pre_key_store</span> <span class="op">&gt;</span> ( ) ) ) . <span class="ident">store_pre_key</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="kw">_</span> <span class="kw">as</span> <span class="ident">usize</span> } , <span class="number">8usize</span> , <span class="ident">concat</span> <span class="op">!</span> ( <span class="string">&quot;Offset of field: &quot;</span> , <span class="ident">stringify</span> <span class="op">!</span> ( <span class="ident">signal_protocol_pre_key_store</span> ) , <span class="string">&quot;::&quot;</span> , <span class="ident">stringify</span> <span class="op">!</span> ( <span class="ident">store_pre_key</span> ) ) ) ; <span class="ident">assert_eq</span> <span class="op">!</span> ( <span class="kw">unsafe</span> { <span class="op">&amp;</span> ( <span class="op">*</span> ( :: <span class="ident">std</span> :: <span class="ident">ptr</span> :: <span class="ident">null</span> :: <span class="op">&lt;</span> <span class="ident">signal_protocol_pre_key_store</span> <span class="op">&gt;</span> ( ) ) ) . <span class="ident">contains_pre_key</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="kw">_</span> <span class="kw">as</span> <span class="ident">usize</span> } , <span class="number">16usize</span> , <span class="ident">concat</span> <span class="op">!</span> ( <span class="string">&quot;Offset of field: &quot;</span> , <span class="ident">stringify</span> <span class="op">!</span> ( <span class="ident">signal_protocol_pre_key_store</span> ) , <span class="string">&quot;::&quot;</span> , <span class="ident">stringify</span> <span class="op">!</span> ( <span class="ident">contains_pre_key</span> ) ) ) ; <span class="ident">assert_eq</span> <span class="op">!</span> ( <span class="kw">unsafe</span> { <span class="op">&amp;</span> ( <span class="op">*</span> ( :: <span class="ident">std</span> :: <span class="ident">ptr</span> :: <span class="ident">null</span> :: <span class="op">&lt;</span> <span class="ident">signal_protocol_pre_key_store</span> <span class="op">&gt;</span> ( ) ) ) . <span class="ident">remove_pre_key</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="kw">_</span> <span class="kw">as</span> <span class="ident">usize</span> } , <span class="number">24usize</span> , <span class="ident">concat</span> <span class="op">!</span> ( <span class="string">&quot;Offset of field: &quot;</span> , <span class="ident">stringify</span> <span class="op">!</span> ( <span class="ident">signal_protocol_pre_key_store</span> ) , <span class="string">&quot;::&quot;</span> , <span class="ident">stringify</span> <span class="op">!</span> ( <span class="ident">remove_pre_key</span> ) ) ) ; <span class="ident">assert_eq</span> <span class="op">!</span> ( <span class="kw">unsafe</span> { <span class="op">&amp;</span> ( <span class="op">*</span> ( :: <span class="ident">std</span> :: <span class="ident">ptr</span> :: <span class="ident">null</span> :: <span class="op">&lt;</span> <span class="ident">signal_protocol_pre_key_store</span> <span class="op">&gt;</span> ( ) ) ) . <span class="ident">destroy_func</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="kw">_</span> <span class="kw">as</span> <span class="ident">usize</span> } , <span class="number">32usize</span> , <span class="ident">concat</span> <span class="op">!</span> ( <span class="string">&quot;Offset of field: &quot;</span> , <span class="ident">stringify</span> <span class="op">!</span> ( <span class="ident">signal_protocol_pre_key_store</span> ) , <span class="string">&quot;::&quot;</span> , <span class="ident">stringify</span> <span class="op">!</span> ( <span class="ident">destroy_func</span> ) ) ) ; <span class="ident">assert_eq</span> <span class="op">!</span> ( <span class="kw">unsafe</span> { <span class="op">&amp;</span> ( <span class="op">*</span> ( :: <span class="ident">std</span> :: <span class="ident">ptr</span> :: <span class="ident">null</span> :: <span class="op">&lt;</span> <span class="ident">signal_protocol_pre_key_store</span> <span class="op">&gt;</span> ( ) ) ) . <span class="ident">user_data</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="kw">_</span> <span class="kw">as</span> <span class="ident">usize</span> } , <span class="number">40usize</span> , <span class="ident">concat</span> <span class="op">!</span> ( <span class="string">&quot;Offset of field: &quot;</span> , <span class="ident">stringify</span> <span class="op">!</span> ( <span class="ident">signal_protocol_pre_key_store</span> ) , <span class="string">&quot;::&quot;</span> , <span class="ident">stringify</span> <span class="op">!</span> ( <span class="ident">user_data</span> ) ) ) ; } # [ <span class="ident">repr</span> ( <span class="ident">C</span> ) ] # [ <span class="ident">derive</span> ( <span class="ident">Debug</span> , <span class="ident">Copy</span> , <span class="ident">Clone</span> ) ] <span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">signal_protocol_signed_pre_key_store</span> { # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; Load a local serialized signed PreKey record.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param record pointer to a newly allocated buffer containing the record,&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;     if found. Unset if no record was found.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;     The Signal Protocol library is responsible for freeing this buffer.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param signed_pre_key_id the ID of the local signed PreKey record&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @retval SG_SUCCESS if the key was found&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @retval SG_ERR_INVALID_KEY_ID if the key could not be found&quot;</span> ] <span class="kw">pub</span> <span class="ident">load_signed_pre_key</span> : :: <span class="ident">std</span> :: <span class="ident">option</span> :: <span class="prelude-ty">Option</span> <span class="op">&lt;</span> <span class="kw">unsafe</span> <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> <span class="kw">fn</span> ( <span class="ident">record</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_buffer</span> , <span class="ident">signed_pre_key_id</span> : <span class="ident">u32</span> , <span class="ident">user_data</span> : <span class="op">*</span> <span class="kw-2">mut</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_void</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> <span class="op">&gt;</span> , # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; Store a local serialized signed PreKey record.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param signed_pre_key_id the ID of the signed PreKey record to store&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param record pointer to a buffer containing the serialized record&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param record_len length of the serialized record&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @return 0 on success, negative on failure&quot;</span> ] <span class="kw">pub</span> <span class="ident">store_signed_pre_key</span> : :: <span class="ident">std</span> :: <span class="ident">option</span> :: <span class="prelude-ty">Option</span> <span class="op">&lt;</span> <span class="kw">unsafe</span> <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> <span class="kw">fn</span> ( <span class="ident">signed_pre_key_id</span> : <span class="ident">u32</span> , <span class="ident">record</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">u8</span> , <span class="ident">record_len</span> : <span class="ident">usize</span> , <span class="ident">user_data</span> : <span class="op">*</span> <span class="kw-2">mut</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_void</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> <span class="op">&gt;</span> , # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; Determine whether there is a committed signed PreKey record matching&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; the provided ID.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param signed_pre_key_id A signed PreKey record ID.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @return 1 if the store has a record for the signed PreKey ID, 0 otherwise&quot;</span> ] <span class="kw">pub</span> <span class="ident">contains_signed_pre_key</span> : :: <span class="ident">std</span> :: <span class="ident">option</span> :: <span class="prelude-ty">Option</span> <span class="op">&lt;</span> <span class="kw">unsafe</span> <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> <span class="kw">fn</span> ( <span class="ident">signed_pre_key_id</span> : <span class="ident">u32</span> , <span class="ident">user_data</span> : <span class="op">*</span> <span class="kw-2">mut</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_void</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> <span class="op">&gt;</span> , # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; Delete a SignedPreKeyRecord from local storage.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param signed_pre_key_id The ID of the signed PreKey record to remove.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @return 0 on success, negative on failure&quot;</span> ] <span class="kw">pub</span> <span class="ident">remove_signed_pre_key</span> : :: <span class="ident">std</span> :: <span class="ident">option</span> :: <span class="prelude-ty">Option</span> <span class="op">&lt;</span> <span class="kw">unsafe</span> <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> <span class="kw">fn</span> ( <span class="ident">signed_pre_key_id</span> : <span class="ident">u32</span> , <span class="ident">user_data</span> : <span class="op">*</span> <span class="kw-2">mut</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_void</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> <span class="op">&gt;</span> , # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; Function called to perform cleanup when the data store context is being&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; destroyed.&quot;</span> ] <span class="kw">pub</span> <span class="ident">destroy_func</span> : :: <span class="ident">std</span> :: <span class="ident">option</span> :: <span class="prelude-ty">Option</span> <span class="op">&lt;</span> <span class="kw">unsafe</span> <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> <span class="kw">fn</span> ( <span class="ident">user_data</span> : <span class="op">*</span> <span class="kw-2">mut</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_void</span> ) <span class="op">&gt;</span> , # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; User data pointer&quot;</span> ] <span class="kw">pub</span> <span class="ident">user_data</span> : <span class="op">*</span> <span class="kw-2">mut</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_void</span> , } # [ <span class="ident">test</span> ] <span class="kw">fn</span> <span class="ident">bindgen_test_layout_signal_protocol_signed_pre_key_store</span> ( ) { <span class="ident">assert_eq</span> <span class="op">!</span> ( :: <span class="ident">std</span> :: <span class="ident">mem</span> :: <span class="ident">size_of</span> :: <span class="op">&lt;</span> <span class="ident">signal_protocol_signed_pre_key_store</span> <span class="op">&gt;</span> ( ) , <span class="number">48usize</span> , <span class="ident">concat</span> <span class="op">!</span> ( <span class="string">&quot;Size of: &quot;</span> , <span class="ident">stringify</span> <span class="op">!</span> ( <span class="ident">signal_protocol_signed_pre_key_store</span> ) ) ) ; <span class="ident">assert_eq</span> <span class="op">!</span> ( :: <span class="ident">std</span> :: <span class="ident">mem</span> :: <span class="ident">align_of</span> :: <span class="op">&lt;</span> <span class="ident">signal_protocol_signed_pre_key_store</span> <span class="op">&gt;</span> ( ) , <span class="number">8usize</span> , <span class="ident">concat</span> <span class="op">!</span> ( <span class="string">&quot;Alignment of &quot;</span> , <span class="ident">stringify</span> <span class="op">!</span> ( <span class="ident">signal_protocol_signed_pre_key_store</span> ) ) ) ; <span class="ident">assert_eq</span> <span class="op">!</span> ( <span class="kw">unsafe</span> { <span class="op">&amp;</span> ( <span class="op">*</span> ( :: <span class="ident">std</span> :: <span class="ident">ptr</span> :: <span class="ident">null</span> :: <span class="op">&lt;</span> <span class="ident">signal_protocol_signed_pre_key_store</span> <span class="op">&gt;</span> ( ) ) ) . <span class="ident">load_signed_pre_key</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="kw">_</span> <span class="kw">as</span> <span class="ident">usize</span> } , <span class="number">0usize</span> , <span class="ident">concat</span> <span class="op">!</span> ( <span class="string">&quot;Offset of field: &quot;</span> , <span class="ident">stringify</span> <span class="op">!</span> ( <span class="ident">signal_protocol_signed_pre_key_store</span> ) , <span class="string">&quot;::&quot;</span> , <span class="ident">stringify</span> <span class="op">!</span> ( <span class="ident">load_signed_pre_key</span> ) ) ) ; <span class="ident">assert_eq</span> <span class="op">!</span> ( <span class="kw">unsafe</span> { <span class="op">&amp;</span> ( <span class="op">*</span> ( :: <span class="ident">std</span> :: <span class="ident">ptr</span> :: <span class="ident">null</span> :: <span class="op">&lt;</span> <span class="ident">signal_protocol_signed_pre_key_store</span> <span class="op">&gt;</span> ( ) ) ) . <span class="ident">store_signed_pre_key</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="kw">_</span> <span class="kw">as</span> <span class="ident">usize</span> } , <span class="number">8usize</span> , <span class="ident">concat</span> <span class="op">!</span> ( <span class="string">&quot;Offset of field: &quot;</span> , <span class="ident">stringify</span> <span class="op">!</span> ( <span class="ident">signal_protocol_signed_pre_key_store</span> ) , <span class="string">&quot;::&quot;</span> , <span class="ident">stringify</span> <span class="op">!</span> ( <span class="ident">store_signed_pre_key</span> ) ) ) ; <span class="ident">assert_eq</span> <span class="op">!</span> ( <span class="kw">unsafe</span> { <span class="op">&amp;</span> ( <span class="op">*</span> ( :: <span class="ident">std</span> :: <span class="ident">ptr</span> :: <span class="ident">null</span> :: <span class="op">&lt;</span> <span class="ident">signal_protocol_signed_pre_key_store</span> <span class="op">&gt;</span> ( ) ) ) . <span class="ident">contains_signed_pre_key</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="kw">_</span> <span class="kw">as</span> <span class="ident">usize</span> } , <span class="number">16usize</span> , <span class="ident">concat</span> <span class="op">!</span> ( <span class="string">&quot;Offset of field: &quot;</span> , <span class="ident">stringify</span> <span class="op">!</span> ( <span class="ident">signal_protocol_signed_pre_key_store</span> ) , <span class="string">&quot;::&quot;</span> , <span class="ident">stringify</span> <span class="op">!</span> ( <span class="ident">contains_signed_pre_key</span> ) ) ) ; <span class="ident">assert_eq</span> <span class="op">!</span> ( <span class="kw">unsafe</span> { <span class="op">&amp;</span> ( <span class="op">*</span> ( :: <span class="ident">std</span> :: <span class="ident">ptr</span> :: <span class="ident">null</span> :: <span class="op">&lt;</span> <span class="ident">signal_protocol_signed_pre_key_store</span> <span class="op">&gt;</span> ( ) ) ) . <span class="ident">remove_signed_pre_key</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="kw">_</span> <span class="kw">as</span> <span class="ident">usize</span> } , <span class="number">24usize</span> , <span class="ident">concat</span> <span class="op">!</span> ( <span class="string">&quot;Offset of field: &quot;</span> , <span class="ident">stringify</span> <span class="op">!</span> ( <span class="ident">signal_protocol_signed_pre_key_store</span> ) , <span class="string">&quot;::&quot;</span> , <span class="ident">stringify</span> <span class="op">!</span> ( <span class="ident">remove_signed_pre_key</span> ) ) ) ; <span class="ident">assert_eq</span> <span class="op">!</span> ( <span class="kw">unsafe</span> { <span class="op">&amp;</span> ( <span class="op">*</span> ( :: <span class="ident">std</span> :: <span class="ident">ptr</span> :: <span class="ident">null</span> :: <span class="op">&lt;</span> <span class="ident">signal_protocol_signed_pre_key_store</span> <span class="op">&gt;</span> ( ) ) ) . <span class="ident">destroy_func</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="kw">_</span> <span class="kw">as</span> <span class="ident">usize</span> } , <span class="number">32usize</span> , <span class="ident">concat</span> <span class="op">!</span> ( <span class="string">&quot;Offset of field: &quot;</span> , <span class="ident">stringify</span> <span class="op">!</span> ( <span class="ident">signal_protocol_signed_pre_key_store</span> ) , <span class="string">&quot;::&quot;</span> , <span class="ident">stringify</span> <span class="op">!</span> ( <span class="ident">destroy_func</span> ) ) ) ; <span class="ident">assert_eq</span> <span class="op">!</span> ( <span class="kw">unsafe</span> { <span class="op">&amp;</span> ( <span class="op">*</span> ( :: <span class="ident">std</span> :: <span class="ident">ptr</span> :: <span class="ident">null</span> :: <span class="op">&lt;</span> <span class="ident">signal_protocol_signed_pre_key_store</span> <span class="op">&gt;</span> ( ) ) ) . <span class="ident">user_data</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="kw">_</span> <span class="kw">as</span> <span class="ident">usize</span> } , <span class="number">40usize</span> , <span class="ident">concat</span> <span class="op">!</span> ( <span class="string">&quot;Offset of field: &quot;</span> , <span class="ident">stringify</span> <span class="op">!</span> ( <span class="ident">signal_protocol_signed_pre_key_store</span> ) , <span class="string">&quot;::&quot;</span> , <span class="ident">stringify</span> <span class="op">!</span> ( <span class="ident">user_data</span> ) ) ) ; } # [ <span class="ident">repr</span> ( <span class="ident">C</span> ) ] # [ <span class="ident">derive</span> ( <span class="ident">Debug</span> , <span class="ident">Copy</span> , <span class="ident">Clone</span> ) ] <span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">signal_protocol_identity_key_store</span> { # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; Get the local client&#39;s identity key pair.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param public_data pointer to a newly allocated buffer containing the&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;     public key, if found. Unset if no record was found.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;     The Signal Protocol library is responsible for freeing this buffer.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param private_data pointer to a newly allocated buffer containing the&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;     private key, if found. Unset if no record was found.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;     The Signal Protocol library is responsible for freeing this buffer.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @return 0 on success, negative on failure&quot;</span> ] <span class="kw">pub</span> <span class="ident">get_identity_key_pair</span> : :: <span class="ident">std</span> :: <span class="ident">option</span> :: <span class="prelude-ty">Option</span> <span class="op">&lt;</span> <span class="kw">unsafe</span> <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> <span class="kw">fn</span> ( <span class="ident">public_data</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_buffer</span> , <span class="ident">private_data</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_buffer</span> , <span class="ident">user_data</span> : <span class="op">*</span> <span class="kw-2">mut</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_void</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> <span class="op">&gt;</span> , # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; Return the local client&#39;s registration ID.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; Clients should maintain a registration ID, a random number&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; between 1 and 16380 that&#39;s generated once at install time.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param registration_id pointer to be set to the local client&#39;s&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;     registration ID, if it was successfully retrieved.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @return 0 on success, negative on failure&quot;</span> ] <span class="kw">pub</span> <span class="ident">get_local_registration_id</span> : :: <span class="ident">std</span> :: <span class="ident">option</span> :: <span class="prelude-ty">Option</span> <span class="op">&lt;</span> <span class="kw">unsafe</span> <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> <span class="kw">fn</span> ( <span class="ident">user_data</span> : <span class="op">*</span> <span class="kw-2">mut</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_void</span> , <span class="ident">registration_id</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">u32</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> <span class="op">&gt;</span> , # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; Save a remote client&#39;s identity key&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; &lt;p&gt;&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; Store a remote client&#39;s identity key as trusted.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; The value of key_data may be null. In this case remove the key data&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; from the identity store, but retain any metadata that may be kept&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; alongside it.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param address the address of the remote client&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param key_data Pointer to the remote client&#39;s identity key, may be null&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param key_len Length of the remote client&#39;s identity key&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @return 0 on success, negative on failure&quot;</span> ] <span class="kw">pub</span> <span class="ident">save_identity</span> : :: <span class="ident">std</span> :: <span class="ident">option</span> :: <span class="prelude-ty">Option</span> <span class="op">&lt;</span> <span class="kw">unsafe</span> <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> <span class="kw">fn</span> ( <span class="ident">address</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">signal_protocol_address</span> , <span class="ident">key_data</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">u8</span> , <span class="ident">key_len</span> : <span class="ident">usize</span> , <span class="ident">user_data</span> : <span class="op">*</span> <span class="kw-2">mut</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_void</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> <span class="op">&gt;</span> , # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; Verify a remote client&#39;s identity key.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; Determine whether a remote client&#39;s identity is trusted.  Convention is&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; that the TextSecure protocol is &#39;trust on first use.&#39;  This means that&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; an identity key is considered &#39;trusted&#39; if there is no entry for the recipient&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; in the local store, or if it matches the saved key for a recipient in the local&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; store.  Only if it mismatches an entry in the local store is it considered&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; &#39;untrusted.&#39;&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param address the address of the remote client&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param identityKey The identity key to verify.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param key_data Pointer to the identity key to verify&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param key_len Length of the identity key to verify&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @return 1 if trusted, 0 if untrusted, negative on failure&quot;</span> ] <span class="kw">pub</span> <span class="ident">is_trusted_identity</span> : :: <span class="ident">std</span> :: <span class="ident">option</span> :: <span class="prelude-ty">Option</span> <span class="op">&lt;</span> <span class="kw">unsafe</span> <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> <span class="kw">fn</span> ( <span class="ident">address</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">signal_protocol_address</span> , <span class="ident">key_data</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">u8</span> , <span class="ident">key_len</span> : <span class="ident">usize</span> , <span class="ident">user_data</span> : <span class="op">*</span> <span class="kw-2">mut</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_void</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> <span class="op">&gt;</span> , # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; Function called to perform cleanup when the data store context is being&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; destroyed.&quot;</span> ] <span class="kw">pub</span> <span class="ident">destroy_func</span> : :: <span class="ident">std</span> :: <span class="ident">option</span> :: <span class="prelude-ty">Option</span> <span class="op">&lt;</span> <span class="kw">unsafe</span> <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> <span class="kw">fn</span> ( <span class="ident">user_data</span> : <span class="op">*</span> <span class="kw-2">mut</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_void</span> ) <span class="op">&gt;</span> , # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; User data pointer&quot;</span> ] <span class="kw">pub</span> <span class="ident">user_data</span> : <span class="op">*</span> <span class="kw-2">mut</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_void</span> , } # [ <span class="ident">test</span> ] <span class="kw">fn</span> <span class="ident">bindgen_test_layout_signal_protocol_identity_key_store</span> ( ) { <span class="ident">assert_eq</span> <span class="op">!</span> ( :: <span class="ident">std</span> :: <span class="ident">mem</span> :: <span class="ident">size_of</span> :: <span class="op">&lt;</span> <span class="ident">signal_protocol_identity_key_store</span> <span class="op">&gt;</span> ( ) , <span class="number">48usize</span> , <span class="ident">concat</span> <span class="op">!</span> ( <span class="string">&quot;Size of: &quot;</span> , <span class="ident">stringify</span> <span class="op">!</span> ( <span class="ident">signal_protocol_identity_key_store</span> ) ) ) ; <span class="ident">assert_eq</span> <span class="op">!</span> ( :: <span class="ident">std</span> :: <span class="ident">mem</span> :: <span class="ident">align_of</span> :: <span class="op">&lt;</span> <span class="ident">signal_protocol_identity_key_store</span> <span class="op">&gt;</span> ( ) , <span class="number">8usize</span> , <span class="ident">concat</span> <span class="op">!</span> ( <span class="string">&quot;Alignment of &quot;</span> , <span class="ident">stringify</span> <span class="op">!</span> ( <span class="ident">signal_protocol_identity_key_store</span> ) ) ) ; <span class="ident">assert_eq</span> <span class="op">!</span> ( <span class="kw">unsafe</span> { <span class="op">&amp;</span> ( <span class="op">*</span> ( :: <span class="ident">std</span> :: <span class="ident">ptr</span> :: <span class="ident">null</span> :: <span class="op">&lt;</span> <span class="ident">signal_protocol_identity_key_store</span> <span class="op">&gt;</span> ( ) ) ) . <span class="ident">get_identity_key_pair</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="kw">_</span> <span class="kw">as</span> <span class="ident">usize</span> } , <span class="number">0usize</span> , <span class="ident">concat</span> <span class="op">!</span> ( <span class="string">&quot;Offset of field: &quot;</span> , <span class="ident">stringify</span> <span class="op">!</span> ( <span class="ident">signal_protocol_identity_key_store</span> ) , <span class="string">&quot;::&quot;</span> , <span class="ident">stringify</span> <span class="op">!</span> ( <span class="ident">get_identity_key_pair</span> ) ) ) ; <span class="ident">assert_eq</span> <span class="op">!</span> ( <span class="kw">unsafe</span> { <span class="op">&amp;</span> ( <span class="op">*</span> ( :: <span class="ident">std</span> :: <span class="ident">ptr</span> :: <span class="ident">null</span> :: <span class="op">&lt;</span> <span class="ident">signal_protocol_identity_key_store</span> <span class="op">&gt;</span> ( ) ) ) . <span class="ident">get_local_registration_id</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="kw">_</span> <span class="kw">as</span> <span class="ident">usize</span> } , <span class="number">8usize</span> , <span class="ident">concat</span> <span class="op">!</span> ( <span class="string">&quot;Offset of field: &quot;</span> , <span class="ident">stringify</span> <span class="op">!</span> ( <span class="ident">signal_protocol_identity_key_store</span> ) , <span class="string">&quot;::&quot;</span> , <span class="ident">stringify</span> <span class="op">!</span> ( <span class="ident">get_local_registration_id</span> ) ) ) ; <span class="ident">assert_eq</span> <span class="op">!</span> ( <span class="kw">unsafe</span> { <span class="op">&amp;</span> ( <span class="op">*</span> ( :: <span class="ident">std</span> :: <span class="ident">ptr</span> :: <span class="ident">null</span> :: <span class="op">&lt;</span> <span class="ident">signal_protocol_identity_key_store</span> <span class="op">&gt;</span> ( ) ) ) . <span class="ident">save_identity</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="kw">_</span> <span class="kw">as</span> <span class="ident">usize</span> } , <span class="number">16usize</span> , <span class="ident">concat</span> <span class="op">!</span> ( <span class="string">&quot;Offset of field: &quot;</span> , <span class="ident">stringify</span> <span class="op">!</span> ( <span class="ident">signal_protocol_identity_key_store</span> ) , <span class="string">&quot;::&quot;</span> , <span class="ident">stringify</span> <span class="op">!</span> ( <span class="ident">save_identity</span> ) ) ) ; <span class="ident">assert_eq</span> <span class="op">!</span> ( <span class="kw">unsafe</span> { <span class="op">&amp;</span> ( <span class="op">*</span> ( :: <span class="ident">std</span> :: <span class="ident">ptr</span> :: <span class="ident">null</span> :: <span class="op">&lt;</span> <span class="ident">signal_protocol_identity_key_store</span> <span class="op">&gt;</span> ( ) ) ) . <span class="ident">is_trusted_identity</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="kw">_</span> <span class="kw">as</span> <span class="ident">usize</span> } , <span class="number">24usize</span> , <span class="ident">concat</span> <span class="op">!</span> ( <span class="string">&quot;Offset of field: &quot;</span> , <span class="ident">stringify</span> <span class="op">!</span> ( <span class="ident">signal_protocol_identity_key_store</span> ) , <span class="string">&quot;::&quot;</span> , <span class="ident">stringify</span> <span class="op">!</span> ( <span class="ident">is_trusted_identity</span> ) ) ) ; <span class="ident">assert_eq</span> <span class="op">!</span> ( <span class="kw">unsafe</span> { <span class="op">&amp;</span> ( <span class="op">*</span> ( :: <span class="ident">std</span> :: <span class="ident">ptr</span> :: <span class="ident">null</span> :: <span class="op">&lt;</span> <span class="ident">signal_protocol_identity_key_store</span> <span class="op">&gt;</span> ( ) ) ) . <span class="ident">destroy_func</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="kw">_</span> <span class="kw">as</span> <span class="ident">usize</span> } , <span class="number">32usize</span> , <span class="ident">concat</span> <span class="op">!</span> ( <span class="string">&quot;Offset of field: &quot;</span> , <span class="ident">stringify</span> <span class="op">!</span> ( <span class="ident">signal_protocol_identity_key_store</span> ) , <span class="string">&quot;::&quot;</span> , <span class="ident">stringify</span> <span class="op">!</span> ( <span class="ident">destroy_func</span> ) ) ) ; <span class="ident">assert_eq</span> <span class="op">!</span> ( <span class="kw">unsafe</span> { <span class="op">&amp;</span> ( <span class="op">*</span> ( :: <span class="ident">std</span> :: <span class="ident">ptr</span> :: <span class="ident">null</span> :: <span class="op">&lt;</span> <span class="ident">signal_protocol_identity_key_store</span> <span class="op">&gt;</span> ( ) ) ) . <span class="ident">user_data</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="kw">_</span> <span class="kw">as</span> <span class="ident">usize</span> } , <span class="number">40usize</span> , <span class="ident">concat</span> <span class="op">!</span> ( <span class="string">&quot;Offset of field: &quot;</span> , <span class="ident">stringify</span> <span class="op">!</span> ( <span class="ident">signal_protocol_identity_key_store</span> ) , <span class="string">&quot;::&quot;</span> , <span class="ident">stringify</span> <span class="op">!</span> ( <span class="ident">user_data</span> ) ) ) ; } # [ <span class="ident">repr</span> ( <span class="ident">C</span> ) ] # [ <span class="ident">derive</span> ( <span class="ident">Debug</span> , <span class="ident">Copy</span> , <span class="ident">Clone</span> ) ] <span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">signal_protocol_sender_key_store</span> { # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; Store a serialized sender key record for a given&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; (groupId + senderId + deviceId) tuple.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param sender_key_name the (groupId + senderId + deviceId) tuple&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param record pointer to a buffer containing the serialized record&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param record_len length of the serialized record&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param user_record pointer to a buffer containing application specific&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;     data to be stored alongside the serialized record. If no such&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;     data exists, then this pointer will be null.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param user_record_len length of the application specific data&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @return 0 on success, negative on failure&quot;</span> ] <span class="kw">pub</span> <span class="ident">store_sender_key</span> : :: <span class="ident">std</span> :: <span class="ident">option</span> :: <span class="prelude-ty">Option</span> <span class="op">&lt;</span> <span class="kw">unsafe</span> <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> <span class="kw">fn</span> ( <span class="ident">sender_key_name</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">signal_protocol_sender_key_name</span> , <span class="ident">record</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">u8</span> , <span class="ident">record_len</span> : <span class="ident">usize</span> , <span class="ident">user_record</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">u8</span> , <span class="ident">user_record_len</span> : <span class="ident">usize</span> , <span class="ident">user_data</span> : <span class="op">*</span> <span class="kw-2">mut</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_void</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> <span class="op">&gt;</span> , # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; Returns a copy of the sender key record corresponding to the&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; (groupId + senderId + deviceId) tuple.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param record pointer to a newly allocated buffer containing the record,&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;     if found. Unset if no record was found.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;     The Signal Protocol library is responsible for freeing this buffer.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param user_record pointer to a newly allocated buffer containing&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;     application-specific data stored alongside the record. If no such&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;     data exists, then this pointer may be left unset.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;     The Signal Protocol library is responsible for freeing this buffer.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param sender_key_name the (groupId + senderId + deviceId) tuple&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @return 1 if the record was loaded, 0 if the record was not found, negative on failure&quot;</span> ] <span class="kw">pub</span> <span class="ident">load_sender_key</span> : :: <span class="ident">std</span> :: <span class="ident">option</span> :: <span class="prelude-ty">Option</span> <span class="op">&lt;</span> <span class="kw">unsafe</span> <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> <span class="kw">fn</span> ( <span class="ident">record</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_buffer</span> , <span class="ident">user_record</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_buffer</span> , <span class="ident">sender_key_name</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">signal_protocol_sender_key_name</span> , <span class="ident">user_data</span> : <span class="op">*</span> <span class="kw-2">mut</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_void</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> <span class="op">&gt;</span> , # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; Function called to perform cleanup when the data store context is being&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; destroyed.&quot;</span> ] <span class="kw">pub</span> <span class="ident">destroy_func</span> : :: <span class="ident">std</span> :: <span class="ident">option</span> :: <span class="prelude-ty">Option</span> <span class="op">&lt;</span> <span class="kw">unsafe</span> <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> <span class="kw">fn</span> ( <span class="ident">user_data</span> : <span class="op">*</span> <span class="kw-2">mut</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_void</span> ) <span class="op">&gt;</span> , # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; User data pointer&quot;</span> ] <span class="kw">pub</span> <span class="ident">user_data</span> : <span class="op">*</span> <span class="kw-2">mut</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_void</span> , } # [ <span class="ident">test</span> ] <span class="kw">fn</span> <span class="ident">bindgen_test_layout_signal_protocol_sender_key_store</span> ( ) { <span class="ident">assert_eq</span> <span class="op">!</span> ( :: <span class="ident">std</span> :: <span class="ident">mem</span> :: <span class="ident">size_of</span> :: <span class="op">&lt;</span> <span class="ident">signal_protocol_sender_key_store</span> <span class="op">&gt;</span> ( ) , <span class="number">32usize</span> , <span class="ident">concat</span> <span class="op">!</span> ( <span class="string">&quot;Size of: &quot;</span> , <span class="ident">stringify</span> <span class="op">!</span> ( <span class="ident">signal_protocol_sender_key_store</span> ) ) ) ; <span class="ident">assert_eq</span> <span class="op">!</span> ( :: <span class="ident">std</span> :: <span class="ident">mem</span> :: <span class="ident">align_of</span> :: <span class="op">&lt;</span> <span class="ident">signal_protocol_sender_key_store</span> <span class="op">&gt;</span> ( ) , <span class="number">8usize</span> , <span class="ident">concat</span> <span class="op">!</span> ( <span class="string">&quot;Alignment of &quot;</span> , <span class="ident">stringify</span> <span class="op">!</span> ( <span class="ident">signal_protocol_sender_key_store</span> ) ) ) ; <span class="ident">assert_eq</span> <span class="op">!</span> ( <span class="kw">unsafe</span> { <span class="op">&amp;</span> ( <span class="op">*</span> ( :: <span class="ident">std</span> :: <span class="ident">ptr</span> :: <span class="ident">null</span> :: <span class="op">&lt;</span> <span class="ident">signal_protocol_sender_key_store</span> <span class="op">&gt;</span> ( ) ) ) . <span class="ident">store_sender_key</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="kw">_</span> <span class="kw">as</span> <span class="ident">usize</span> } , <span class="number">0usize</span> , <span class="ident">concat</span> <span class="op">!</span> ( <span class="string">&quot;Offset of field: &quot;</span> , <span class="ident">stringify</span> <span class="op">!</span> ( <span class="ident">signal_protocol_sender_key_store</span> ) , <span class="string">&quot;::&quot;</span> , <span class="ident">stringify</span> <span class="op">!</span> ( <span class="ident">store_sender_key</span> ) ) ) ; <span class="ident">assert_eq</span> <span class="op">!</span> ( <span class="kw">unsafe</span> { <span class="op">&amp;</span> ( <span class="op">*</span> ( :: <span class="ident">std</span> :: <span class="ident">ptr</span> :: <span class="ident">null</span> :: <span class="op">&lt;</span> <span class="ident">signal_protocol_sender_key_store</span> <span class="op">&gt;</span> ( ) ) ) . <span class="ident">load_sender_key</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="kw">_</span> <span class="kw">as</span> <span class="ident">usize</span> } , <span class="number">8usize</span> , <span class="ident">concat</span> <span class="op">!</span> ( <span class="string">&quot;Offset of field: &quot;</span> , <span class="ident">stringify</span> <span class="op">!</span> ( <span class="ident">signal_protocol_sender_key_store</span> ) , <span class="string">&quot;::&quot;</span> , <span class="ident">stringify</span> <span class="op">!</span> ( <span class="ident">load_sender_key</span> ) ) ) ; <span class="ident">assert_eq</span> <span class="op">!</span> ( <span class="kw">unsafe</span> { <span class="op">&amp;</span> ( <span class="op">*</span> ( :: <span class="ident">std</span> :: <span class="ident">ptr</span> :: <span class="ident">null</span> :: <span class="op">&lt;</span> <span class="ident">signal_protocol_sender_key_store</span> <span class="op">&gt;</span> ( ) ) ) . <span class="ident">destroy_func</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="kw">_</span> <span class="kw">as</span> <span class="ident">usize</span> } , <span class="number">16usize</span> , <span class="ident">concat</span> <span class="op">!</span> ( <span class="string">&quot;Offset of field: &quot;</span> , <span class="ident">stringify</span> <span class="op">!</span> ( <span class="ident">signal_protocol_sender_key_store</span> ) , <span class="string">&quot;::&quot;</span> , <span class="ident">stringify</span> <span class="op">!</span> ( <span class="ident">destroy_func</span> ) ) ) ; <span class="ident">assert_eq</span> <span class="op">!</span> ( <span class="kw">unsafe</span> { <span class="op">&amp;</span> ( <span class="op">*</span> ( :: <span class="ident">std</span> :: <span class="ident">ptr</span> :: <span class="ident">null</span> :: <span class="op">&lt;</span> <span class="ident">signal_protocol_sender_key_store</span> <span class="op">&gt;</span> ( ) ) ) . <span class="ident">user_data</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="kw">_</span> <span class="kw">as</span> <span class="ident">usize</span> } , <span class="number">24usize</span> , <span class="ident">concat</span> <span class="op">!</span> ( <span class="string">&quot;Offset of field: &quot;</span> , <span class="ident">stringify</span> <span class="op">!</span> ( <span class="ident">signal_protocol_sender_key_store</span> ) , <span class="string">&quot;::&quot;</span> , <span class="ident">stringify</span> <span class="op">!</span> ( <span class="ident">user_data</span> ) ) ) ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; Create a new instance of the global library context.&quot;</span> ] <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">signal_context_create</span> ( <span class="ident">context</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_context</span> , <span class="ident">user_data</span> : <span class="op">*</span> <span class="kw-2">mut</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_void</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; Set the crypto provider to be used by the Signal Protocol library.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param crypto_provider Populated structure of crypto provider function&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;     pointers. The contents of this structure are copied, so the caller&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;     does not need to maintain its instance.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @return 0 on success, negative on failure&quot;</span> ] <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">signal_context_set_crypto_provider</span> ( <span class="ident">context</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_context</span> , <span class="ident">crypto_provider</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">signal_crypto_provider</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; Set the locking functions to be used by the Signal Protocol library for&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; synchronization.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; Note: These functions must allow recursive locking (e.g. PTHREAD_MUTEX_RECURSIVE)&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param lock function to lock a mutex&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param unlock function to unlock a mutex&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @return 0 on success, negative on failure&quot;</span> ] <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">signal_context_set_locking_functions</span> ( <span class="ident">context</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_context</span> , <span class="ident">lock</span> : :: <span class="ident">std</span> :: <span class="ident">option</span> :: <span class="prelude-ty">Option</span> <span class="op">&lt;</span> <span class="kw">unsafe</span> <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> <span class="kw">fn</span> ( <span class="ident">user_data</span> : <span class="op">*</span> <span class="kw-2">mut</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_void</span> ) <span class="op">&gt;</span> , <span class="ident">unlock</span> : :: <span class="ident">std</span> :: <span class="ident">option</span> :: <span class="prelude-ty">Option</span> <span class="op">&lt;</span> <span class="kw">unsafe</span> <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> <span class="kw">fn</span> ( <span class="ident">user_data</span> : <span class="op">*</span> <span class="kw-2">mut</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_void</span> ) <span class="op">&gt;</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; Set the log function to be used by the Signal Protocol library for logging.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @return 0 on success, negative on failure&quot;</span> ] <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">signal_context_set_log_function</span> ( <span class="ident">context</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_context</span> , <span class="ident">log</span> : :: <span class="ident">std</span> :: <span class="ident">option</span> :: <span class="prelude-ty">Option</span> <span class="op">&lt;</span> <span class="kw">unsafe</span> <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> <span class="kw">fn</span> ( <span class="ident">level</span> : :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> , <span class="ident">message</span> : <span class="op">*</span> <span class="kw">const</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_char</span> , <span class="ident">len</span> : <span class="ident">usize</span> , <span class="ident">user_data</span> : <span class="op">*</span> <span class="kw-2">mut</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_void</span> ) <span class="op">&gt;</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">signal_context_destroy</span> ( <span class="ident">context</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_context</span> ) ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; Create a new instance of the Signal Protocol data store interface.&quot;</span> ] <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">signal_protocol_store_context_create</span> ( <span class="ident">context</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_protocol_store_context</span> , <span class="ident">global_context</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_context</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">signal_protocol_store_context_set_session_store</span> ( <span class="ident">context</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_protocol_store_context</span> , <span class="ident">store</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">signal_protocol_session_store</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">signal_protocol_store_context_set_pre_key_store</span> ( <span class="ident">context</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_protocol_store_context</span> , <span class="ident">store</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">signal_protocol_pre_key_store</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">signal_protocol_store_context_set_signed_pre_key_store</span> ( <span class="ident">context</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_protocol_store_context</span> , <span class="ident">store</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">signal_protocol_signed_pre_key_store</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">signal_protocol_store_context_set_identity_key_store</span> ( <span class="ident">context</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_protocol_store_context</span> , <span class="ident">store</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">signal_protocol_identity_key_store</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">signal_protocol_store_context_set_sender_key_store</span> ( <span class="ident">context</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_protocol_store_context</span> , <span class="ident">store</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">signal_protocol_sender_key_store</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">signal_protocol_store_context_destroy</span> ( <span class="ident">context</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_protocol_store_context</span> ) ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">signal_protocol_session_load_session</span> ( <span class="ident">context</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_protocol_store_context</span> , <span class="ident">record</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">session_record</span> , <span class="ident">address</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">signal_protocol_address</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">signal_protocol_session_get_sub_device_sessions</span> ( <span class="ident">context</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_protocol_store_context</span> , <span class="ident">sessions</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_int_list</span> , <span class="ident">name</span> : <span class="op">*</span> <span class="kw">const</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_char</span> , <span class="ident">name_len</span> : <span class="ident">usize</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">signal_protocol_session_store_session</span> ( <span class="ident">context</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_protocol_store_context</span> , <span class="ident">address</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">signal_protocol_address</span> , <span class="ident">record</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">session_record</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">signal_protocol_session_contains_session</span> ( <span class="ident">context</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_protocol_store_context</span> , <span class="ident">address</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">signal_protocol_address</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">signal_protocol_session_delete_session</span> ( <span class="ident">context</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_protocol_store_context</span> , <span class="ident">address</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">signal_protocol_address</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">signal_protocol_session_delete_all_sessions</span> ( <span class="ident">context</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_protocol_store_context</span> , <span class="ident">name</span> : <span class="op">*</span> <span class="kw">const</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_char</span> , <span class="ident">name_len</span> : <span class="ident">usize</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">signal_protocol_pre_key_load_key</span> ( <span class="ident">context</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_protocol_store_context</span> , <span class="ident">pre_key</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">session_pre_key</span> , <span class="ident">pre_key_id</span> : <span class="ident">u32</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">signal_protocol_pre_key_store_key</span> ( <span class="ident">context</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_protocol_store_context</span> , <span class="ident">pre_key</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">session_pre_key</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">signal_protocol_pre_key_contains_key</span> ( <span class="ident">context</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_protocol_store_context</span> , <span class="ident">pre_key_id</span> : <span class="ident">u32</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">signal_protocol_pre_key_remove_key</span> ( <span class="ident">context</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_protocol_store_context</span> , <span class="ident">pre_key_id</span> : <span class="ident">u32</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">signal_protocol_signed_pre_key_load_key</span> ( <span class="ident">context</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_protocol_store_context</span> , <span class="ident">pre_key</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">session_signed_pre_key</span> , <span class="ident">signed_pre_key_id</span> : <span class="ident">u32</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">signal_protocol_signed_pre_key_store_key</span> ( <span class="ident">context</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_protocol_store_context</span> , <span class="ident">pre_key</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">session_signed_pre_key</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">signal_protocol_signed_pre_key_contains_key</span> ( <span class="ident">context</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_protocol_store_context</span> , <span class="ident">signed_pre_key_id</span> : <span class="ident">u32</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">signal_protocol_signed_pre_key_remove_key</span> ( <span class="ident">context</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_protocol_store_context</span> , <span class="ident">signed_pre_key_id</span> : <span class="ident">u32</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">signal_protocol_identity_get_key_pair</span> ( <span class="ident">context</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_protocol_store_context</span> , <span class="ident">key_pair</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">ratchet_identity_key_pair</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">signal_protocol_identity_get_local_registration_id</span> ( <span class="ident">context</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_protocol_store_context</span> , <span class="ident">registration_id</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">u32</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">signal_protocol_identity_save_identity</span> ( <span class="ident">context</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_protocol_store_context</span> , <span class="ident">address</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">signal_protocol_address</span> , <span class="ident">identity_key</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">ec_public_key</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">signal_protocol_identity_is_trusted_identity</span> ( <span class="ident">context</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_protocol_store_context</span> , <span class="ident">address</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">signal_protocol_address</span> , <span class="ident">identity_key</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">ec_public_key</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">signal_protocol_sender_key_store_key</span> ( <span class="ident">context</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_protocol_store_context</span> , <span class="ident">sender_key_name</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">signal_protocol_sender_key_name</span> , <span class="ident">record</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">sender_key_record</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">signal_protocol_sender_key_load_key</span> ( <span class="ident">context</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_protocol_store_context</span> , <span class="ident">record</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">sender_key_record</span> , <span class="ident">sender_key_name</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">signal_protocol_sender_key_name</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">ciphertext_message_get_type</span> ( <span class="ident">message</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">ciphertext_message</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">ciphertext_message_get_serialized</span> ( <span class="ident">message</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">ciphertext_message</span> ) <span class="op">-&gt;</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_buffer</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">signal_message_create</span> ( <span class="ident">message</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_message</span> , <span class="ident">message_version</span> : <span class="ident">u8</span> , <span class="ident">mac_key</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">u8</span> , <span class="ident">mac_key_len</span> : <span class="ident">usize</span> , <span class="ident">sender_ratchet_key</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">ec_public_key</span> , <span class="ident">counter</span> : <span class="ident">u32</span> , <span class="ident">previous_counter</span> : <span class="ident">u32</span> , <span class="ident">ciphertext</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">u8</span> , <span class="ident">ciphertext_len</span> : <span class="ident">usize</span> , <span class="ident">sender_identity_key</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">ec_public_key</span> , <span class="ident">receiver_identity_key</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">ec_public_key</span> , <span class="ident">global_context</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_context</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">signal_message_deserialize</span> ( <span class="ident">message</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_message</span> , <span class="ident">data</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">u8</span> , <span class="ident">len</span> : <span class="ident">usize</span> , <span class="ident">global_context</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_context</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">signal_message_copy</span> ( <span class="ident">message</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_message</span> , <span class="ident">other_message</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_message</span> , <span class="ident">global_context</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_context</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">signal_message_get_sender_ratchet_key</span> ( <span class="ident">message</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">signal_message</span> ) <span class="op">-&gt;</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">ec_public_key</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">signal_message_get_message_version</span> ( <span class="ident">message</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">signal_message</span> ) <span class="op">-&gt;</span> <span class="ident">u8</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">signal_message_get_counter</span> ( <span class="ident">message</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">signal_message</span> ) <span class="op">-&gt;</span> <span class="ident">u32</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">signal_message_get_body</span> ( <span class="ident">message</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">signal_message</span> ) <span class="op">-&gt;</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_buffer</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; Verify the MAC on the Signal message.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @return 1 if verified, 0 if invalid, negative on error&quot;</span> ] <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">signal_message_verify_mac</span> ( <span class="ident">message</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_message</span> , <span class="ident">sender_identity_key</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">ec_public_key</span> , <span class="ident">receiver_identity_key</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">ec_public_key</span> , <span class="ident">mac_key</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">u8</span> , <span class="ident">mac_key_len</span> : <span class="ident">usize</span> , <span class="ident">global_context</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_context</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">signal_message_is_legacy</span> ( <span class="ident">data</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">u8</span> , <span class="ident">len</span> : <span class="ident">usize</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">signal_message_destroy</span> ( <span class="ident">type_</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_type_base</span> ) ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">pre_key_signal_message_create</span> ( <span class="ident">pre_key_message</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">pre_key_signal_message</span> , <span class="ident">message_version</span> : <span class="ident">u8</span> , <span class="ident">registration_id</span> : <span class="ident">u32</span> , <span class="ident">pre_key_id</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">u32</span> , <span class="ident">signed_pre_key_id</span> : <span class="ident">u32</span> , <span class="ident">base_key</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">ec_public_key</span> , <span class="ident">identity_key</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">ec_public_key</span> , <span class="ident">message</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_message</span> , <span class="ident">global_context</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_context</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">pre_key_signal_message_deserialize</span> ( <span class="ident">message</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">pre_key_signal_message</span> , <span class="ident">data</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">u8</span> , <span class="ident">len</span> : <span class="ident">usize</span> , <span class="ident">global_context</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_context</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">pre_key_signal_message_copy</span> ( <span class="ident">message</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">pre_key_signal_message</span> , <span class="ident">other_message</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">pre_key_signal_message</span> , <span class="ident">global_context</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_context</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">pre_key_signal_message_get_message_version</span> ( <span class="ident">message</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">pre_key_signal_message</span> ) <span class="op">-&gt;</span> <span class="ident">u8</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">pre_key_signal_message_get_identity_key</span> ( <span class="ident">message</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">pre_key_signal_message</span> ) <span class="op">-&gt;</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">ec_public_key</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">pre_key_signal_message_get_registration_id</span> ( <span class="ident">message</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">pre_key_signal_message</span> ) <span class="op">-&gt;</span> <span class="ident">u32</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">pre_key_signal_message_has_pre_key_id</span> ( <span class="ident">message</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">pre_key_signal_message</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">pre_key_signal_message_get_pre_key_id</span> ( <span class="ident">message</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">pre_key_signal_message</span> ) <span class="op">-&gt;</span> <span class="ident">u32</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">pre_key_signal_message_get_signed_pre_key_id</span> ( <span class="ident">message</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">pre_key_signal_message</span> ) <span class="op">-&gt;</span> <span class="ident">u32</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">pre_key_signal_message_get_base_key</span> ( <span class="ident">message</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">pre_key_signal_message</span> ) <span class="op">-&gt;</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">ec_public_key</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">pre_key_signal_message_get_signal_message</span> ( <span class="ident">message</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">pre_key_signal_message</span> ) <span class="op">-&gt;</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_message</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">pre_key_signal_message_destroy</span> ( <span class="ident">type_</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_type_base</span> ) ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">sender_key_message_create</span> ( <span class="ident">message</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">sender_key_message</span> , <span class="ident">key_id</span> : <span class="ident">u32</span> , <span class="ident">iteration</span> : <span class="ident">u32</span> , <span class="ident">ciphertext</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">u8</span> , <span class="ident">ciphertext_len</span> : <span class="ident">usize</span> , <span class="ident">signature_key</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">ec_private_key</span> , <span class="ident">global_context</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_context</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">sender_key_message_deserialize</span> ( <span class="ident">message</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">sender_key_message</span> , <span class="ident">data</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">u8</span> , <span class="ident">len</span> : <span class="ident">usize</span> , <span class="ident">global_context</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_context</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">sender_key_message_copy</span> ( <span class="ident">message</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">sender_key_message</span> , <span class="ident">other_message</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">sender_key_message</span> , <span class="ident">global_context</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_context</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">sender_key_message_get_key_id</span> ( <span class="ident">message</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">sender_key_message</span> ) <span class="op">-&gt;</span> <span class="ident">u32</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">sender_key_message_get_iteration</span> ( <span class="ident">message</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">sender_key_message</span> ) <span class="op">-&gt;</span> <span class="ident">u32</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">sender_key_message_get_ciphertext</span> ( <span class="ident">message</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">sender_key_message</span> ) <span class="op">-&gt;</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_buffer</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">sender_key_message_verify_signature</span> ( <span class="ident">message</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">sender_key_message</span> , <span class="ident">signature_key</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">ec_public_key</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">sender_key_message_destroy</span> ( <span class="ident">type_</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_type_base</span> ) ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">sender_key_distribution_message_create</span> ( <span class="ident">message</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">sender_key_distribution_message</span> , <span class="ident">id</span> : <span class="ident">u32</span> , <span class="ident">iteration</span> : <span class="ident">u32</span> , <span class="ident">chain_key</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">u8</span> , <span class="ident">chain_key_len</span> : <span class="ident">usize</span> , <span class="ident">signature_key</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">ec_public_key</span> , <span class="ident">global_context</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_context</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">sender_key_distribution_message_deserialize</span> ( <span class="ident">message</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">sender_key_distribution_message</span> , <span class="ident">data</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">u8</span> , <span class="ident">len</span> : <span class="ident">usize</span> , <span class="ident">global_context</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_context</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">sender_key_distribution_message_copy</span> ( <span class="ident">message</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">sender_key_distribution_message</span> , <span class="ident">other_message</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">sender_key_distribution_message</span> , <span class="ident">global_context</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_context</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">sender_key_distribution_message_get_id</span> ( <span class="ident">message</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">sender_key_distribution_message</span> ) <span class="op">-&gt;</span> <span class="ident">u32</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">sender_key_distribution_message_get_iteration</span> ( <span class="ident">message</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">sender_key_distribution_message</span> ) <span class="op">-&gt;</span> <span class="ident">u32</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">sender_key_distribution_message_get_chain_key</span> ( <span class="ident">message</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">sender_key_distribution_message</span> ) <span class="op">-&gt;</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_buffer</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">sender_key_distribution_message_get_signature_key</span> ( <span class="ident">message</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">sender_key_distribution_message</span> ) <span class="op">-&gt;</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">ec_public_key</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">sender_key_distribution_message_destroy</span> ( <span class="ident">type_</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_type_base</span> ) ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">session_state_create</span> ( <span class="ident">state</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">session_state</span> , <span class="ident">global_context</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_context</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">session_state_serialize</span> ( <span class="ident">buffer</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_buffer</span> , <span class="ident">state</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">session_state</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">session_state_deserialize</span> ( <span class="ident">state</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">session_state</span> , <span class="ident">data</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">u8</span> , <span class="ident">len</span> : <span class="ident">usize</span> , <span class="ident">global_context</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_context</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">session_state_copy</span> ( <span class="ident">state</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">session_state</span> , <span class="ident">other_state</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">session_state</span> , <span class="ident">global_context</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_context</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">session_state_set_session_version</span> ( <span class="ident">state</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">session_state</span> , <span class="ident">version</span> : <span class="ident">u32</span> ) ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">session_state_get_session_version</span> ( <span class="ident">state</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">session_state</span> ) <span class="op">-&gt;</span> <span class="ident">u32</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">session_state_set_local_identity_key</span> ( <span class="ident">state</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">session_state</span> , <span class="ident">identity_key</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">ec_public_key</span> ) ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">session_state_get_local_identity_key</span> ( <span class="ident">state</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">session_state</span> ) <span class="op">-&gt;</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">ec_public_key</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">session_state_set_remote_identity_key</span> ( <span class="ident">state</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">session_state</span> , <span class="ident">identity_key</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">ec_public_key</span> ) ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">session_state_get_remote_identity_key</span> ( <span class="ident">state</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">session_state</span> ) <span class="op">-&gt;</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">ec_public_key</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">session_state_set_root_key</span> ( <span class="ident">state</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">session_state</span> , <span class="ident">root_key</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">ratchet_root_key</span> ) ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">session_state_get_root_key</span> ( <span class="ident">state</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">session_state</span> ) <span class="op">-&gt;</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">ratchet_root_key</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">session_state_set_previous_counter</span> ( <span class="ident">state</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">session_state</span> , <span class="ident">counter</span> : <span class="ident">u32</span> ) ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">session_state_get_previous_counter</span> ( <span class="ident">state</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">session_state</span> ) <span class="op">-&gt;</span> <span class="ident">u32</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">session_state_set_sender_chain</span> ( <span class="ident">state</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">session_state</span> , <span class="ident">sender_ratchet_key_pair</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">ec_key_pair</span> , <span class="ident">chain_key</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">ratchet_chain_key</span> ) ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">session_state_get_sender_ratchet_key</span> ( <span class="ident">state</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">session_state</span> ) <span class="op">-&gt;</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">ec_public_key</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">session_state_get_sender_ratchet_key_pair</span> ( <span class="ident">state</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">session_state</span> ) <span class="op">-&gt;</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">ec_key_pair</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">session_state_get_sender_chain_key</span> ( <span class="ident">state</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">session_state</span> ) <span class="op">-&gt;</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">ratchet_chain_key</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">session_state_set_sender_chain_key</span> ( <span class="ident">state</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">session_state</span> , <span class="ident">chain_key</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">ratchet_chain_key</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">session_state_has_sender_chain</span> ( <span class="ident">state</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">session_state</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">session_state_has_message_keys</span> ( <span class="ident">state</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">session_state</span> , <span class="ident">sender_ephemeral</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">ec_public_key</span> , <span class="ident">counter</span> : <span class="ident">u32</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">session_state_remove_message_keys</span> ( <span class="ident">state</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">session_state</span> , <span class="ident">message_keys_result</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">ratchet_message_keys</span> , <span class="ident">sender_ephemeral</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">ec_public_key</span> , <span class="ident">counter</span> : <span class="ident">u32</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">session_state_set_message_keys</span> ( <span class="ident">state</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">session_state</span> , <span class="ident">sender_ephemeral</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">ec_public_key</span> , <span class="ident">message_keys</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">ratchet_message_keys</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">session_state_add_receiver_chain</span> ( <span class="ident">state</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">session_state</span> , <span class="ident">sender_ratchet_key</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">ec_public_key</span> , <span class="ident">chain_key</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">ratchet_chain_key</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">session_state_set_receiver_chain_key</span> ( <span class="ident">state</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">session_state</span> , <span class="ident">sender_ephemeral</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">ec_public_key</span> , <span class="ident">chain_key</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">ratchet_chain_key</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">session_state_get_receiver_chain_key</span> ( <span class="ident">state</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">session_state</span> , <span class="ident">sender_ephemeral</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">ec_public_key</span> ) <span class="op">-&gt;</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">ratchet_chain_key</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">session_state_set_pending_key_exchange</span> ( <span class="ident">state</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">session_state</span> , <span class="ident">sequence</span> : <span class="ident">u32</span> , <span class="ident">our_base_key</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">ec_key_pair</span> , <span class="ident">our_ratchet_key</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">ec_key_pair</span> , <span class="ident">our_identity_key</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">ratchet_identity_key_pair</span> ) ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">session_state_get_pending_key_exchange_sequence</span> ( <span class="ident">state</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">session_state</span> ) <span class="op">-&gt;</span> <span class="ident">u32</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">session_state_get_pending_key_exchange_base_key</span> ( <span class="ident">state</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">session_state</span> ) <span class="op">-&gt;</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">ec_key_pair</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">session_state_get_pending_key_exchange_ratchet_key</span> ( <span class="ident">state</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">session_state</span> ) <span class="op">-&gt;</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">ec_key_pair</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">session_state_get_pending_key_exchange_identity_key</span> ( <span class="ident">state</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">session_state</span> ) <span class="op">-&gt;</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">ratchet_identity_key_pair</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">session_state_has_pending_key_exchange</span> ( <span class="ident">state</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">session_state</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">session_state_set_unacknowledged_pre_key_message</span> ( <span class="ident">state</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">session_state</span> , <span class="ident">pre_key_id</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">u32</span> , <span class="ident">signed_pre_key_id</span> : <span class="ident">u32</span> , <span class="ident">base_key</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">ec_public_key</span> ) ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">session_state_unacknowledged_pre_key_message_has_pre_key_id</span> ( <span class="ident">state</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">session_state</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">session_state_unacknowledged_pre_key_message_get_pre_key_id</span> ( <span class="ident">state</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">session_state</span> ) <span class="op">-&gt;</span> <span class="ident">u32</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">session_state_unacknowledged_pre_key_message_get_signed_pre_key_id</span> ( <span class="ident">state</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">session_state</span> ) <span class="op">-&gt;</span> <span class="ident">u32</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">session_state_unacknowledged_pre_key_message_get_base_key</span> ( <span class="ident">state</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">session_state</span> ) <span class="op">-&gt;</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">ec_public_key</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">session_state_has_unacknowledged_pre_key_message</span> ( <span class="ident">state</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">session_state</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">session_state_clear_unacknowledged_pre_key_message</span> ( <span class="ident">state</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">session_state</span> ) ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">session_state_set_remote_registration_id</span> ( <span class="ident">state</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">session_state</span> , <span class="ident">id</span> : <span class="ident">u32</span> ) ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">session_state_get_remote_registration_id</span> ( <span class="ident">state</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">session_state</span> ) <span class="op">-&gt;</span> <span class="ident">u32</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">session_state_set_local_registration_id</span> ( <span class="ident">state</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">session_state</span> , <span class="ident">id</span> : <span class="ident">u32</span> ) ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">session_state_get_local_registration_id</span> ( <span class="ident">state</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">session_state</span> ) <span class="op">-&gt;</span> <span class="ident">u32</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">session_state_set_needs_refresh</span> ( <span class="ident">state</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">session_state</span> , <span class="ident">value</span> : :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ) ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">session_state_get_needs_refresh</span> ( <span class="ident">state</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">session_state</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">session_state_set_alice_base_key</span> ( <span class="ident">state</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">session_state</span> , <span class="ident">key</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">ec_public_key</span> ) ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">session_state_get_alice_base_key</span> ( <span class="ident">state</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">session_state</span> ) <span class="op">-&gt;</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">ec_public_key</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">session_state_destroy</span> ( <span class="ident">type_</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_type_base</span> ) ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; Constructs a session builder.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; The store and global contexts must remain valid for the lifetime of the&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; session builder.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; When finished, free the returned instance by calling session_builder_free().&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param builder set to a freshly allocated session builder instance&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param store the signal_protocol_store_context to store all state information in&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param remote_address the address of the remote user to build a session with&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param global_context the global library context&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @return 0 on success, or negative on failure&quot;</span> ] <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">session_builder_create</span> ( <span class="ident">builder</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">session_builder</span> , <span class="ident">store</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_protocol_store_context</span> , <span class="ident">remote_address</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">signal_protocol_address</span> , <span class="ident">global_context</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_context</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; Build a new session from a session_pre_key_bundle retrieved from a server.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param bundle A pre key bundle for the destination recipient, retrieved from a server.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @retval SG_SUCCESS Success&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @retval SG_ERR_INVALID_KEY when the session_pre_key_bundle is badly formatted.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @retval SG_ERR_UNTRUSTED_IDENTITY when the sender&#39;s identity key is not trusted.&quot;</span> ] <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">session_builder_process_pre_key_bundle</span> ( <span class="ident">builder</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">session_builder</span> , <span class="ident">bundle</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">session_pre_key_bundle</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">session_builder_free</span> ( <span class="ident">builder</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">session_builder</span> ) ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; Construct a session cipher for encrypt/decrypt operations on a session.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; In order to use session_cipher, a session must have already been created&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; and stored using session_builder.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; The store and global contexts must remain valid for the lifetime of the&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; session cipher.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; When finished, free the returned instance by calling session_cipher_free().&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param cipher set to a freshly allocated session cipher instance&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param store the signal_protocol_store_context to store all state information in&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param remote_address the remote address that messages will be encrypted to or decrypted from.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param global_context the global library context&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @return 0 on success, or negative on failure&quot;</span> ] <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">session_cipher_create</span> ( <span class="ident">cipher</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">session_cipher</span> , <span class="ident">store</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_protocol_store_context</span> , <span class="ident">remote_address</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">signal_protocol_address</span> , <span class="ident">global_context</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_context</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; Set the optional user data pointer for the session cipher.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; This is to give callback functions a way of accessing app specific&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; context information for this cipher.&quot;</span> ] <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">session_cipher_set_user_data</span> ( <span class="ident">cipher</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">session_cipher</span> , <span class="ident">user_data</span> : <span class="op">*</span> <span class="kw-2">mut</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_void</span> ) ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; Get the optional user data pointer for the session cipher.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; This is to give callback functions a way of accessing app specific&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; context information for this cipher.&quot;</span> ] <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">session_cipher_get_user_data</span> ( <span class="ident">cipher</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">session_cipher</span> ) <span class="op">-&gt;</span> <span class="op">*</span> <span class="kw-2">mut</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_void</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; Set the callback function that is called during the decrypt process.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; The callback function is called from within&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; session_cipher_decrypt_pre_key_signal_message() and&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; session_cipher_decrypt_signal_message() after decryption is complete&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; but before the updated session state has been committed to the session&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; store. If the callback function returns a negative value, then the&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; decrypt function will immediately fail with an error.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; This a callback allows some implementations to store the committed plaintext&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; to their local message store first, in case they are concerned with a crash&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; or write error happening between the time the session state is updated but&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; before they&#39;re able to successfully store the plaintext to disk.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param callback the callback function to set&quot;</span> ] <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">session_cipher_set_decryption_callback</span> ( <span class="ident">cipher</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">session_cipher</span> , <span class="ident">callback</span> : :: <span class="ident">std</span> :: <span class="ident">option</span> :: <span class="prelude-ty">Option</span> <span class="op">&lt;</span> <span class="kw">unsafe</span> <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> <span class="kw">fn</span> ( <span class="ident">cipher</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">session_cipher</span> , <span class="ident">plaintext</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_buffer</span> , <span class="ident">decrypt_context</span> : <span class="op">*</span> <span class="kw-2">mut</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_void</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> <span class="op">&gt;</span> ) ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; Encrypt a message.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param padded_message The plaintext message bytes, optionally padded to a constant multiple.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param padded_message_len The length of the data pointed to by padded_message&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param encrypted_message Set to a ciphertext message encrypted to the recipient+device tuple.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @return SG_SUCCESS on success, negative on error&quot;</span> ] <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">session_cipher_encrypt</span> ( <span class="ident">cipher</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">session_cipher</span> , <span class="ident">padded_message</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">u8</span> , <span class="ident">padded_message_len</span> : <span class="ident">usize</span> , <span class="ident">encrypted_message</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">ciphertext_message</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; Decrypt a message.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param ciphertext The pre_key_signal_message to decrypt.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param decrypt_context Optional context pointer associated with the&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;   ciphertext, which is passed to the decryption callback function&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param plaintext Set to a newly allocated buffer containing the plaintext.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @retval SG_SUCCESS Success&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @retval SG_ERR_INVALID_MESSAGE if the input is not valid ciphertext.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @retval SG_ERR_DUPLICATE_MESSAGE if the input is a message that has already been received.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @retval SG_ERR_LEGACY_MESSAGE if the input is a message formatted by a protocol version that&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;                               is no longer supported.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @retval SG_ERR_INVALID_KEY_ID when there is no local pre_key_record&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;                               that corresponds to the pre key ID in the message.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @retval SG_ERR_INVALID_KEY when the message is formatted incorrectly.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @retval SG_ERR_UNTRUSTED_IDENTITY when the identity key of the sender is untrusted.&quot;</span> ] <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">session_cipher_decrypt_pre_key_signal_message</span> ( <span class="ident">cipher</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">session_cipher</span> , <span class="ident">ciphertext</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">pre_key_signal_message</span> , <span class="ident">decrypt_context</span> : <span class="op">*</span> <span class="kw-2">mut</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_void</span> , <span class="ident">plaintext</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_buffer</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; Decrypt a message.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param ciphertext The signal_message to decrypt.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param decrypt_context Optional context pointer associated with the&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;   ciphertext, which is passed to the decryption callback function&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param plaintext Set to a newly allocated buffer containing the plaintext.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @retval SG_SUCCESS Success&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @retval SG_ERR_INVALID_MESSAGE if the input is not valid ciphertext.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @retval SG_ERR_DUPLICATE_MESSAGE if the input is a message that has already been received.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @retval SG_ERR_LEGACY_MESSAGE if the input is a message formatted by a protocol version that&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;                               is no longer supported.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @retval SG_ERR_NO_SESSION if there is no established session for this contact.&quot;</span> ] <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">session_cipher_decrypt_signal_message</span> ( <span class="ident">cipher</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">session_cipher</span> , <span class="ident">ciphertext</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_message</span> , <span class="ident">decrypt_context</span> : <span class="op">*</span> <span class="kw-2">mut</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_void</span> , <span class="ident">plaintext</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_buffer</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; Gets the remote registration ID for this session cipher.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param remote_id Set to the value of the remote registration ID&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @return SG_SUCCESS on success, negative on error&quot;</span> ] <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">session_cipher_get_remote_registration_id</span> ( <span class="ident">cipher</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">session_cipher</span> , <span class="ident">remote_id</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">u32</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; Gets the version of the session associated with this session cipher.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param version Set to the value of the session version&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @retval SG_SUCCESS Success&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @retval SG_ERR_NO_SESSION if no session could be found&quot;</span> ] <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">session_cipher_get_session_version</span> ( <span class="ident">cipher</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">session_cipher</span> , <span class="ident">version</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">u32</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">session_cipher_free</span> ( <span class="ident">cipher</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">session_cipher</span> ) ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; Generate an identity key pair.  Clients should only do this once,&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; at install time.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param key_pair the generated identity key pair&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @return 0 on success, or negative on failure&quot;</span> ] <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">signal_protocol_key_helper_generate_identity_key_pair</span> ( <span class="ident">key_pair</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">ratchet_identity_key_pair</span> , <span class="ident">global_context</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_context</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; Generate a registration ID.  Clients should only do this once,&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; at install time.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param registration_id set to the generated registration ID&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param extended_range By default (0), the generated registration&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;                      ID is sized to require the minimal possible protobuf&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;                      encoding overhead. Specify true (1) if the caller needs&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;                      the full range of MAX_INT at the cost of slightly&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;                      higher encoding overhead.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @return 0 on success, or negative on failure&quot;</span> ] <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">signal_protocol_key_helper_generate_registration_id</span> ( <span class="ident">registration_id</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">u32</span> , <span class="ident">extended_range</span> : :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> , <span class="ident">global_context</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_context</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; Generate a random number between 0 (inclusive) and the provided maximum (exclusive).&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param value set to the next random number&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param max the maximum bound on the value of the random number&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @return 0 on success, or negative on failure&quot;</span> ] <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">signal_protocol_key_helper_get_random_sequence</span> ( <span class="ident">value</span> : <span class="op">*</span> <span class="kw-2">mut</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> , <span class="ident">max</span> : :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> , <span class="ident">global_context</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_context</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; Generate a list of PreKeys.  Clients should do this at install time, and&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; subsequently any time the list of PreKeys stored on the server runs low.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; Pre key IDs are shorts, so they will eventually be repeated.  Clients should&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; store pre keys in a circular buffer, so that they are repeated as infrequently&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; as possible.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; When finished with this list, the caller should free it by calling&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; signal_protocol_key_helper_key_list_free().&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param head pointer to the head of the key list&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param start the starting pre key ID, inclusive.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param count the number of pre keys to generate.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @return 0 on success, or negative on failure&quot;</span> ] <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">signal_protocol_key_helper_generate_pre_keys</span> ( <span class="ident">head</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_protocol_key_helper_pre_key_list_node</span> , <span class="ident">start</span> : :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_uint</span> , <span class="ident">count</span> : :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_uint</span> , <span class="ident">global_context</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_context</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; Get the pre key element for the current node in the key list.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param node current list node&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @return pre key element&quot;</span> ] <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">signal_protocol_key_helper_key_list_element</span> ( <span class="ident">node</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">signal_protocol_key_helper_pre_key_list_node</span> ) <span class="op">-&gt;</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">session_pre_key</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; Get the next element in the key list.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param node current list node&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @return next list node, or 0 if at the end of the list&quot;</span> ] <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">signal_protocol_key_helper_key_list_next</span> ( <span class="ident">node</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">signal_protocol_key_helper_pre_key_list_node</span> ) <span class="op">-&gt;</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_protocol_key_helper_pre_key_list_node</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; Free the key list.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param head pointer to the head of the list to free&quot;</span> ] <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">signal_protocol_key_helper_key_list_free</span> ( <span class="ident">head</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_protocol_key_helper_pre_key_list_node</span> ) ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; Generate a signed pre key&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param signed_pre_key set to the generated pre key&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param identity_key_pair the local client&#39;s identity key pair.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param signed_pre_key_id the pre key ID to assign the generated signed pre key&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param timestamp the current time in milliseconds since the UNIX epoch&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @return 0 on success, or negative on failure&quot;</span> ] <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">signal_protocol_key_helper_generate_signed_pre_key</span> ( <span class="ident">signed_pre_key</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">session_signed_pre_key</span> , <span class="ident">identity_key_pair</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">ratchet_identity_key_pair</span> , <span class="ident">signed_pre_key_id</span> : <span class="ident">u32</span> , <span class="ident">timestamp</span> : <span class="ident">u64</span> , <span class="ident">global_context</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_context</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">signal_protocol_key_helper_generate_sender_signing_key</span> ( <span class="ident">key_pair</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">ec_key_pair</span> , <span class="ident">global_context</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_context</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">signal_protocol_key_helper_generate_sender_key</span> ( <span class="ident">key_buffer</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_buffer</span> , <span class="ident">global_context</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_context</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">signal_protocol_key_helper_generate_sender_key_id</span> ( <span class="ident">key_id</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">u32</span> , <span class="ident">global_context</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_context</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">sender_message_key_create</span> ( <span class="ident">key</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">sender_message_key</span> , <span class="ident">iteration</span> : <span class="ident">u32</span> , <span class="ident">seed</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_buffer</span> , <span class="ident">global_context</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_context</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">sender_message_key_get_iteration</span> ( <span class="ident">key</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">sender_message_key</span> ) <span class="op">-&gt;</span> <span class="ident">u32</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">sender_message_key_get_iv</span> ( <span class="ident">key</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">sender_message_key</span> ) <span class="op">-&gt;</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_buffer</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">sender_message_key_get_cipher_key</span> ( <span class="ident">key</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">sender_message_key</span> ) <span class="op">-&gt;</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_buffer</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">sender_message_key_get_seed</span> ( <span class="ident">key</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">sender_message_key</span> ) <span class="op">-&gt;</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_buffer</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">sender_message_key_destroy</span> ( <span class="ident">type_</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_type_base</span> ) ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">sender_chain_key_create</span> ( <span class="ident">key</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">sender_chain_key</span> , <span class="ident">iteration</span> : <span class="ident">u32</span> , <span class="ident">chain_key</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_buffer</span> , <span class="ident">global_context</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_context</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">sender_chain_key_get_iteration</span> ( <span class="ident">key</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">sender_chain_key</span> ) <span class="op">-&gt;</span> <span class="ident">u32</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">sender_chain_key_create_message_key</span> ( <span class="ident">key</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">sender_chain_key</span> , <span class="ident">message_key</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">sender_message_key</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">sender_chain_key_create_next</span> ( <span class="ident">key</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">sender_chain_key</span> , <span class="ident">next_key</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">sender_chain_key</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">sender_chain_key_get_seed</span> ( <span class="ident">key</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">sender_chain_key</span> ) <span class="op">-&gt;</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_buffer</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">sender_chain_key_destroy</span> ( <span class="ident">type_</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_type_base</span> ) ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">sender_key_state_create</span> ( <span class="ident">state</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">sender_key_state</span> , <span class="ident">id</span> : <span class="ident">u32</span> , <span class="ident">chain_key</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">sender_chain_key</span> , <span class="ident">signature_public_key</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">ec_public_key</span> , <span class="ident">signature_private_key</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">ec_private_key</span> , <span class="ident">global_context</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_context</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">sender_key_state_serialize</span> ( <span class="ident">buffer</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_buffer</span> , <span class="ident">state</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">sender_key_state</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">sender_key_state_deserialize</span> ( <span class="ident">state</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">sender_key_state</span> , <span class="ident">data</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">u8</span> , <span class="ident">len</span> : <span class="ident">usize</span> , <span class="ident">global_context</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_context</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">sender_key_state_copy</span> ( <span class="ident">state</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">sender_key_state</span> , <span class="ident">other_state</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">sender_key_state</span> , <span class="ident">global_context</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_context</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">sender_key_state_get_key_id</span> ( <span class="ident">state</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">sender_key_state</span> ) <span class="op">-&gt;</span> <span class="ident">u32</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">sender_key_state_get_chain_key</span> ( <span class="ident">state</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">sender_key_state</span> ) <span class="op">-&gt;</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">sender_chain_key</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">sender_key_state_set_chain_key</span> ( <span class="ident">state</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">sender_key_state</span> , <span class="ident">chain_key</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">sender_chain_key</span> ) ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">sender_key_state_get_signing_key_public</span> ( <span class="ident">state</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">sender_key_state</span> ) <span class="op">-&gt;</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">ec_public_key</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">sender_key_state_get_signing_key_private</span> ( <span class="ident">state</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">sender_key_state</span> ) <span class="op">-&gt;</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">ec_private_key</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">sender_key_state_has_sender_message_key</span> ( <span class="ident">state</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">sender_key_state</span> , <span class="ident">iteration</span> : <span class="ident">u32</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">sender_key_state_add_sender_message_key</span> ( <span class="ident">state</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">sender_key_state</span> , <span class="ident">message_key</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">sender_message_key</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">sender_key_state_remove_sender_message_key</span> ( <span class="ident">state</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">sender_key_state</span> , <span class="ident">iteration</span> : <span class="ident">u32</span> ) <span class="op">-&gt;</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">sender_message_key</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">sender_key_state_destroy</span> ( <span class="ident">type_</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_type_base</span> ) ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; Constructs a group session builder.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; The store and global contexts must remain valid for the lifetime of the&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; session builder.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; When finished, free the returned instance by calling group_session_builder_free().&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param builder set to a freshly allocated group session builder instance&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param store the signal_protocol_store_context to store all state information in&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param global_context the global library context&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @return 0 on success, or negative on failure&quot;</span> ] <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">group_session_builder_create</span> ( <span class="ident">builder</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">group_session_builder</span> , <span class="ident">store</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_protocol_store_context</span> , <span class="ident">global_context</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_context</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; Construct a group session for receiving messages from senderKeyName.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param sender_key_name the (groupId, senderId, deviceId) tuple associated&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;     with the sender_key_distribution_message&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param distribution_message a received sender_key_distribution_message&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @return 0 on success, or negative on failure&quot;</span> ] <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">group_session_builder_process_session</span> ( <span class="ident">builder</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">group_session_builder</span> , <span class="ident">sender_key_name</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">signal_protocol_sender_key_name</span> , <span class="ident">distribution_message</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">sender_key_distribution_message</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; Construct a group session for sending messages.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param distribution_message a distribution message to be allocated and populated&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param sender_key_name the (groupId, senderId, deviceId) tuple. In this&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;     case, the sender should be the caller&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @return 0 on success, or negative on failure&quot;</span> ] <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">group_session_builder_create_session</span> ( <span class="ident">builder</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">group_session_builder</span> , <span class="ident">distribution_message</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">sender_key_distribution_message</span> , <span class="ident">sender_key_name</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">signal_protocol_sender_key_name</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">group_session_builder_free</span> ( <span class="ident">builder</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">group_session_builder</span> ) ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; Construct a group cipher for encrypt/decrypt operations.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; The store and global contexts must remain valid for the lifetime of the&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; group cipher.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; When finished, free the returned instance by calling group_cipher_free().&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param cipher set to a freshly allocated group cipher instance&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param store the signal_protocol_store_context to store all state information in&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param sender_key_id the sender that messages will be encrypted to or decrypted from&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param global_context the global library context&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @return 0 on success, or negative on failure&quot;</span> ] <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">group_cipher_create</span> ( <span class="ident">cipher</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">group_cipher</span> , <span class="ident">store</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_protocol_store_context</span> , <span class="ident">sender_key_id</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">signal_protocol_sender_key_name</span> , <span class="ident">global_context</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_context</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; Set the optional user data pointer for the group cipher.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; This is to give callback functions a way of accessing app specific&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; context information for this cipher.&quot;</span> ] <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">group_cipher_set_user_data</span> ( <span class="ident">cipher</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">group_cipher</span> , <span class="ident">user_data</span> : <span class="op">*</span> <span class="kw-2">mut</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_void</span> ) ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; Get the optional user data pointer for the group cipher.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; This is to give callback functions a way of accessing app specific&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; context information for this cipher.&quot;</span> ] <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">group_cipher_get_user_data</span> ( <span class="ident">cipher</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">group_cipher</span> ) <span class="op">-&gt;</span> <span class="op">*</span> <span class="kw-2">mut</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_void</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; Set the callback function that is called during the decrypt process.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; The callback function is called from within group_cipher_decrypt() after&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; decryption is complete but before the updated session state has been&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; committed to the session store. If the callback function returns a&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; negative value, then the decrypt function will immediately fail with&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; an error.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; This a callback allows some implementations to store the committed plaintext&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; to their local message store first, in case they are concerned with a crash&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; or write error happening between the time the session state is updated but&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; before they&#39;re able to successfully store the plaintext to disk.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param callback the callback function to set&quot;</span> ] <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">group_cipher_set_decryption_callback</span> ( <span class="ident">cipher</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">group_cipher</span> , <span class="ident">callback</span> : :: <span class="ident">std</span> :: <span class="ident">option</span> :: <span class="prelude-ty">Option</span> <span class="op">&lt;</span> <span class="kw">unsafe</span> <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> <span class="kw">fn</span> ( <span class="ident">cipher</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">group_cipher</span> , <span class="ident">plaintext</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_buffer</span> , <span class="ident">decrypt_context</span> : <span class="op">*</span> <span class="kw-2">mut</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_void</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> <span class="op">&gt;</span> ) ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; Encrypt a message.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param padded_plaintext The plaintext message bytes, optionally padded to a constant multiple.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param padded_plaintext_len The length of the data pointed to by padded_message&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param encrypted_message Set to a ciphertext message encrypted to the group+sender+device tuple.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @retval SG_SUCCESS Success&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @retval SG_ERR_NO_SESSION if there is no established session for this contact.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @retval SG_ERR_INVALID_KEY if there is no valid private key for this session.&quot;</span> ] <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">group_cipher_encrypt</span> ( <span class="ident">cipher</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">group_cipher</span> , <span class="ident">padded_plaintext</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">u8</span> , <span class="ident">padded_plaintext_len</span> : <span class="ident">usize</span> , <span class="ident">encrypted_message</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">ciphertext_message</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; Decrypt a message.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param ciphertext The sender_key_message to decrypt.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param decrypt_context Optional context pointer associated with the&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;   ciphertext, which is passed to the decryption callback function&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param plaintext Set to a newly allocated buffer containing the plaintext.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @retval SG_SUCCESS Success&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @retval SG_ERR_INVALID_MESSAGE if the input is not valid ciphertext.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @retval SG_ERR_DUPLICATE_MESSAGE if the input is a message that has already been received.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @retval SG_ERR_LEGACY_MESSAGE if the input is a message formatted by a protocol version that&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;                               is no longer supported.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @retval SG_ERR_NO_SESSION if there is no established session for this contact.&quot;</span> ] <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">group_cipher_decrypt</span> ( <span class="ident">cipher</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">group_cipher</span> , <span class="ident">ciphertext</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">sender_key_message</span> , <span class="ident">decrypt_context</span> : <span class="op">*</span> <span class="kw-2">mut</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_void</span> , <span class="ident">plaintext</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_buffer</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">group_cipher_free</span> ( <span class="ident">cipher</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">group_cipher</span> ) ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">device_consistency_signature_create</span> ( <span class="ident">signature</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">device_consistency_signature</span> , <span class="ident">signature_data</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">u8</span> , <span class="ident">signature_len</span> : <span class="ident">usize</span> , <span class="ident">vrf_output_data</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">u8</span> , <span class="ident">vrf_output_len</span> : <span class="ident">usize</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">device_consistency_signature_get_signature</span> ( <span class="ident">signature</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">device_consistency_signature</span> ) <span class="op">-&gt;</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_buffer</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">device_consistency_signature_get_vrf_output</span> ( <span class="ident">signature</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">device_consistency_signature</span> ) <span class="op">-&gt;</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_buffer</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">device_consistency_signature_destroy</span> ( <span class="ident">type_</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_type_base</span> ) ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">device_consistency_commitment_create</span> ( <span class="ident">commitment</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">device_consistency_commitment</span> , <span class="ident">generation</span> : <span class="ident">u32</span> , <span class="ident">identity_key_list</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">ec_public_key_list</span> , <span class="ident">global_context</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_context</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">device_consistency_commitment_get_generation</span> ( <span class="ident">commitment</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">device_consistency_commitment</span> ) <span class="op">-&gt;</span> <span class="ident">u32</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">device_consistency_commitment_get_serialized</span> ( <span class="ident">commitment</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">device_consistency_commitment</span> ) <span class="op">-&gt;</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_buffer</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">device_consistency_commitment_destroy</span> ( <span class="ident">type_</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_type_base</span> ) ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">device_consistency_message_create_from_pair</span> ( <span class="ident">message</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">device_consistency_message</span> , <span class="ident">commitment</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">device_consistency_commitment</span> , <span class="ident">identity_key_pair</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">ec_key_pair</span> , <span class="ident">global_context</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_context</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">device_consistency_message_create_from_serialized</span> ( <span class="ident">message</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">device_consistency_message</span> , <span class="ident">commitment</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">device_consistency_commitment</span> , <span class="ident">serialized_data</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">u8</span> , <span class="ident">serialized_len</span> : <span class="ident">usize</span> , <span class="ident">identity_key</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">ec_public_key</span> , <span class="ident">global_context</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_context</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">device_consistency_message_get_serialized</span> ( <span class="ident">message</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">device_consistency_message</span> ) <span class="op">-&gt;</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_buffer</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">device_consistency_message_get_signature</span> ( <span class="ident">message</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">device_consistency_message</span> ) <span class="op">-&gt;</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">device_consistency_signature</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">device_consistency_signature_get_generation</span> ( <span class="ident">message</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">device_consistency_message</span> ) <span class="op">-&gt;</span> <span class="ident">u32</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">device_consistency_message_destroy</span> ( <span class="ident">type_</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_type_base</span> ) ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">device_consistency_code_generate_for</span> ( <span class="ident">commitment</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">device_consistency_commitment</span> , <span class="ident">signatures</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">device_consistency_signature_list</span> , <span class="ident">code_string</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="op">*</span> <span class="kw-2">mut</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_char</span> , <span class="ident">global_context</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_context</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">device_consistency_signature_list_alloc</span> ( ) <span class="op">-&gt;</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">device_consistency_signature_list</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">device_consistency_signature_list_copy</span> ( <span class="ident">list</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">device_consistency_signature_list</span> ) <span class="op">-&gt;</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">device_consistency_signature_list</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">device_consistency_signature_list_push_back</span> ( <span class="ident">list</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">device_consistency_signature_list</span> , <span class="ident">value</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">device_consistency_signature</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">device_consistency_signature_list_size</span> ( <span class="ident">list</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">device_consistency_signature_list</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_uint</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">device_consistency_signature_list_at</span> ( <span class="ident">list</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">device_consistency_signature_list</span> , <span class="ident">index</span> : :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_uint</span> ) <span class="op">-&gt;</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">device_consistency_signature</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">device_consistency_signature_list_free</span> ( <span class="ident">list</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">device_consistency_signature_list</span> ) ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; Generate a scannable and displayble fingerprint.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param local_stable_identifier The client&#39;s \&quot;stable\&quot; identifier.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param local_identity_key The client&#39;s identity key.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param remote_stable_identifier The remote party&#39;s \&quot;stable\&quot; identifier.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param remote_identity_key The remote party&#39;s identity key.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param fingerprint_val Set to a freshly allocated unique fingerprint for this conversation&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @return 0 on success, or negative on failure&quot;</span> ] <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">fingerprint_generator_create_for</span> ( <span class="ident">generator</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">fingerprint_generator</span> , <span class="ident">local_stable_identifier</span> : <span class="op">*</span> <span class="kw">const</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_char</span> , <span class="ident">local_identity_key</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">ec_public_key</span> , <span class="ident">remote_stable_identifier</span> : <span class="op">*</span> <span class="kw">const</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_char</span> , <span class="ident">remote_identity_key</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">ec_public_key</span> , <span class="ident">fingerprint_val</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">fingerprint</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; Generate a scannable and displayble fingerprint for a list of keys&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param local_stable_identifier The client&#39;s \&quot;stable\&quot; identifier.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param local_identity_key_list The client&#39;s identity key list.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param remote_stable_identifier The remote party&#39;s \&quot;stable\&quot; identifier.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param remote_identity_key_list The remote party&#39;s identity key list.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param fingerprint_val Set to a freshly allocated unique fingerprint for this conversation&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @return 0 on success, or negative on failure&quot;</span> ] <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">fingerprint_generator_create_for_list</span> ( <span class="ident">generator</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">fingerprint_generator</span> , <span class="ident">local_stable_identifier</span> : <span class="op">*</span> <span class="kw">const</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_char</span> , <span class="ident">local_identity_key_list</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">ec_public_key_list</span> , <span class="ident">remote_stable_identifier</span> : <span class="op">*</span> <span class="kw">const</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_char</span> , <span class="ident">remote_identity_key_list</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">ec_public_key_list</span> , <span class="ident">fingerprint_val</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">fingerprint</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">fingerprint_generator_free</span> ( <span class="ident">generator</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">fingerprint_generator</span> ) ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">fingerprint_create</span> ( <span class="ident">fingerprint_val</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">fingerprint</span> , <span class="ident">displayable</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">displayable_fingerprint</span> , <span class="ident">scannable</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">scannable_fingerprint</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">fingerprint_get_displayable</span> ( <span class="ident">fingerprint_val</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">fingerprint</span> ) <span class="op">-&gt;</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">displayable_fingerprint</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">fingerprint_get_scannable</span> ( <span class="ident">fingerprint_val</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">fingerprint</span> ) <span class="op">-&gt;</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">scannable_fingerprint</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">fingerprint_destroy</span> ( <span class="ident">type_</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_type_base</span> ) ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">displayable_fingerprint_create</span> ( <span class="ident">displayable</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">displayable_fingerprint</span> , <span class="ident">local_fingerprint</span> : <span class="op">*</span> <span class="kw">const</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_char</span> , <span class="ident">remote_fingerprint</span> : <span class="op">*</span> <span class="kw">const</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_char</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">displayable_fingerprint_local</span> ( <span class="ident">displayable</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">displayable_fingerprint</span> ) <span class="op">-&gt;</span> <span class="op">*</span> <span class="kw">const</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_char</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">displayable_fingerprint_remote</span> ( <span class="ident">displayable</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">displayable_fingerprint</span> ) <span class="op">-&gt;</span> <span class="op">*</span> <span class="kw">const</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_char</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">displayable_fingerprint_text</span> ( <span class="ident">displayable</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">displayable_fingerprint</span> ) <span class="op">-&gt;</span> <span class="op">*</span> <span class="kw">const</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_char</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">displayable_fingerprint_destroy</span> ( <span class="ident">type_</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_type_base</span> ) ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">scannable_fingerprint_create</span> ( <span class="ident">scannable</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">scannable_fingerprint</span> , <span class="ident">version</span> : <span class="ident">u32</span> , <span class="ident">local_stable_identifier</span> : <span class="op">*</span> <span class="kw">const</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_char</span> , <span class="ident">local_fingerprint</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">signal_buffer</span> , <span class="ident">remote_stable_identifier</span> : <span class="op">*</span> <span class="kw">const</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_char</span> , <span class="ident">remote_fingerprint</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">signal_buffer</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">scannable_fingerprint_serialize</span> ( <span class="ident">buffer</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_buffer</span> , <span class="ident">scannable</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">scannable_fingerprint</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">scannable_fingerprint_deserialize</span> ( <span class="ident">scannable</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">scannable_fingerprint</span> , <span class="ident">data</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">u8</span> , <span class="ident">len</span> : <span class="ident">usize</span> , <span class="ident">global_context</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_context</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">scannable_fingerprint_get_version</span> ( <span class="ident">scannable</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">scannable_fingerprint</span> ) <span class="op">-&gt;</span> <span class="ident">u32</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">scannable_fingerprint_get_local_stable_identifier</span> ( <span class="ident">scannable</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">scannable_fingerprint</span> ) <span class="op">-&gt;</span> <span class="op">*</span> <span class="kw">const</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_char</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">scannable_fingerprint_get_local_fingerprint</span> ( <span class="ident">scannable</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">scannable_fingerprint</span> ) <span class="op">-&gt;</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_buffer</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">scannable_fingerprint_get_remote_stable_identifier</span> ( <span class="ident">scannable</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">scannable_fingerprint</span> ) <span class="op">-&gt;</span> <span class="op">*</span> <span class="kw">const</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_char</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">scannable_fingerprint_get_remote_fingerprint</span> ( <span class="ident">scannable</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">scannable_fingerprint</span> ) <span class="op">-&gt;</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_buffer</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; Compare a scanned QR code with what we expect.&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param scannable The local scannable data&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @param other_scannable The data from the scanned code&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @retval 1 if the scannable codes match&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @retval 0 if the scannable codes do not match&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @retval SG_ERR_FP_VERSION_MISMATCH if the scanned fingerprint is the wrong version&quot;</span> ] # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; @retval SG_ERR_FP_IDENT_MISMATCH if the scanned fingerprint is for the wrong stable identifier&quot;</span> ] <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">scannable_fingerprint_compare</span> ( <span class="ident">scannable</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">scannable_fingerprint</span> , <span class="ident">other_scannable</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">scannable_fingerprint</span> ) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">scannable_fingerprint_destroy</span> ( <span class="ident">type_</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">signal_type_base</span> ) ; }</pre></div>
</section><section id="search" class="content hidden"></section><section class="footer"></section><aside id="help" class="hidden"><div><h1 class="hidden">Help</h1><div class="shortcuts"><h2>Keyboard Shortcuts</h2><dl><dt><kbd>?</kbd></dt><dd>Show this help dialog</dd><dt><kbd>S</kbd></dt><dd>Focus the search field</dd><dt><kbd>↑</kbd></dt><dd>Move up in search results</dd><dt><kbd>↓</kbd></dt><dd>Move down in search results</dd><dt><kbd>↹</kbd></dt><dd>Switch tab</dd><dt><kbd>&#9166;</kbd></dt><dd>Go to active search result</dd><dt><kbd>+</kbd></dt><dd>Expand all sections</dd><dt><kbd>-</kbd></dt><dd>Collapse all sections</dd></dl></div><div class="infos"><h2>Search Tricks</h2><p>Prefix searches with a type followed by a colon (e.g., <code>fn:</code>) to restrict the search to a given type.</p><p>Accepted types are: <code>fn</code>, <code>mod</code>, <code>struct</code>, <code>enum</code>, <code>trait</code>, <code>type</code>, <code>macro</code>, and <code>const</code>.</p><p>Search functions by type signature (e.g., <code>vec -> usize</code> or <code>* -> vec</code>)</p><p>Search multiple things at once by splitting your query with comma (e.g., <code>str,u8</code> or <code>String,struct:Vec,test</code>)</p></div></div></aside><script>window.rootPath = "../../../../../../../../../../../../";window.currentCrate = "libsignal_protocol_sys";</script><script src="../../../../../../../../../../../../aliases.js"></script><script src="../../../../../../../../../../../../main.js"></script><script src="../../../../../../../../../../../../source-script.js"></script><script src="../../../../../../../../../../../../source-files.js"></script><script defer src="../../../../../../../../../../../../search-index.js"></script></body></html>